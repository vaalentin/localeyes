{"version":3,"file":"main.js","names":[],"mappings":"","sources":["main.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"./app/src/scripts/main.js\":[function(require,module,exports){\n(function (global){\n/**\n * App bootstrap\n */\n\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\njQuery.ajaxSetup({ cache: true });\n\nvar AppView = _interopRequire(require(\"./views/AppView\"));\n\njQuery(function () {\n  return new AppView({ el: \".app\" });\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./views/AppView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/AppView.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/collections/CitiesCollection.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar CityModel = _interopRequire(require(\"../models/CityModel\"));\n\nmodule.exports = Backbone.Collection.extend({\n  model: CityModel\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../models/CityModel\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/CityModel.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/collections/LocalsCollection.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar LocalModel = _interopRequire(require(\"../models/LocalModel\"));\n\nmodule.exports = Backbone.Collection.extend({\n  model: LocalModel\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../models/LocalModel\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/LocalModel.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/BetterView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\n/**\n * Backbone BetterView\n *\n * Improved Backbone view\n * With auto template, helpers and lifecycle\n *\n * Lifecycle:\n * willInitialize: Right before the view is initialized\n * didInitialize: Right after the view is initialized\n * willRender: Right before the view is rendered\n * willRender: Right after the view is rendered\n * cache: Right after the view is rendered, cache DOM\n * willRemove: Right before the view is removed\n * didRemove: Right after the view is removed\n */\nBackbone.BetterView = Backbone.View.extend({\n  initialize: function initialize() {\n    if (this.willInitialize) {\n      this.willInitialize.apply(this.arguments);\n    }\n\n    if (this.template) {\n      this.template = _.template(this.template);\n    }\n\n    Backbone.View.prototype.initialize.apply(this, arguments);\n\n    if (this.didInitialize) {\n      this.didInitialize.apply(this, arguments);\n    }\n  },\n\n  remove: function remove() {\n    if (this.willRemove) {\n      this.willRemove.apply(this, arguments);\n    }\n\n    Backbone.View.prototype.remove.apply(this, arguments);\n\n    if (this.didRemove) {\n      this.didRemove.apply(this, arguments);\n    }\n  },\n\n  /**\n   * Assign a view to el itself or to a specific element\n   *\n   * @method assign\n   * @param {Backbone.View} [view] Single view\n   * @param {String} [selector]\n   */\n  assign: function assign(view, selector) {\n    if (!selector) {\n      view.setElement(this.$el.render());\n    } else {\n      view.setElement(this.$(selector)).render();\n    }\n  },\n\n  /**\n   * Unassign the view\n   *\n   * @method unassign\n   */\n  unassign: function unassign() {\n    this.$el.empty().off();\n    this.stopListening();\n    return this;\n  },\n\n  /**\n   * Append one or more views to el itself or to a specific element\n   *\n   * @method append\n   * @param {Backbone.View} [views] Single view or array of views\n   * @param {String} [selector]\n   */\n  append: function append(views, selector) {\n    var _this = this;\n    if (!_.isArray(views)) {\n      views = [views];\n    }\n\n    if (!selector) {\n      views.forEach(function (view) {\n        return _this.$el.append(view.render().el);\n      });\n    } else {\n      views.forEach(function (view) {\n        return _this.$(selector).append(view.render().el);\n      });\n    }\n  },\n\n  /**\n   * Prepend a view to el itself or to a specific element\n   *\n   * @method prepend\n   * @param {Backbone.View} [views] Single view or array of views\n   * @param {String} [selector]\n   */\n  prepend: function prepend(views, selector) {\n    var _this2 = this;\n    if (!_.isArray(views)) {\n      views = [views];\n    }\n\n    if (!selector) {\n      views.forEach(function (view) {\n        return _this2.$el.prepend(view.render().el);\n      });\n    } else {\n      views.forEach(function (view) {\n        return _this2.$(selector).prepend(view.render().el);\n      });\n    }\n  },\n\n  render: function render(data) {\n    var _this3 = this;\n    var _arguments = arguments;\n    if (this.willRender) {\n      this.willRender.apply(this, arguments);\n    }\n\n    if (!data) data = this.model ? this.model.toJSON() : {};\n    this.$el.html(this.template(data));\n\n    // cache DOM elements\n    if (this.els) {\n      var cache = {};\n      for (var name in this.els) {\n        if (this.els.hasOwnProperty(name)) {\n          cache[name] = this.$(this.els[name]);\n        }\n      }\n      this.els = cache;\n    }\n\n    if (this.didRender) {\n      setImmediate(function () {\n        _this3.didRender.apply(_this3, _arguments);\n      });\n    }\n\n    return this;\n  } });\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/ContentView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\n/**\n * Backbone ContentView\n *\n * Page with a content area where PageView can be placed\n */\nBackbone.ContentView = Backbone.PageView.extend({\n  /**\n   *  Selector for the content area\n   */\n  content: \"\",\n\n  /**\n   * Get the current active page\n   *\n   * @method getContent\n   * @return {Backbone.PageView}\n   */\n  getContent: function getContent() {\n    return this.currentView || {};\n  },\n\n  /**\n   * Change the content\n   *\n   * @method changeContent\n   * @param {Backbone.PageView} [view] View to add\n   */\n  changeContent: function changeContent(view) {\n    if (this.currentView && this.currentView.name === view.name) return false;\n\n    var next = (function () {\n      this.prepend(view, this.content);\n      this.currentView = view;\n      this.currentView.$el.css(\"z-index\", 2);\n      view[\"in\"]();\n    }).bind(this);\n\n    var previousView = this.currentView || null;\n\n    if (previousView) {\n      previousView.$el.css(\"z-index\", 1);\n      previousView.out(next).then(function () {\n        return previousView.remove();\n      });\n    } else {\n      next();\n    }\n  },\n\n  /**\n   * Remove the content\n   *\n   * @method removeContent\n   */\n  removeContent: function removeContent() {\n    var _this = this;\n    if (!this.currentView) return false;\n\n    this.currentView.out().then(function () {\n      _this.currentView.remove();\n      _this.currentView = null;\n    });\n  },\n\n  remove: function remove() {\n    this.removeContent();\n    Backbone.PageView.prototype.remove.apply(this, arguments);\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/PageView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\n/**\n * Backbone PageView\n *\n * Animated view that can be passed to a ContentView\n */\nBackbone.PageView = Backbone.BetterView.extend({\n  /**\n   * Name of the page\n   */\n  name: undefined,\n\n  /**\n   * Page in animation\n   *\n   * @method in\n   */\n  \"in\": function _in() {\n    this.$el.velocity(\"stop\").velocity({ opacity: 1 }, { duration: 800 });\n  },\n\n  /**\n   * Page out animation\n   *\n   * @method out\n   * @param {Function} [done] Start the in animation of the potential next page.\n   * @return {Promise} Resolve complete the animation, the view is then removed.\n   */\n  out: function out(done) {\n    var _this = this;\n    return new Promise(function (resolve, reject) {\n      setTimeout(done, 400);\n      _this.$el.velocity(\"stop\").velocity({ opacity: 0 }, { duration: 800, complete: resolve });\n    });\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/CityModel.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar slug = _interopRequire(require(\"../utils/slugUtil\"));\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    name: \"\",\n    country: \"\",\n    north: undefined,\n    east: undefined,\n    south: undefined,\n    west: undefined,\n    slug: undefined,\n    northSlug: undefined,\n    eastSlug: undefined,\n    southSlug: undefined,\n    westSlug: undefined,\n    local: undefined,\n    localSlug: undefined,\n    background: undefined,\n    cover: undefined,\n    icon: []\n  },\n\n  initialize: function () {\n    var _this = this;\n    var attrs = {};\n\n    if (!this.has(\"slug\")) {\n      attrs.slug = slug(this.get(\"name\"));\n    }\n\n    if (!this.has(\"localSlug\") && this.has(\"local\")) {\n      attrs.localSlug = slug(this.get(\"local\"));\n    }\n\n    [\"north\", \"east\", \"south\", \"west\"].forEach(function (direction) {\n      if (_this.has(direction) && !_this.has(\"\" + direction + \"Slug\")) {\n        attrs[\"\" + direction + \"Slug\"] = slug(_this.get(direction));\n      }\n    });\n\n    this.set(attrs);\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../utils/slugUtil\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/utils/slugUtil.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/FrameModel.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    north: undefined,\n    east: undefined,\n    south: undefined,\n    west: undefined\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/LocalModel.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar slug = _interopRequire(require(\"../utils/slugUtil\"));\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    name: undefined,\n    slug: undefined,\n    video: undefined,\n    images: []\n  },\n\n  initialize: function () {\n    if (!this.has(\"slug\")) {\n      this.set({ slug: slug(this.get(\"name\")) });\n    }\n  },\n\n  validate: function validate(attrs, options) {\n    if (!attrs.name) {\n      return \"Local must have a name.\";\n    }\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../utils/slugUtil\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/utils/slugUtil.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/MapModel.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.Model.extend({\n  /**\n   * @param {Object} [options]\n   * @param {Backbone.Collection} [options.collection] CityModel\n   */\n  initialize: function initialize(options) {\n    Backbone.Model.prototype.initialize.call(this);\n    _.extend(this, _.pick(options, \"collection\"));\n    this.build();\n  },\n\n  build: function build() {\n    var processParent = function (model, position) {\n      var slug = model.get(\"slug\");\n\n      var data = {};\n\n      data.position = position;\n\n      data.directions = {\n        north: model.get(\"northSlug\"),\n        east: model.get(\"eastSlug\"),\n        south: model.get(\"southSlug\"),\n        west: model.get(\"westSlug\")\n      };\n\n      map[slug] = data;\n    };\n\n    var processChildren = function (model, position) {\n      directions.forEach(function (direction) {\n        var slug = model.get(\"\" + direction.name + \"Slug\");\n        var child = collection.findWhere({ slug: slug });\n\n        if (child) {\n          var data = {};\n\n          data.position = {\n            left: position.left + direction.left,\n            top: position.top + direction.top\n          };\n\n          data.directions = {\n            north: child.get(\"northSlug\"),\n            east: child.get(\"eastSlug\"),\n            south: child.get(\"southSlug\"),\n            west: child.get(\"westSlug\")\n          };\n\n          map[slug] = data;\n        }\n      });\n    };\n\n    var processFirst = function () {\n      var model = models[0];\n      var position = { left: 0, top: 0 };\n      processParent(model, position);\n      processChildren(model, position);\n      models.splice(0, 1);\n    };\n\n    var processRest = function () {\n      for (var i = 0; i < models.length; ++i) {\n        var model = models[i];\n        var slug = model.get(\"slug\");\n\n        if (!map[slug]) continue;\n\n        var position = map[slug].position;\n        processChildren(model, position);\n        models.splice(i, 1);\n      }\n\n      if (models.length) processRest();\n    };\n\n    var map = {};\n\n    var collection = this.collection;\n    var models = this.collection.models.slice(0);\n\n    var directions = [{ name: \"north\", left: 0, top: -1 }, { name: \"east\", left: 1, top: 0 }, { name: \"south\", left: 0, top: 1 }, { name: \"west\", left: -1, top: 0 }];\n\n    processFirst();\n    processRest();\n\n    this.set(map);\n  },\n\n  getPosition: function getPosition(slug) {\n    if (this.has(slug)) {\n      return this.get(slug).position;\n    }\n  },\n  getDirections: function getDirections(slug) {\n    if (this.has(slug)) {\n      return this.get(slug).directions;\n    }\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/Features.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\n/**\n * Tests structure\n *\n * @return {Object} [data]\n * @return {String} [data.name] Test name, used to access to the result\n * @return {Boolean} [data.result] Test result\n * @return {String} [data.className] Classname to be added to html (can be empty)\n */\n\nfunction mobile() {\n  var name = \"mobile\";\n  var result = undefined;\n  var className = undefined;\n\n  if (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i) || false) {\n    result = true;\n  } else {\n    result = false;\n  }\n\n  className = result ? \"mobile\" : \"\";\n\n  return { name: name, result: result, className: className };\n}\n\nvar features = {};\nvar tests = [mobile];\n\nvar className = tests.map(function (test) {\n  var _test = test();\n\n  var name = _test.name;\n  var result = _test.result;\n  var className = _test.className;\n  features[name] = result;\n  return className;\n}).join(\" \");\n\njQuery(\"html\").addClass(className);\n\nmodule.exports = features;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/Loader.js\":[function(require,module,exports){\n\"use strict\";\n\nvar _prototypeProperties = function (child, staticProps, instanceProps) {\n  if (staticProps) Object.defineProperties(child, staticProps);\n  if (instanceProps) Object.defineProperties(child.prototype, instanceProps);\n};\n\nvar Loader = (function () {\n  function Loader(srcs) {\n    this.srcs = srcs;\n  }\n\n  _prototypeProperties(Loader, null, {\n    load: {\n      value: function load() {\n        return Promise.all(this.srcs.map(function (src) {\n          return new Promise(function (resolve, reject) {\n            var img = new Image();\n            img.onload = resolve;\n            img.onerror = reject;\n            img.src = src;\n          });\n        }));\n      },\n      writable: true,\n      enumerable: true,\n      configurable: true\n    }\n  });\n\n  return Loader;\n})();\n\nmodule.exports = Loader;\n\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/StoreModule.js\":[function(require,module,exports){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar LocalsCollection = _interopRequire(require(\"../collections/LocalsCollection\"));\n\nvar CitiesCollection = _interopRequire(require(\"../collections/CitiesCollection\"));\n\n/**\n * Data store\n *\n * Currently bootstrap the data,\n * Can easily fetch them over the network, by returning a Promise\n */\nmodule.exports = {\n  locals: new LocalsCollection(window.locals),\n  cities: new CitiesCollection(window.cities),\n\n  getLocals: function getLocals() {\n    return this.locals;\n  },\n\n  getCities: function getCities() {\n    return this.cities;\n  }\n};\n\n},{\"../collections/CitiesCollection\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/collections/CitiesCollection.js\",\"../collections/LocalsCollection\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/collections/LocalsCollection.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/partials/button.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\n/**\n * @param {Object} [options]\n * @param {String} [options.link] \n * @param {String} [options.text]\n */\nvar buttonPartial = exports.buttonPartial = function (options) {\n  var params = _.extend({\n    link: null,\n    text: \"\",\n    className: \"\"\n  }, options);\n\n  var link = params.link ? \"\\n    <a href=\\\"\" + params.link + \"\\\" class=\\\"button__link\\\">\\n      \" + (params.text || \"\") + \"\\n    </a>\\n  \" : \"\\n    <a class=\\\"button__link\\\">\\n      \" + (params.text || \"\") + \"\\n    </a>\\n  \";\n\n  return \"\\n    <div class=\\\"button \" + params.className + \"\\\">\\n      \" + link + \"\\n      <div class=\\\"button__border--top\\\"></div>\\n      <div class=\\\"button__border--left\\\"></div>\\n      <div class=\\\"button__border--bottom\\\"></div>\\n      <div class=\\\"button__border--right\\\"></div>\\n    </div>\\n  \";\n};\n\n/**\n * @param {jQuery} [$el]\n * @param {Object} [options]\n * @param {Boolean} [options.withBorders=false]\n * @param {Number} [options.delay=0]\n */\nvar buttonAnimation = exports.buttonAnimation = function ($el, options) {\n  var params = _.extend({\n    withBorders: false,\n    delay: 0\n  }, options);\n\n  var $horizontalBorders = $el.find(\".button__border--top, .button__border--bottom\");\n  var $verticalBorders = $el.find(\".button__border--left, .button__border--right\");\n\n  if (params.withBorders) {\n    $el.velocity(\"stop\").velocity({ opacity: 1, top: 0 }, { duration: 500, delay: params.delay });\n\n    $horizontalBorders.velocity(\"stop\").velocity({ width: \"100%\" }, { duration: 1000, delay: params.delay, display: \"block\" });\n\n    $verticalBorders.velocity(\"stop\").velocity({ height: \"100%\" }, { duration: 1000, delay: params.delay, display: \"block\" });\n  } else {\n    $el.velocity(\"stop\").velocity({ opacity: 1, top: 0 }, { duration: 500, delay: params.delay });\n\n    $horizontalBorders.velocity({ width: \"100%\" }, 0);\n\n    $verticalBorders.velocity({ height: \"100%\" }, 0);\n  }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/routers/AppRouter.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.Router.extend({\n  routes: {\n    \"\": \"welcome\",\n    howto: \"howto\",\n    \"local/:slug\": \"local\",\n    \"local/:slug/:language\": \"local\",\n    city: \"city\",\n    \"city/:slug\": \"city\",\n    \"city/:slug/:language\": \"city\"\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/utils/slugUtil.js\":[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = slug;\n/**\n * Slug a name\n * eg: Los Angeles => los_angeles\n *\n * @function slug\n * @param {String} [str='']\n * @return {String}\n */\nfunction slug() {\n  var str = arguments[0] === undefined ? \"\" : arguments[0];\n  return str.toLowerCase().replace(\" \", \"_\");\n}\n\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/AppView.js\":[function(require,module,exports){\n(function (global){\n/**\n * App main logic\n */\n\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nrequire(\"../extensions/BetterView\");\n\nrequire(\"../extensions/PageView\");\n\nrequire(\"../extensions/ContentView\");\n\nvar AppRouter = _interopRequire(require(\"../routers/AppRouter\"));\n\nvar Store = _interopRequire(require(\"../modules/StoreModule\"));\n\nvar LoaderView = _interopRequire(require(\"../views/LoaderView\"));\n\nvar WelcomeView = _interopRequire(require(\"../views/WelcomeView\"));\n\nvar CitiesView = _interopRequire(require(\"../views/CitiesView\"));\n\nvar LocalView = _interopRequire(require(\"../views/LocalView\"));\n\nvar HowtoView = _interopRequire(require(\"../views/HowtoView\"));\n\nmodule.exports = Backbone.ContentView.extend({\n  content: \".app__content\",\n\n  didInitialize: function didInitialize() {\n    var _this = this;\n    var router = new AppRouter();\n    var citiesView = null;\n\n    var loader = new LoaderView({ el: \".loader\" });\n    loader.out();\n\n    router.on(\"route:welcome\", function () {\n      var welcomeView = new WelcomeView();\n      _this.listenTo(welcomeView, \"router:navigate\", router.navigate);\n      _this.changeContent(welcomeView);\n    });\n\n    router.on(\"route:howto\", function () {\n      var howtoView = new HowtoView();\n      _this.changeContent(howtoView);\n    });\n\n    router.on(\"route:city\", function (slug, language) {\n      if (slug === \"en\") {\n        language = slug;\n        slug = null;\n      }\n\n      if (!slug) slug = Store.getCities().first().get(\"slug\");\n\n      if (_this.currentView && _this.currentView.name === \"cities\" && citiesView) {\n        citiesView.changeCity(slug);\n      } else {\n        citiesView = new CitiesView({ collection: Store.getCities(), activeCity: slug, language: language });\n        _this.listenTo(citiesView, \"router:navigate\", router.navigate);\n        _this.changeContent(citiesView);\n      }\n    });\n\n    router.on(\"route:local\", function (slug, language) {\n      var localModel = Store.getLocals().findWhere({ slug: slug });\n\n      if (localModel) {\n        var localView = new LocalView({ model: localModel, language: language });\n        _this.changeContent(localView);\n      }\n    });\n\n    Backbone.history.start();\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../extensions/BetterView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/BetterView.js\",\"../extensions/ContentView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/ContentView.js\",\"../extensions/PageView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/PageView.js\",\"../modules/StoreModule\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/StoreModule.js\",\"../routers/AppRouter\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/routers/AppRouter.js\",\"../views/CitiesView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CitiesView.js\",\"../views/HowtoView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/HowtoView.js\",\"../views/LoaderView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/LoaderView.js\",\"../views/LocalView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/LocalView.js\",\"../views/WelcomeView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/WelcomeView.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CitiesView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar Hammer = _interopRequire((typeof window !== \"undefined\" ? window.Hammer : typeof global !== \"undefined\" ? global.Hammer : null));\n\nvar Features = _interopRequire(require(\"../modules/Features\"));\n\nvar Store = _interopRequire(require(\"../modules/StoreModule\"));\n\nvar MapModel = _interopRequire(require(\"../models/MapModel\"));\n\nvar FrameModel = _interopRequire(require(\"../models/FrameModel\"));\n\nvar CityView = _interopRequire(require(\"./CityView\"));\n\nvar MenuView = _interopRequire(require(\"./MenuView\"));\n\nvar FrameView = _interopRequire(require(\"./FrameView\"));\n\nvar InfosView = _interopRequire(require(\"./InfosView\"));\n\nvar MapView = _interopRequire(require(\"./MapView\"));\n\nvar LocalsView = _interopRequire(require(\"./LocalsView\"));\n\nmodule.exports = Backbone.ContentView.extend({\n  name: \"cities\",\n  className: \"cities\",\n  content: \".cities__overlay\",\n\n  template: \"\\n    <div class=\\\"cities__overlay\\\"></div>\\n    <div class=\\\"cities__frame\\\"></div>\\n    <div class=\\\"cities__menu\\\"></div>\\n    <div class=\\\"cities__content\\\"></div>\\n  \",\n\n  els: {\n    $content: \".cities__content\"\n  },\n\n  // lifecycles methods\n  didInitialize: function didInitialize(options) {\n    var _this = this;\n    _.extend(this, _.pick(options, \"activeCity\", \"language\"));\n\n    this.map = new MapModel({ collection: this.collection });\n\n    this.menu = new MenuView();\n    this.frame = new FrameView({\n      model: new FrameModel(),\n      language: this.language\n    });\n\n    this.cities = this.collection.map(function (city) {\n      return new CityView({\n        model: city,\n        position: _this.map.getPosition(city.get(\"slug\")),\n        language: _this.language\n      });\n    });\n\n    this.listenTo(this.menu, \"click\", this.onMenuClick);\n    this.listenTo(this.frame, \"mouseover\", this.onFrameOver);\n    this.listenTo(this.frame, \"mouseout\", this.onFrameOut);\n    jQuery(document).on(\"keydown\", this.onKeydown.bind(this));\n    jQuery(window).on(\"resisze\", this.onResize.bind(this));\n\n    this.isSliding = false;\n    this.isOpen = false;\n\n    // touch screen\n    this.hammer = new Hammer.Manager(this.$el[0], { dragLockToAxis: true });\n    this.hammer.add(new Hammer.Pan({ direction: Hammer.DIRECTION_ALL }));\n\n    this.dragFactorA = null;\n    this.dragFactorB = null;\n    this.translateX = null;\n    this.translateY = null;\n    this.width = null;\n    this.height = null;\n    this.panY = false;\n    this.panX = false;\n\n    this.enableTouch();\n  },\n\n  willRemove: function willRemove() {\n    this.cities.forEach(function (city) {\n      return city.remove();\n    });\n    jQuery(document).off(\"keydown\", this.onKeydown);\n    jQuery(window).off(\"resize\", this.onResize);\n    if (this.hammer) this.hammer.destroy();\n  },\n\n  didRender: function didRender() {\n    this.append(this.cities, \".cities__content\");\n    this.assign(this.menu, \".cities__menu\");\n    this.assign(this.frame, \".cities__frame\");\n\n    this.setCity();\n    this.menu[\"in\"]();\n    this.frame[\"in\"]();\n  },\n\n  // touch methods\n  enableTouch: function enableTouch() {\n    this.hammer.on(\"panleft panright\", this.onPanHorizontal.bind(this));\n    this.hammer.on(\"panup pandown\", this.onPanVertical.bind(this));\n    this.hammer.on(\"panend\", this.onPanend.bind(this));\n  },\n\n  disableTouch: function disableTouch() {\n    this.hammer.off(\"panleft panright\", this.onPanHorizontal);\n    this.hammer.off(\"panup pandown\", this.onPanVertical);\n    this.hammer.off(\"panend\", this.onPanend);\n  },\n\n  onMenuClick: function onMenuClick(name) {\n    var _this2 = this;\n    var view = undefined;\n\n    if (name === \"infos\") {\n      view = new InfosView();\n    } else if (name === \"map\") {\n      view = new MapView({ collection: Store.getCities(), activeCity: this.activeCity });\n      this.listenTo(view, \"marker:click\", this.changeCity);\n    } else if (name === \"locals\") {\n      view = new LocalsView({ collection: Store.getCities() });\n    }\n\n    if (!view) return false;\n\n    this.disable();\n    this.changeContent(view);\n    this.menu.setActive(name);\n    this.listenTo(view, \"close\", function () {\n      _this2.enable();\n      _this2.removeContent();\n      _this2.menu.removeActive();\n    });\n  },\n\n  onPanHorizontal: function onPanHorizontal(e) {\n    if (this.panY) return false;\n    this.panX = true;\n\n    if (!this.dragFactorA || !this.dragFactorB) {\n      var directions = this.map.getDirections(this.activeCity);\n      this.dragFactorA = directions.west ? 1 : 0.2;\n      this.dragFactorB = directions.east ? 1 : 0.2;\n    }\n\n    if (!this.width || !this.height) this.onResize();\n\n    var factor = e.direction === 2 ? this.dragFactorB : this.dragFactorA;\n    var dragDistance = 100 / this.width * e.deltaX * factor;\n    var dragged = this.translateX + dragDistance;\n\n    this.els.$content.velocity({ translateX: dragged + \"%\" }, 0);\n  },\n\n  onPanVertical: function onPanVertical(e) {\n    if (this.panX) return false;\n    this.panY = true;\n\n    if (!this.dragFactorA || !this.dragFactorB) {\n      var directions = this.map.getDirections(this.activeCity);\n      this.dragFactorA = directions.north ? 1 : 0.2;\n      this.dragFactorB = directions.south ? 1 : 0.2;\n    }\n\n    if (!this.width || !this.height) this.onResize();\n\n    var factor = e.direction === 8 ? this.dragFactorB : this.dragFactorA;\n    var dragDistance = 100 / this.height * e.deltaY * factor;\n    var dragged = this.translateY + dragDistance;\n\n    this.els.$content.velocity({ translateY: dragged + \"%\" }, 0);\n  },\n\n  onPanend: function onPanend(e) {\n    var dragDistance = this.panX ? 100 / this.width * e.deltaX : 100 / this.height * e.deltaY;\n\n    if (Math.abs(dragDistance) < 40) {\n      this.dragFactorA = this.dragFactorB = null;\n      this.panX = this.panY = false;\n      return this.setPosition({ easing: \"ease-out\" });\n    }\n\n    var directions = this.map.getDirections(this.activeCity);\n\n    if (this.panX) {\n      if (dragDistance < 0) {\n        this.changeCity(directions.east, \"ease-out\");\n      } else {\n        this.changeCity(directions.west, \"ease-out\");\n      }\n    } else {\n      if (dragDistance < 0) {\n        this.changeCity(directions.south, \"ease-out\");\n      } else {\n        this.changeCity(directions.north, \"ease-out\");\n      }\n    }\n\n    this.setPosition({ easing: \"ease-out\" });\n\n    this.dragFactorA = this.dragFactorB = null;\n    this.panX = this.panY = false;\n  },\n\n  onFrameOver: function onFrameOver(direction) {\n    if (this.isSliding) return false;\n\n    var position = this.map.getPosition(this.activeCity);\n    var directions = this.map.getDirections(this.activeCity);\n\n    var props = undefined;\n\n    if (direction === \"north\" && directions.north) {\n      props = { translateY: -1 * (position.top * 100) + 10 + \"%\" };\n    } else if (direction === \"east\" && directions.east) {\n      props = { translateX: -1 * (position.left * 100) - 10 + \"%\" };\n    } else if (direction === \"south\" && directions.south) {\n      props = { translateY: -1 * (position.top * 100) - 10 + \"%\" };\n    } else if (direction === \"west\" && directions.west) {\n      props = { translateX: -1 * (position.left * 100) + 10 + \"%\" };\n    }\n\n    if (props) {\n      this.isOpen = true;\n      this.els.$content.velocity(\"stop\").velocity(props, { duration: 400 });\n    }\n  },\n\n  onFrameOut: function onFrameOut() {\n    if (this.isSliding || !this.isOpen) return false;\n\n    var position = this.map.getPosition(this.activeCity);\n\n    var props = {\n      translateX: \"\" + -1 * (position.left * 100) + \"%\",\n      translateY: \"\" + -1 * (position.top * 100) + \"%\"\n    };\n\n    this.els.$content.velocity(\"stop\").velocity(props, { duration: 400 });\n  },\n\n  onKeydown: function onKeydown(e) {\n    if (this.isSliding) return;\n\n    var directions = this.map.getDirections(this.activeCity);\n\n    var charcode = e.charcode ? e.charcode : e.keyCode;\n\n    switch (charcode) {\n      case 38:\n        this.changeCity(directions.north);\n        break;\n      case 39:\n        this.changeCity(directions.east);\n        break;\n      case 40:\n        this.changeCity(directions.south);\n        break;\n      case 37:\n        this.changeCity(directions.west);\n        break;\n    }\n  },\n\n  onResize: function onResize(e) {\n    this.width = this.$el.width();\n    this.height = this.$el.height();\n  },\n\n  disable: function disable() {\n    this.els.$content.velocity({ opacity: 0.5 }, 1000);\n    if (this.hammer) this.disableTouch();\n    // this.frame.disable();\n  },\n\n  enable: function enable() {\n    this.els.$content.velocity({ opacity: 1 }, 1000);\n    if (this.hammer) this.enableTouch();\n    // this.frame.enable();\n  },\n\n  setCity: function setCity() {\n    var model = this.collection.findWhere({ slug: this.activeCity });\n    var view = _.findWhere(this.cities, { model: model });\n    if (view) view[\"in\"]();\n\n    this.setPosition({ transition: false });\n    this.setDirections();\n  },\n\n  changeCity: function changeCity(slug) {\n    var easing = arguments[1] === undefined ? \"ease-in-out\" : arguments[1];\n    if (!slug || slug === this.activeCity) return false;\n\n    var model = this.collection.findWhere({ slug: slug });\n    var view = _.findWhere(this.cities, { model: model });\n    if (view) view[\"in\"]();\n\n    var previousView = undefined;\n\n    if (this.activeCity) {\n      var previousModel = this.collection.findWhere({ slug: this.activeCity });\n      previousView = _.findWhere(this.cities, { model: previousModel });\n    }\n\n    this.activeCity = slug;\n    this.setPosition({\n      transition: true,\n      complete: function () {\n        if (previousView) previousView.reset();\n      },\n      easing: easing\n    });\n    this.setDirections();\n  },\n\n  /**\n   * @param {Object} [otpions]\n   * @param {Boolean} [options.transition=true]\n   * @param {Number} [options.duration=800]\n   * @param {Function} [options.easing='ease-in-out']\n   * @param {Function} [options.complete]\n   */\n  setPosition: function setPosition(options) {\n    var _this3 = this;\n    if (this.isSliding) return false;\n\n    var params = _.extend({\n      transition: true,\n      duration: 800,\n      easing: \"ease-in-out\"\n    }, options);\n\n    var position = this.map.getPosition(this.activeCity);\n    var target = {\n      left: -1 * (position.left * 100),\n      top: -1 * (position.top * 100)\n    };\n\n    this.translateX = target.left;\n    this.translateY = target.top;\n\n    var props = {\n      translateX: \"\" + target.left + \"%\",\n      translateY: \"\" + target.top + \"%\"\n    };\n\n    this.isSliding = true;\n\n    this.els.$content.velocity(\"stop\").velocity(props, {\n      duration: params.transition ? params.duration : 0,\n      easing: params.easing,\n      complete: function () {\n        _this3.isSliding = false;\n        if (params.complete) params.complete();\n\n        var url = _this3.language ? \"/city/\" + _this3.activeCity + \"/\" + _this3.language : \"/city/\" + _this3.activeCity;\n\n        _this3.trigger(\"router:navigate\", url);\n      }\n    });\n  },\n\n  setDirections: function setDirections() {\n    var directions = this.map.getDirections(this.activeCity);\n\n    // load images\n\n    // active city\n    var model = this.collection.findWhere({ slug: this.activeCity });\n    var city = _.findWhere(this.cities, { model: model });\n    if (city) {\n      city.load();\n    }\n\n    // sourounding cities\n    for (var direction in directions) {\n      if (directions.hasOwnProperty(direction)) {\n        var _model = this.collection.findWhere({ slug: directions[direction] });\n        var _city = _.findWhere(this.cities, { model: _model });\n        if (_city) {\n          _city.load();\n        }\n      }\n    }\n\n    this.frame.model.set(directions);\n  },\n\n  // animations\n  out: function out(done) {\n    var _this4 = this;\n    var previousModel = this.collection.findWhere({ slug: this.activeCity });\n    var previousView = _.findWhere(this.cities, { model: previousModel });\n\n    return new Promise(function (resolve, reject) {\n      if (previousView) previousView.out();\n      _this4.frame.out();\n\n      setTimeout(done, 600);\n\n      _this4.$el.velocity(\"stop\").velocity({ opacity: 0 }, { duration: 1500, complete: resolve });\n    });\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../models/FrameModel\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/FrameModel.js\",\"../models/MapModel\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/MapModel.js\",\"../modules/Features\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/Features.js\",\"../modules/StoreModule\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/StoreModule.js\",\"./CityView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CityView.js\",\"./FrameView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/FrameView.js\",\"./InfosView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/InfosView.js\",\"./LocalsView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/LocalsView.js\",\"./MapView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/MapView.js\",\"./MenuView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/MenuView.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CityView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar Features = _interopRequire(require(\"../modules/Features\"));\n\nvar Loader = _interopRequire(require(\"../modules/Loader\"));\n\nvar buttonPartial = require(\"../partials/button\").buttonPartial;\nvar buttonAnimation = require(\"../partials/button\").buttonAnimation;\nmodule.exports = Backbone.BetterView.extend({\n  className: \"city\",\n\n  template: \"\\n    <div class=\\\"city__content\\\">\\n      <div class=\\\"city__content__section\\\">\\n        <div class=\\\"city__title\\\">\\n          <div class=\\\"city__icon\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 90 90\\\">\\n              <% _.each(icon, function(el) { %>\\n                <% if (el.path) { %>\\n                  <path fill=\\\"#ffffff\\\"\\n                    stroke=\\\"#ffffff\\\"\\n                    stroke-width=\\\"1\\\"\\n                    stroke-linecap=\\\"round\\\"\\n                    stroke-linejoin=\\\"round\\\"\\n                    d=\\\"<%= el.path %>\\\"\\n                    <% if (el.length) { %>\\n                      data-length=\\\"<%= el.length %>\\\"\\n                    <% } %>/>\\n                  <% } else if (el.line) { %>\\n                    <line fill=\\\"none\\\"\\n                      stroke=\\\"#ffffff\\\"\\n                      stroke-miterlimit=\\\"10\\\"\\n                      <%= el.line %>\\n                      <% if (el.length) { %>\\n                        data-length=\\\"<%= el.length %>\\\"\\n                      <% } %>/>\\n                  <% } else if (el.rect) { %>\\n                    <rect fill=\\\"#ffffff\\\"\\n                      <%= el.rect %>\\n                      <% if (el.length) { %>\\n                        data-length=\\\"<%= el.length %>\\\"\\n                      <% } %>/>\\n                  <% } %>\\n              <% }); %>\\n            </svg>\\n          </div>\\n          <h1 class=\\\"city__name\\\"> <% print(name.toUpperCase()); %> </h1>\\n          <h3 class=\\\"city__country\\\"> <% print(country.toUpperCase()); %> </h3>\\n          <div class=\\\"city__square--topLeft\\\"></div>\\n          <div class=\\\"city__square--topRight\\\"></div>\\n          <div class=\\\"city__square--bottomLeft\\\"></div>\\n          <div class=\\\"city__square--bottomRight\\\"></div>\\n        </div>\\n      </div>\\n      <% if (localSlug) { %>\\n      <div class=\\\"city__content__section--button\\\">\\n        <% if (language === 'en') { %>\\n          \" + buttonPartial({\n    link: \"#local/<%= localSlug %>/en\",\n    text: \"DISCOVER <span class=\\\"city__local\\\"> <% print(local.toUpperCase()); %> </span>\"\n  }) + \"\\n        <% } else { %>\\n          \" + buttonPartial({\n    link: \"#local/<%= localSlug %>\",\n    text: \"DÃ‰COUVRIR <span class=\\\"city__local\\\"> <% print(local.toUpperCase()); %> </span>\"\n  }) + \"\\n        <% } %>\\n      </div>\\n      <% } %>\\n    </div>\\n    <% if (background) { %>\\n      <div class=\\\"city__background\\\"></div>\\n    <% } %>\\n  \",\n\n  els: {\n    $squareTopLeft: \".city__square--topLeft\",\n    $squareTopRight: \".city__square--topRight\",\n    $squareBottomLeft: \".city__square--bottomLeft\",\n    $squareBottomRight: \".city__square--bottomRight\",\n    $name: \".city__name\",\n    $country: \".city__country\",\n    $icon: \".city__icon\",\n    $button: \".button\",\n    $bordersTopBottom: \".button__border--top, .button__border--bottom\",\n    $bordersLeftRight: \".button__border--left, .button__border--right\",\n    $background: \".city__background\",\n    $svgs: \"svg\"\n  },\n\n  didInitialize: function didInitialize(options) {\n    _.extend(this, _.pick(options, \"position\", \"language\"));\n  },\n\n  setPosition: function setPosition() {\n    this.$el.css({\n      left: this.position.left * 100 + \"%\",\n      top: this.position.top * 100 + \"%\"\n    });\n  },\n\n  \"in\": function _in() {\n    if (Features.mobile) return false;\n\n    this.els.$squareTopLeft.velocity(\"stop\").velocity({ left: 0, opacity: 1 }, { duration: 400, delay: 500 }).velocity({ top: 0 }, { duration: 400, delay: 200 });\n\n    this.els.$squareTopRight.velocity(\"stop\").velocity({ right: 0, opacity: 1 }, { duration: 400, delay: 500 }).velocity({ top: 0 }, { duration: 400, delay: 200 });\n\n    this.els.$squareBottomLeft.velocity(\"stop\").velocity({ left: 0, opacity: 1 }, { duration: 400, delay: 500 }).velocity({ bottom: 0 }, { duration: 400, delay: 300 });\n\n    this.els.$squareBottomRight.velocity(\"stop\").velocity({ right: 0, opacity: 1 }, { duration: 400, delay: 500 }).velocity({ bottom: 0 }, { duration: 400, delay: 300 });\n\n    this.els.$name.velocity(\"stop\").velocity({ opacity: 1, top: 0 }, { duration: 500, delay: 1100 });\n\n    this.els.$country.velocity(\"stop\").velocity({ opacity: 1, top: 0 }, { duration: 500, delay: 1200 });\n\n    this.els.$icon.velocity(\"stop\").velocity({ top: -90, opacity: 1 }, { duration: 1500, delay: 500 });\n\n    buttonAnimation(this.els.$button, { withBorders: true, delay: 1400 });\n\n    this.els.$background.velocity(\"stop\").velocity({ scale: 1.2 }, 0).velocity({ scale: 1 }, 2500);\n\n    this.els.$svgs.each(function () {\n      jQuery(\"path\", this).each(function () {\n        var $path = jQuery(this);\n        var data = $path.attr(\"data-length\");\n\n        var length = undefined;\n        if (data) {\n          length = parseFloat(data);\n        } else {\n          length = $path[0].getTotalLength();\n          $path.attr(\"data-length\", length);\n        }\n\n        $path.velocity(\"stop\").velocity({\n          \"stroke-dashoffset\": length,\n          \"stroke-dasharray\": \"\" + length + \",\" + length,\n          fillOpacity: 0,\n          strokeOpacity: 1\n        }, 0).velocity({ \"stroke-dashoffset\": 0 }, { duration: 2000, delay: 500 }).velocity({ fillOpacity: 1 }, { duration: 500, delay: 2000, queue: false });\n      });\n    });\n  },\n\n  out: function out() {\n    if (Features.mobile) return false;\n\n    this.els.$background.velocity(\"stop\").velocity({ scale: 1.2 }, 600);\n\n    this.$el.velocity(\"stop\").velocity({ opacity: 0 }, { duration: 600 });\n  },\n\n  /**\n   * Instantly reset the view (ready to animate in)\n   *\n   * @method reset\n   */\n  reset: function reset() {\n    if (Features.mobile) return false;\n\n    this.els.$squareTopLeft.velocity(\"stop\").css({ top: \"50%\", left: \"50%\", opacity: 0 });\n\n    this.els.$squareTopRight.velocity(\"stop\").css({ top: \"50%\", right: \"50%\", opacity: 0 });\n\n    this.els.$squareBottomLeft.velocity(\"stop\").css({ bottom: \"50%\", left: \"50%\", opacity: 0 });\n\n    this.els.$squareBottomRight.velocity(\"stop\").css({ bottom: \"50%\", right: \"50%\", opacity: 0 });\n\n    this.els.$name.velocity(\"stop\").css({ opacity: 0, top: -90 });\n\n    this.els.$country.velocity(\"stop\").css({ opacity: 0, top: 50 });\n\n    this.els.$icon.velocity(\"stop\").css({ top: -150, opacity: 0 });\n\n    this.els.$button.velocity(\"stop\").css({ opacity: 0, top: 50 });\n\n    this.els.$bordersTopBottom.velocity(\"stop\").css(\"width\", 0);\n\n    this.els.$bordersLeftRight.velocity(\"stop\").css(\"height\", 0);\n\n    this.els.$background.velocity(\"stop\").velocity({ scale: 1.2 }, 0);\n\n    this.els.$svgs.each(function () {\n      jQuery(\"path\", this).each(function () {\n        var $path = jQuery(this);\n        var data = $path.attr(\"data-length\");\n\n        var length = undefined;\n        if (data) {\n          length = parseFloat(data);\n        } else {\n          length = $path[0].getTotalLength();\n          $path.attr(\"data-length\", length);\n        }\n\n        $path.velocity(\"stop\").velocity({\n          \"stroke-dashoffset\": length,\n          \"stroke-dasharray\": \"\" + length + \",\" + length,\n          fillOpacity: 0,\n          strokeOpacity: 1\n        }, 0);\n      });\n    });\n  },\n\n  render: function render() {\n    var data = _.extend(this.model.toJSON(), { language: this.language });\n    Backbone.BetterView.prototype.render.call(this, data);\n    return this;\n  },\n\n  setBackground: function setBackground() {\n    this.els.$background.css(\"background-image\", \"url(\" + this.model.get(\"background\") + \")\");\n  },\n\n  onLoad: function onLoad() {\n    this.loaded = true;\n    // this.els.$background.velocity({ opacity: 1 }, { duration: 400 });\n  },\n\n  load: function load() {\n    if (this.loaded) return false;\n    this.setBackground();\n    this.onLoad();\n\n    // this.loader = new Loader([ this.model.get('background')]);\n    // this.loader.load().then(this.onLoad.bind(this));\n  },\n\n  didRender: function didRender() {\n    this.setPosition();\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../modules/Features\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/Features.js\",\"../modules/Loader\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/Loader.js\",\"../partials/button\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/partials/button.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CoverView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.BetterView.extend({\n  className: \"cover\",\n\n  template: \"\\n    <div class=\\\"cover__overlay\\\"></div>\\n    <a href=\\\"#/city/<%= slug %>\\\" class=\\\"cover__link\\\">\\n      <div class=\\\"cover__title\\\">\\n        <h1 class=\\\"cover__name\\\"> <% print(name.toUpperCase()); %> </h1>\\n        <h3 class=\\\"cover__country\\\"> <% print(country.toUpperCase()); %> </h3>\\n      </div>\\n    </a>\\n    <% if (cover) { %>\\n      <div class=\\\"cover__background\\\"\\n        style=\\\"background-image:url(<%= cover %>)\\\"></div>\\n    <% } %>\\n  \",\n\n  events: {\n    mouseover: \"onMouseover\",\n    mouseout: \"onMouseout\"\n  },\n\n  els: {\n    $overlay: \".cover__overlay\",\n    $background: \".cover__background\",\n    $name: \".cover__name\",\n    $country: \".cover__country\"\n  },\n\n  onMouseover: function onMouseover() {\n    this.els.$overlay.velocity(\"stop\").velocity({ opacity: 0.6 }, 400);\n    this.els.$background.velocity(\"stop\").velocity({ scale: 1.1 }, 400);\n    this.els.$name.velocity(\"stop\").velocity({ opacity: 1, top: 0 }, 300);\n    this.els.$country.velocity(\"stop\").velocity({ opacity: 1, top: 0 }, 200);\n  },\n\n  onMouseout: function onMouseout() {\n    this.els.$overlay.velocity(\"stop\").velocity({ opacity: 0 }, 400);\n    this.els.$background.velocity(\"stop\").velocity({ scale: 1 }, 400);\n    this.els.$name.velocity(\"stop\").velocity({ opacity: 0, top: -30 }, 300);\n    this.els.$country.velocity(\"stop\").velocity({ opacity: 0, top: 30 }, 200);\n  },\n\n  \"in\": function _in(delay) {\n    var _this = this;\n    return new Promise(function (resolve, reject) {\n      _this.$el.velocity({ rotateX: 90, opacity: 0 }, 0).velocity({ rotateX: 0, opacity: 1 }, {\n        duration: 500,\n        delay: delay || 0,\n        complete: resolve,\n        easing: \"ease-out\"\n      });\n    });\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/FrameView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.BetterView.extend({\n  template: \"\\n    <div class=\\\"frame\\\">\\n      <a class=\\\"frame__bar frame__bar--top\\\" data-direction=\\\"north\\\">\\n        <div class=\\\"frame__text frame__text--horizontal\\\">\\n          <span class=\\\"frame__letter\\\"> N </span>\\n        </div>\\n        <div class=\\\"frame__arrow frame__arrow--top\\\">\\n          <div class=\\\"frame__arrow__container frame__arrow__container--top\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 50\\\">\\n              <path fill=\\\"#ffffff\\\" d=\\\"M20,50L10 40 0 50 0 0 20 0 z\\\"/>\\n            </svg>\\n          </div>\\n        </div>\\n        <div class=\\\"frame__part frame__part--left\\\"></div>\\n        <div class=\\\"frame__part frame__part--right\\\"></div>\\n      </a>\\n\\n      <a class=\\\"frame__bar frame__bar--right\\\" data-direction=\\\"east\\\">\\n        <div class=\\\"frame__text frame__text--vertical\\\">\\n          <div class=\\\"frame__letters frame__letters--vertical\\\">\\n            <span class=\\\"frame__letter frame__letter--vertical\\\"> E </span>\\n          </div>\\n        </div>\\n        <div class=\\\"frame__arrow frame__arrow--right\\\">\\n          <div class=\\\"frame__arrow__container frame__arrow__container--right\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 50 20\\\">\\n              <path fill=\\\"#ffffff\\\" d=\\\"M0,0L10 10 0 20 50 20 50 0 z\\\"/>\\n            </svg>\\n          </div>\\n        </div>\\n        <div class=\\\"frame__part frame__part--top\\\"></div>\\n        <div class=\\\"frame__part frame__part--bottom\\\"></div>\\n      </a>\\n\\n      <a class=\\\"frame__bar frame__bar--bottom\\\" data-direction=\\\"south\\\">\\n        <div class=\\\"frame__text frame__text--horizontal\\\">\\n          <span class=\\\"frame__letter\\\"> S </span>\\n        </div>\\n        <div class=\\\"frame__arrow frame__arrow--bottom\\\">\\n          <div class=\\\"frame__arrow__container frame__arrow__container--bottom\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 50\\\">\\n              <path fill=\\\"#ffffff\\\" d=\\\"M20,0L10 10 0 0 0 50 20 50 z\\\"/>\\n            </svg>\\n          </div>\\n        </div>\\n        <div class=\\\"frame__part frame__part--left\\\"></div>\\n        <div class=\\\"frame__part frame__part--right\\\"></div>\\n      </a>\\n\\n      <a class=\\\"frame__bar frame__bar--left\\\" data-direction=\\\"west\\\">\\n        <div class=\\\"frame__text frame__text--vertical\\\">\\n          <div class=\\\"frame__letters frame__letters--vertical\\\">\\n            <span class=\\\"frame__letter frame__letter--vertical\\\"> W </span>\\n          </div>\\n        </div>\\n        <div class=\\\"frame__arrow frame__arrow--left\\\">\\n          <div class=\\\"frame__arrow__container frame__arrow__container--left\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 50 20\\\">\\n              <path fill=\\\"#ffffff\\\" d=\\\"M50,20L40 10 50 0 0 0 0 20 z\\\"/>\\n            </svg>\\n          </div>\\n        </div>\\n        <div class=\\\"frame__part frame__part--top\\\"></div>\\n        <div class=\\\"frame__part frame__part--bottom\\\"></div>\\n      </a>\\n    </div>\\n  \",\n\n  events: {\n    \"mouseover .frame__bar\": \"onMouseover\",\n    \"mouseout .frame__bar\": \"onMouseout\"\n  },\n\n  els: {\n    $barTop: \".frame__bar--top\",\n    $barLeft: \".frame__bar--left\",\n    $barBottom: \".frame__bar--bottom\",\n    $barRight: \".frame__bar--right\"\n  },\n\n  didInitialize: function didInitialize(options) {\n    _.extend(this, _.pick(options, \"language\"));\n    this.listenTo(this.model, \"change\", this.onChange);\n  },\n\n  onMouseover: function onMouseover(e) {\n    var $el = jQuery(e.currentTarget);\n    var direction = $el.attr(\"data-direction\");\n    if (direction) this.trigger(\"mouseover\", direction);\n  },\n\n  onMouseout: function onMouseout() {\n    this.trigger(\"mouseout\");\n  },\n\n  onChange: function onChange() {\n    var _this = this;\n    [\"top\", \"right\", \"bottom\", \"left\"].forEach(function (position) {\n      var $el = _this.$(\".frame__bar--\" + position);\n      var direction = $el.attr(\"data-direction\");\n\n      if (_this.model.has(direction)) {\n        var href = _this.language ? \"#city/\" + _this.model.get(direction) + \"/\" + _this.language : \"#city/\" + _this.model.get(direction);\n\n        $el.attr(\"href\", href).removeClass(\"is-inactive\");\n      } else {\n        $el.attr(\"href\", null).addClass(\"is-inactive\");\n      }\n    });\n  },\n\n  onUpdate: function onUpdate(directions) {\n    this.model.set(directions);\n  },\n\n  disable: function disable() {\n    if (this.previousValues) return false;\n\n    this.previousValues = this.model.toJSON();\n    this.model.set({ north: undefined, east: undefined, south: undefined, west: undefined });\n  },\n\n  enable: function enable() {\n    if (!this.previousValues) return false;\n\n    this.model.set(this.previousValues);\n    this.previousValues = null;\n  },\n\n  \"in\": function _in() {\n    this.els.$barTop.css(\"top\", -40).velocity({ top: 0 }, { duration: 800 });\n\n    this.els.$barBottom.css(\"bottom\", -40).velocity({ bottom: 0 }, { duration: 800 });\n\n    this.els.$barLeft.css(\"left\", -40).velocity({ left: 0 }, { duration: 800 });\n\n    this.els.$barRight.css(\"right\", -40).velocity({ right: 0 }, { duration: 800 });\n  },\n\n  out: function out() {\n    this.els.$barTop.velocity(\"stop\").velocity({ top: -40 }, { duration: 800 });\n\n    this.els.$barBottom.velocity(\"stop\").velocity({ bottom: -40 }, { duration: 800 });\n\n    this.els.$barLeft.velocity(\"stop\").velocity({ left: -40 }, { duration: 800 });\n\n    this.els.$barRight.velocity(\"stop\").velocity({ right: -40 }, { duration: 800 });\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/HowtoView.js\":[function(require,module,exports){\n(function (global){\n/* jshint curly: false */\n\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar buttonPartial = require(\"../partials/button\").buttonPartial;\nvar buttonAnimation = require(\"../partials/button\").buttonAnimation;\nmodule.exports = Backbone.PageView.extend({\n  name: \"howto\",\n  className: \"howto\",\n\n  template: \"\\n    <div class='howto__content'>\\n      <h2 class='howto__title'> POUR VOYAGER ENTRE CHAQUE PAYS </h2>\\n      <div class='howto__columns'>\\n        <div class='howto__column'>\\n          <div class='howto__keys__wrapper'>\\n            <div class='howto__keys'>\\n              <div class='howto__key--top'>\\n                <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 50 50\\\">\\n                  <path fill=\\\"none\\\" stroke=\\\"#FFFFFF\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-miterlimit=\\\"10\\\" d=\\\"   M48,46.032C48,47.119,47.114,48,46.021,48H3.979C2.886,48,2,47.119,2,46.032V3.968C2,2.881,2.886,2,3.979,2h42.043   C47.114,2,48,2.881,48,3.968V46.032z\\\"/>\\n                  <polyline fill=\\\"none\\\" stroke=\\\"#FFFFFF\\\" stroke-width=\\\"1\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-miterlimit=\\\"10\\\" points=\\\"   12.882,31.027 25,18.973 37.118,31.027  \\\"/>\\n                </svg>\\n              </div>\\n              <div class='howto__key--right'>\\n                <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 50 50\\\">\\n                  <path fill=\\\"none\\\" stroke=\\\"#FFFFFF\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-miterlimit=\\\"10\\\" d=\\\"   M48,46.032C48,47.119,47.114,48,46.021,48H3.979C2.886,48,2,47.119,2,46.032V3.968C2,2.881,2.886,2,3.979,2h42.043   C47.114,2,48,2.881,48,3.968V46.032z\\\"/>\\n                  <polyline fill=\\\"none\\\" stroke=\\\"#FFFFFF\\\" stroke-width=\\\"1\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-miterlimit=\\\"10\\\" points=\\\"   18.973,12.882 31.027,25 18.973,37.118  \\\"/>\\n                </svg>\\n              </div>\\n              <div class='howto__key--bottom'>\\n                <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 50 50\\\">\\n                  <path fill=\\\"none\\\" stroke=\\\"#FFFFFF\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-miterlimit=\\\"10\\\" d=\\\"   M48,46.032C48,47.119,47.114,48,46.021,48H3.979C2.886,48,2,47.119,2,46.032V3.968C2,2.881,2.886,2,3.979,2h42.043   C47.114,2,48,2.881,48,3.968V46.032z\\\"/>\\n                  <polyline fill=\\\"none\\\" stroke=\\\"#FFFFFF\\\" stroke-width=\\\"1\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-miterlimit=\\\"10\\\" points=\\\"   37.118,18.973 25,31.027 12.882,18.973  \\\"/>\\n                </svg>\\n              </div>\\n              <div class='howto__key--left'>\\n                <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 50 50\\\">\\n                  <path fill=\\\"none\\\" stroke=\\\"#FFFFFF\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-miterlimit=\\\"10\\\" d=\\\"   M48,46.032C48,47.119,47.114,48,46.021,48H3.979C2.886,48,2,47.119,2,46.032V3.968C2,2.881,2.886,2,3.979,2h42.043   C47.114,2,48,2.881,48,3.968V46.032z\\\"/>\\n                  <polyline fill=\\\"none\\\" stroke=\\\"#FFFFFF\\\" stroke-width=\\\"1\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-miterlimit=\\\"10\\\" points=\\\"   31.027,37.118 18.973,25 31.027,12.882  \\\"/>\\n                </svg>\\n              </div>\\n            </div>\\n          </div>\\n          <div class='howto__text'>\\n            <p> DIRIGEZ VOUS GRÃ‚CE AUX FLÃŠCHES DE VOTRE CLAVIER </p>\\n          </div>\\n          <div class='howto__text'>\\n            <p> TO DIRECT YOURSELF USE THE KEYBOARD ARROWS </p>\\n          </div>\\n        </div>\\n        <div class='howto__column howto__column--middle'>\\n          <div class='howto__text'> <p> OU </p> </div>\\n          <div class='howto__text'> <p> OR </p> </div>\\n        </div>\\n        <div class='howto__column'>\\n          <div class='howto__directions__wrapper'>\\n            <div class='howto__directions'>\\n              <div class='howto__directions__mouse'>\\n                <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 15 20\\\">\\n                  <path fill=\\\"#0a0a0a\\\" stroke=\\\"#ffffff\\\" stroke-width=\\\"1\\\" d=\\\"M0.742,0.082L0.742 17.12 5.495 12.966 9.33 19.918 11.411 18.794 8.4 11.979 14.258 11.135 z\\\"/>\\n                </svg>\\n              </div>\\n              <div class='howto__directions__frame'>\\n                <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 180 110\\\">\\n                  <rect x=\\\"4\\\" y=\\\"1.5\\\" fill=\\\"none\\\" stroke=\\\"#ffffff\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"10\\\" width=\\\"172\\\" height=\\\"107\\\"/>\\n                  <path fill=\\\"#ffffff\\\" d=\\\"M91.019,91.492c-0.116-0.784-0.371-1.568-0.976-1.568c-0.668,0-0.933,0.815-0.933,1.712c0,0.864,0.116,1.137,1.229,2.146    c0.87,0.784,1.464,1.44,1.464,3.089c0,1.681-0.594,3.01-1.781,3.01c-1.252,0-1.708-1.249-1.813-2.945l0.71-0.145    c0.096,1.185,0.266,2.081,1.124,2.081c0.615,0,1.05-0.624,1.05-1.905c0-1.408-0.604-1.889-1.336-2.528    c-0.816-0.721-1.357-1.232-1.357-2.802c0-1.44,0.637-2.721,1.644-2.721c0.997,0,1.485,1.072,1.665,2.417L91.019,91.492z\\\"/>\\n                  <path fill=\\\"#ffffff\\\" d=\\\"M88.155,8.261h0.891l2.101,8.98l0.021-0.032l-0.031-2.385V8.261h0.71v10.677h-0.891l-2.1-8.996l-0.021,0.032l0.032,2.417    v6.547h-0.711V8.261z\\\"/>\\n                  <path fill=\\\"#ffffff\\\" d=\\\"M161.943,48.66h3.446v0.961h-2.736v3.521h2.26v0.96h-2.26v4.274h2.736v0.96h-3.446V48.66z\\\"/>\\n                  <path fill=\\\"#ffffff\\\" d=\\\"M18.749,48.66l-0.711,10.885H17.73l-1.177-6.45h-0.021l-1.177,6.45h-0.308L14.337,48.66l0.711-0.208l0.339,8.02h0.021    l1.028-5.618h0.212l1.029,5.618h0.021l0.34-8.02L18.749,48.66z\\\"/>\\n                </svg>\\n              </div>\\n            </div>\\n          </div>\\n          <div class='howto__text'>\\n            <p> UTILISEZ VOTRE SOURIS POUR CLIQUER SUR LES DIRRECTIONS </p>\\n          </div>\\n          <div class='howto__text'>\\n            <p> USE YOUR MOUSE TO CLICK ON THE DIFFERENT DIRECTIONS </p>\\n          </div>\\n        </div>\\n      </div>\\n      <div class='howto__buttons'>\\n        \" + buttonPartial({\n    className: \"howto__button--fr\",\n    link: \"#city\",\n    text: \"COMMENCER\"\n  }) + \"\\n        \" + buttonPartial({\n    className: \"howto__button--en\",\n    link: \"#city/en\",\n    text: \"LET'S GO\"\n  }) + \"\\n      </div>\\n    </div>\\n    <div class='howto__background'></div>\\n  \",\n\n  els: {\n    $background: \".howto__background\",\n    $title: \".howto__title\",\n    $columns: \".howto__column\",\n    $keys: \".howto__key--top, .howto__key--right, .howto__key--bottom, .howto__key--left\",\n    $mouse: \".howto__directions__mouse\",\n    $buttonFr: \".howto__button--fr\",\n    $buttonEn: \".howto__button--en\"\n  },\n\n  willRemove: function willRemove() {\n    this.stopIdleAnimations();\n  },\n\n  startIdleAnimations: function startIdleAnimations() {\n    var _this = this;\n    if (this.idlePlaying) return false;\n\n    this.idlePlaying = true;\n\n    // keys\n    var totalKeys = this.els.$keys.length;\n    var currentKey = 0;\n\n    var nextKey = function () {\n      if (!_this.idlePlaying) return false;\n\n      currentKey++;\n      if (currentKey >= totalKeys) currentKey = 0;\n\n      jQuery(_this.els.$keys[currentKey]).velocity({ opacity: 1 }, { duration: 300, delay: 300 }).velocity({ opacity: 0.2 }, { duration: 300, delay: 200, complete: nextKey });\n    };\n\n    nextKey();\n\n    // mouse\n    var directions = {\n      0: { top: \"54%\", left: \"13%\" }, // left\n      1: { top: \"20%\", left: \"54%\" }, // top\n      2: { top: \"90%\", left: \"54%\" }, // bottom\n      3: { top: \"54%\", left: \"94%\" } // right\n    };\n\n    var currentDirection = 0;\n\n    var nextDirection = function () {\n      if (!_this.idlePlaying) return false;\n\n      currentDirection++;\n      if (currentDirection >= 4) currentDirection = 0;\n      _this.els.$mouse.velocity(directions[currentDirection], { duration: 700, delay: 500, complete: nextDirection });\n    };\n\n    nextDirection();\n  },\n\n  stopIdleAnimations: function stopIdleAnimations() {\n    this.idlePlaying = false;\n  },\n\n  \"in\": function _in() {\n    this.els.$background.velocity({ opacity: 0.4 }, 2000);\n\n    this.els.$title.velocity({ opacity: 0, translateY: \"-50px\" }, 0).velocity({ opacity: 1, translateY: 0 }, { duration: 500, delay: 1000 });\n\n    this.els.$columns.each(function (i) {\n      var $column = jQuery(this);\n\n      var baseDelay = i * 300;\n\n      $column.velocity({ opacity: 0, translateY: \"50px\" }, 0).velocity({ opacity: 1, translateY: 0 }, { duration: 500, delay: baseDelay + 1000 });\n\n      $column.find(\".howto__text\").each(function () {\n        var $text = jQuery(this);\n\n        $text.each(function (j) {\n          jQuery(this).velocity({ opacity: 0, translateY: \"50px\" }, 0).velocity({ opacity: 1, translateY: 0 }, { duration: 500, delay: baseDelay + (j + 1) * 300 + 1000 });\n        });\n      });\n    });\n\n    buttonAnimation(this.els.$buttonFr, { delay: 1400 });\n    buttonAnimation(this.els.$buttonEn, { delay: 1500 });\n\n    this.startIdleAnimations();\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../partials/button\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/partials/button.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/InfosView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.PageView.extend({\n  name: \"infos\",\n  className: \"infos\",\n\n  template: \"\\n    <div class=\\\"infos__wrapper\\\">\\n      <div class=\\\"infos__dummy\\\"></div>\\n      <div class=\\\"infos__container\\\">\\n        <div class=\\\"infos__centerer\\\"></div>\\n        <div class=\\\"infos__content\\\">\\n          <a class=\\\"infos__icon infos__icon--close\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 50 50\\\">\\n              <line stroke=\\\"#000000\\\" stroke-width=\\\"2\\\" x1=\\\"13.3\\\" y1=\\\"36.7\\\" x2=\\\"36.7\\\" y2=\\\"13.3\\\"/>\\n              <line stroke=\\\"#000000\\\" stroke-width=\\\"2\\\" x1=\\\"13.3\\\" y1=\\\"13.3\\\" x2=\\\"36.7\\\" y2=\\\"36.7\\\"/>\\n            </svg>\\n          </a>\\n          <div class=\\\"infos__content__container\\\">\\n            <div class=\\\"scrollbar\\\"><div class=\\\"track\\\"><div class=\\\"thumb\\\"><div class=\\\"end\\\"></div></div></div></div>\\n            <div class=\\\"viewport\\\">\\n              <div class=\\\"overview\\\">\\n                \" + jQuery(\"#infosContent\").html() + \"\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  \",\n\n  events: {\n    \"click .infos__icon--close\": \"onCloseClick\"\n  },\n\n  els: {\n    $scrollBar: \".infos__content__container\"\n  },\n\n  willRemove: function willRemove() {\n    jQuery(window).off(\"resize\", this.onResize);\n  },\n\n  onResize: function onResize(e) {\n    this.scrollbar.update();\n  },\n\n  onCloseClick: function onCloseClick(e) {\n    this.trigger(\"close\");\n  },\n\n  \"in\": function _in() {\n    this.$el.velocity({ translateY: 200, opacity: 0 }, 0).velocity({ translateY: 0, opacity: 1 }, 500);\n  },\n\n  out: function out(done) {\n    var _this = this;\n    setTimeout(done, 200);\n    return new Promise(function (resolve, reject) {\n      _this.$el.velocity({ translateY: -200, opacity: 0 }, { duration: 500, complete: resolve });\n    });\n  },\n\n  didRender: function didRender() {\n    this.els.$scrollBar.tinyscrollbar();\n    this.scrollbar = this.els.$scrollBar.data(\"plugin_tinyscrollbar\");\n\n    jQuery(window).on(\"resize\", this.onResize.bind(this));\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/LoaderView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.PageView.extend({\n  name: \"loader\",\n\n  out: function out() {\n    this.$el.velocity(\"stop\").velocity({ opacity: 0 }, { duration: 2000, complete: this.remove.bind(this) });\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/LocalView.js\":[function(require,module,exports){\n(function (global){\n/* jshint curly: false */\n\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar skrollr = _interopRequire((typeof window !== \"undefined\" ? window.skrollr : typeof global !== \"undefined\" ? global.skrollr : null));\n\nvar Store = _interopRequire(require(\"../modules/StoreModule\"));\n\nvar Loader = _interopRequire(require(\"../modules/Loader\"));\n\nvar ResponsiveVideo = require(\"./VideoView\").ResponsiveVideo;\nmodule.exports = Backbone.PageView.extend({\n  name: \"local\",\n  className: \"local\",\n\n  template: \"\\n    <% if (video) { %>\\n      <div class=\\\"local__video\\\">\\n        <div class='local__video__overlay'>\\n          <% if (video.markers) _.each(video.markers, function (marker) { %>\\n            <div class='local__marker'\\n              style='left:<%= marker.position.x || 0 %>;top:<%= marker.position.y || 0 %>'>\\n              <% if (marker.text) { %>\\n                <a class=\\\"local__marker__link\\\" data-time='<%= marker.time || 0 %>'>\\n                  <% if (_.isString(marker.text)) { %>\\n                    <%= marker.text.toUpperCase() %>\\n                  <% } else { %>\\n                    <% if (language === 'en') { %>\\n                      <%= marker.text.en.toUpperCase() %>\\n                    <% } else { %>\\n                      <%= marker.text.fr.toUpperCase() %>\\n                    <% } %>\\n                  <% } %>\\n                </a>\\n              <% } %>\\n              <div class=\\\"local__marker__icon\\\">\\n                <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 30 48\\\">\\n                  <path stroke='none'\\n                    fill='#fff'\\n                    d='M15,0C6.7,0,0,7.4,0,16.6c0,2.9,0.7,5.6,1.8,7.9c0,0.2,11.7,22.6,11.7,22.6c0.3,0.6,0.8,0.9,1.4,0.9c0.6,0,1.1-0.4,1.4-0.9  c0,0,11.7-22.4,11.7-22.6c1.2-2.4,1.8-5.1,1.8-7.9C30,7.4,23.3,0,15,0 M15,23.2c-4.1,0-7.5-3.3-7.5-7.4s3.4-7.4,7.5-7.4  c4.1,0,7.5,3.3,7.5,7.4C22.5,19.9,19.1,23.2,15,23.2'/>\\n                </svg>\\n              </div>\\n            </div>\\n          <% }); %>\\n        </div>\\n      </div>\\n    <% } %>\\n    \\n    <div class='local__content'  id='skrollr-body'></div>\\n    <% if (language === 'en') { %>\\n      <a href='#city/<%= citySlug %>/en' class='local__next' style='background-image:url(<%= cityBackground %>);'></a>\\n    <% } else { %>\\n      <a href='#city/<%= citySlug %>' class='local__next' style='background-image:url(<%= cityBackground %>);'></a>\\n    <% } %>\\n  \",\n\n  blocksTemplates: {\n    1: _.template(\"\\n      <div class='local__block local__block--type1'>\\n        <img class='local__image' src='<%= urls[0] %>'>\\n      </div>\\n    \"),\n\n    2: _.template(\"\\n      <div class='local__block local__block--type2'>\\n        <div class='local__column local__column--half local__column--left'>\\n          <div class='local__column__content'>\\n            <img class='local__image' src='<%= urls[0] %>'\\n              data-bottom-top='left:-100%;opacity:0;'\\n              data-center-center='left:0%;opacity:1;top:0px;'\\n              data-top-bottom='top:50px;'\\n              >\\n          </div>\\n        </div>\\n        <div class='local__column local__column--half local__column--right'>\\n          <div class='local__column__content'>\\n            <img class='local__image' src='<%= urls[1] %>'\\n              data-bottom-top='left:100%;opacity:0;;'\\n              data-center-center='left:0%;opacity:1;top:0px'\\n              data-top-bottom='top:-20px;'\\n              >\\n          </div>\\n        </div>\\n      </div>\\n    \"),\n\n    3: _.template(\"\\n      <div class='local__block local__block--type3'>\\n        <div class='local__column local__column--mask'>\\n          <img class='local__image' src='<%= urls[0] %>'\\n            data-bottom-top='transform:scale(1.5);'\\n            data-center-bottom='transform:scale(1);'\\n            >\\n        </div>\\n      </div>\\n    \"),\n\n    4: _.template(\"\\n      <div class='local__block local__block--type4'>\\n        <img class='local__image' src='<%= urls[0] %>'\\n          data-bottom-top='left:-100%;opacity:0;'\\n          data-center-center='left:0;opacity:1;'\\n          >\\n      </div>\\n    \"),\n\n    5: _.template(\"\\n      <div class='local__block local__block--type5'>\\n        <img class='local__image' src='<%= urls[0] %>'\\n          data-bottom-top='left:100%;opacity:0;'\\n          data-center-center='left:0;opacity:1;'\\n          >\\n      </div>\\n    \"),\n\n    6: _.template(\"\\n      <div class='local__block local__block--type6'>\\n        <img class='local__image' src='<%= urls[0] %>'\\n          data-bottom-top='top:300px;opacity:0;'\\n          data-center-center='top:0px;opacity:1;'\\n          >\\n      </div>\\n    \") },\n\n  events: {\n    \"click .local__marker__link\": \"onMarkerClick\"\n  },\n\n  didInitialize: function didInitialize(options) {\n    _.extend(this, _.pick(options, \"language\"));\n\n    this.$win = jQuery(window); // keep track of the scrollTop to restore it on out\n    this.$win.on(\"scroll\", this.onScroll.bind(this));\n\n    this.city = Store.getCities().findWhere({ localSlug: this.model.get(\"slug\") });\n    if (this.model.has(\"video\")) {\n      this.video = new ResponsiveVideo({ videoId: this.model.get(\"video\").id, autoplay: 0 });\n      this.listenTo(this.video, \"ready\", this.markersIn);\n    }\n  },\n\n  willRemove: function willRemove() {\n    if (this.video) this.video.remove();\n    this.$win.off(\"scroll\", this.onScroll);\n    skrollr.init().destroy();\n  },\n\n  \"in\": function _in() {\n    if (!this.loaded) return false;\n    this.$el.velocity({ opacity: 1 }, 1500);\n  },\n\n  out: function out(done) {\n    var _this = this;\n    jQuery(\"html,body\").scrollTop(this.scrollTop);\n\n    return new Promise(function (resolve, reject) {\n      setTimeout(done, 400);\n      _this.$el.velocity(\"stop\").velocity({ opacity: 0 }, { duration: 800, complete: function () {\n          resolve();\n        } });\n    });\n  },\n\n  onScroll: function onScroll(e) {\n    this.scrollTop = this.$win.scrollTop();\n  },\n\n  onLoad: function onLoad() {\n    var _this2 = this;\n    this.loaded = true;\n    setImmediate(function () {\n      _this2.skrollr = skrollr.init({ forceHeight: false });\n    });\n    this[\"in\"]();\n  },\n\n  renderBlocks: function renderBlocks() {\n    var _this3 = this;\n    return this.model.get(\"images\").reduce(function (out, image) {\n      return out += _this3.blocksTemplates[image.type](image);\n    }, \"\");\n  },\n\n  render: function render() {\n    var data = _.extend(this.model.toJSON(), {\n      language: this.language,\n      citySlug: this.city.get(\"slug\"),\n      cityBackground: this.city.get(\"background\")\n    });\n\n    this.$el.html(this.template(data));\n    this.$(\".local__content\").html(this.renderBlocks());\n    setImmediate(this.didRender.bind(this));\n    return this;\n  },\n\n  onMarkerClick: function onMarkerClick(e) {\n    if (!this.video) return false;\n\n    var time = jQuery(e.currentTarget).attr(\"data-time\") || 0;\n    this.video.goTo(time);\n  },\n\n  markersIn: function markersIn() {\n    this.$(\".local__marker\").each(function (i, el) {\n      jQuery(el).velocity({ translateY: 50, opacity: 0 }, 0).velocity({ translateY: 0, opacity: 1 }, { duration: 500, delay: i * 200 + 600 });\n    });\n  },\n\n  didRender: function didRender() {\n    var images = this.model.get(\"images\").reduce(function (out, image) {\n      return out.concat(image.urls || []);\n    }, []);\n\n    this.loaded = false;\n    this.loader = new Loader(images);\n    this.loader.load().then(this.onLoad.bind(this));\n\n    if (this.video) {\n      this.append(this.video, \".local__video\");\n    }\n  } });\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../modules/Loader\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/Loader.js\",\"../modules/StoreModule\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/StoreModule.js\",\"./VideoView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/VideoView.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/LocalsView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar CoverView = _interopRequire(require(\"./CoverView\"));\n\nmodule.exports = Backbone.PageView.extend({\n  name: \"locals\",\n  className: \"locals\",\n\n  template: \"\\n    <div class=\\\"locals__wrapper\\\">\\n      <div class=\\\"locals__dummy\\\"></div>\\n      <div class=\\\"locals__container\\\">\\n        <div class=\\\"locals__centerer\\\"></div>\\n        <div class=\\\"locals__content\\\">\\n          <a class=\\\"locals__icon locals__icon--close\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 50 50\\\">\\n              <line stroke=\\\"#000000\\\" stroke-width=\\\"2\\\" x1=\\\"13.3\\\" y1=\\\"36.7\\\" x2=\\\"36.7\\\" y2=\\\"13.3\\\"/>\\n              <line stroke=\\\"#000000\\\" stroke-width=\\\"2\\\" x1=\\\"13.3\\\" y1=\\\"13.3\\\" x2=\\\"36.7\\\" y2=\\\"36.7\\\"/>\\n            </svg>\\n          </a>\\n          <div class=\\\"locals__frame\\\">\\n            <div class=\\\"locals__bar locals__bar--top\\\"></div>\\n            <div class=\\\"locals__bar locals__bar--right\\\"></div>\\n            <div class=\\\"locals__bar locals__bar--bottom\\\"></div>\\n            <div class=\\\"locals__bar locals__bar--left\\\"></div>\\n          </div>\\n          <div class=\\\"locals__content__container\\\"></div>\\n        </div>\\n      </div>\\n    </div>\\n  \",\n\n  events: {\n    \"click .locals__icon--close\": \"onCloseClick\"\n  },\n\n  els: {\n    $barsTopBottom: \".locals__bar--top, .locals__bar--bottom\",\n    $barsLeftRight: \".locals__bar--left, .locals__bar--right\",\n    $icon: \".locals__icon--close\"\n  },\n\n  onCloseClick: function onCloseClick(e) {\n    this.trigger(\"close\");\n  },\n\n  didInitialize: function didInitialize() {\n    this.covers = this.collection.map(function (city) {\n      return new CoverView({ model: city });\n    });\n  },\n\n  willRemove: function willRemove() {\n    this.covers.forEach(function (cover) {\n      return cover.remove();\n    });\n  },\n\n  \"in\": function _in() {\n    this.$el.velocity({ translateY: 200, opacity: 0 }, 0).velocity({ translateY: 0, opacity: 1 }, 500);\n\n    this.els.$barsLeftRight.css(\"height\", 0).velocity({ height: \"100%\" }, { duration: 1000 });\n\n    this.els.$barsTopBottom.css(\"width\", 0).velocity({ width: \"100%\" }, { duration: 1000, delay: 500 });\n\n    this.els.$icon.velocity({ translateY: 50, opacity: 0 }, 0).velocity({ translateY: 0, opacity: 1 }, { duration: 600, delay: 800 });\n\n    this.covers.forEach(function (cover, i) {\n      cover[\"in\"](i * 200 + 400);\n    });\n  },\n\n  out: function out(done) {\n    var _this = this;\n    setTimeout(done, 200);\n    return new Promise(function (resolve, reject) {\n      _this.$el.velocity({ translateY: -200, opacity: 0 }, {\n        duration: 500,\n        complete: resolve\n      });\n    });\n  },\n\n  didRender: function didRender() {\n    this.append(this.covers, \".locals__content__container\");\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./CoverView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CoverView.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/MapView.js\":[function(require,module,exports){\n(function (global){\n/* jshint curly: false */\n\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.PageView.extend({\n  name: \"map\",\n  className: \"map\",\n\n  template: \"\\n    <div class=\\\"map__wrapper\\\">\\n      <div class=\\\"map__dummy\\\"></div>\\n      <div class=\\\"map__container\\\">\\n        <div class=\\\"map__centerer\\\"></div>\\n        <div class=\\\"map__content\\\">\\n          <a class=\\\"map__icon map__icon--close\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 50 50\\\">\\n              <line stroke=\\\"#000000\\\" stroke-width=\\\"2\\\" x1=\\\"13.3\\\" y1=\\\"36.7\\\" x2=\\\"36.7\\\" y2=\\\"13.3\\\"/>\\n              <line stroke=\\\"#000000\\\" stroke-width=\\\"2\\\" x1=\\\"13.3\\\" y1=\\\"13.3\\\" x2=\\\"36.7\\\" y2=\\\"36.7\\\"/>\\n            </svg>\\n          </a>\\n          <div class=\\\"map__content__container\\\"></div>\\n        </div>\\n      </div>\\n    </div>\\n  \",\n\n  events: {\n    \"click .map__icon--close\": \"onCloseClick\"\n  },\n\n  didInitialize: function didInitialize(options) {\n    _.extend(this, _.pick(options, \"activeCity\"));\n  },\n\n  onCloseClick: function onCloseClick(e) {\n    this.trigger(\"close\");\n  },\n\n  didRender: function didRender() {\n    var _this = this;\n    jQuery.getScript(\"https://www.google.com/jsapi\", function () {\n      window.google.load(\"maps\", \"3\", { other_params: \"sensor=false\", callback: _this.buildMap.bind(_this) });\n    });\n  },\n\n  buildMap: function buildMap() {\n    var _this2 = this;\n    var map = new window.google.maps.Map(this.$(\".map__content__container\")[0], { zoom: 4 });\n\n    var geocoder = new window.google.maps.Geocoder();\n    var markerBounds = new window.google.maps.LatLngBounds();\n\n    var icon = new window.google.maps.MarkerImage(\"./app/public/images/map-marker.png\", null, null, null, new window.google.maps.Size(22, 35));\n\n    this.collection.each(function (city, i) {\n      var name = city.get(\"name\");\n      var country = city.get(\"country\");\n      var slug = city.get(\"slug\");\n\n      var animation = slug === _this2.activeCity ? window.google.maps.Animation.BOUNCE : window.google.maps.Animation.DROP;\n\n      geocoder.geocode({ address: \"\" + name + \", \" + country }, function (results, status) {\n        var coords = results[0].geometry.location;\n\n        if (!coords) return false;\n\n        markerBounds.extend(coords);\n        map.fitBounds(markerBounds);\n\n        setTimeout(function () {\n          var marker = new window.google.maps.Marker({\n            map: map,\n            icon: icon,\n            animation: animation,\n            position: coords,\n            title: name\n          });\n\n          window.google.maps.event.addListener(marker, \"click\", function () {\n            _this2.trigger(\"marker:click\", slug);\n          });\n        }, i * 300);\n      });\n    });\n  },\n\n  \"in\": function _in() {\n    this.$el.velocity({ translateY: 200, opacity: 0 }, 0).velocity({ translateY: 0, opacity: 1 }, 500);\n  },\n\n  out: function out(done) {\n    var _this3 = this;\n    setTimeout(done, 200);\n    return new Promise(function (resolve, reject) {\n      _this3.$el.velocity({ translateY: -200, opacity: 0 }, {\n        duration: 500,\n        complete: resolve\n      });\n    });\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/MenuView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.BetterView.extend({\n  template: \"\\n    <div class=\\\"menu\\\">\\n      <a class=\\\"menu__button menu__button--bottomRight\\\" data-button=\\\"locals\\\">\\n        <div class=\\\"menu__icon menu__icon--locals\\\">\\n          <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n            <path d=\\\"M35.9,32C34.5,28.2,32,27.3,30,27c-1.7-0.3-3.7-0.9-4.4-1.3c0-0.3,0-1,0-2.1c0,0,0.1-0.1,0.1-0.1l0,0c1-1.3,1.4-2.5,1.7-3.4  c0.6-0.4,1.3-1.3,1.7-3c0.2-1,0.4-2.2-0.3-3.1c0,0,0,0,0-0.1c0.6-6.2-3.3-9.3-5.6-10.1l0,0l0,0c-0.9-0.3-1.7-0.4-2.5-0.4  c-0.2,0-0.4,0-0.5,0c-0.2,0-0.3,0-0.5,0c-0.8,0-1.6,0.1-2.5,0.4l0,0l0,0c-2.3,0.8-6.3,3.9-5.6,10.1c0,0,0,0,0,0.1  c-0.7,0.9-0.5,2.1-0.3,3.1c0.4,1.7,1.1,2.5,1.7,3c0.2,0.8,0.7,2,1.6,3.3v0c0,0,0,0,0,0c0.1,0.1,0.1,0.1,0.2,0.2  c0.1,1.1,0.1,1.7,0,2.1c-0.7,0.4-2.8,1-4.4,1.3c-2,0.4-4.4,1.2-5.9,5.1c-0.2,0.7-0.2,1.4,0.2,1.9c1.5,2.2,9.4,2.6,15.7,2.6  s14.2-0.5,15.7-2.6C36.1,33.4,36.2,32.7,35.9,32z M14,18.9c-0.2,0-1-0.1-1.5-2.2c-0.4-1.6,0-1.9,0.3-1.9c0.1,0,0.2,0.1,0.2,0.1  c-1.4-7.5,4.4-9.5,4.4-9.5c0.8-0.2,1.5-0.3,2-0.3c0.2,0,0.4,0,0.5,0c0.2,0,0.3,0,0.5,0c0.6,0,1.2,0.1,2,0.3c0,0,5.8,2,4.4,9.5  c0,0,0.1-0.1,0.2-0.1c0.3,0,0.7,0.3,0.3,1.9c-0.5,2.1-1.3,2.2-1.5,2.2c0,0,0,0,0,0s-0.1,2-1.9,4.1c0,0,0,0,0,0.1  c-1.4,1.4-2.8,2.1-4.3,2.1c-1.8-0.1-3.2-1.3-3.9-2c0,0,0,0,0,0C14.1,20.9,14,18.9,14,18.9C14,18.9,14,18.9,14,18.9z M20,35  c-7.5,0-15-0.8-14.4-2.4c1.2-3.2,3.1-3.8,4.7-4.1c1.5-0.3,5.3-1.2,5.6-2.1c0.1-0.3,0.1-0.8,0.1-1.3c0.9,0.7,2.2,1.4,3.7,1.4  c0.1,0,0.2,0,0.2,0c1.4,0,2.7-0.5,4-1.5c0,0.6,0,1.1,0.1,1.4c0.3,0.9,4.1,1.8,5.6,2.1c1.5,0.3,3.5,0.9,4.7,4.1  C35,34.2,27.5,35,20,35z\\\"/>\\n          </svg>\\n        </div>\\n      </a>\\n\\n      <a class=\\\"menu__button menu__button--topRight\\\" data-button=\\\"map\\\">\\n        <div class=\\\"menu__icon menu__icon--map\\\">\\n          <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n            <path fill=\\\"none\\\"\\n              stroke-width=\\\"2\\\"\\n              stroke-linecap=\\\"round\\\"\\n              stroke-linejoin=\\\"round\\\"\\n              d=\\\"M35.2,30.3L26.4 34.6 14.4 28.4 4.8 33.2 4.8 10.1 14.4 5.4 26.4 11.6 35.2 7.2 z\\\"/>\\n            <line stroke-width=\\\"2\\\" stroke-width=\\\"1\\\" x1=\\\"14.4\\\" y1=\\\"5.4\\\" x2=\\\"14.4\\\" y2=\\\"28.4\\\"/>\\n            <line stroke-width=\\\"2\\\" stroke-width=\\\"1\\\" x1=\\\"26.4\\\" y1=\\\"11.6\\\" x2=\\\"26.4\\\" y2=\\\"34.6\\\"/>\\n          </svg>\\n        </div>\\n      </a>\\n\\n      <a class=\\\"menu__button menu__button--bottomLeft\\\" data-button=\\\"share\\\">\\n        <div class=\\\"menu__expandable\\\">\\n          <div class=\\\"menu__icon menu__icon--pinterest\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n              <path d=\\\"M20.5,8.4c-5.7,0-8.5,4.5-8.5,8.3c0,2.3,0.8,4.3,2.4,5.1c0.3,0.1,0.5,0,0.6-0.3c0.1-0.2,0.2-0.8,0.2-1.1  c0.1-0.3,0-0.5-0.2-0.7c-0.5-0.6-0.8-1.5-0.8-2.6c0-3.4,2.3-6.4,5.9-6.4c3.2,0,5,2.2,5,5.1c0,3.8-1.5,7.1-3.8,7.1  c-1.2,0-2.2-1.2-1.9-2.6c0.4-1.7,1.1-3.5,1.1-4.7c0-1.1-0.5-2-1.6-2c-1.3,0-2.3,1.5-2.3,3.5c0,1.3,0.4,2.1,0.4,2.1s-1.3,6.2-1.5,7.3  c-0.5,2.2-0.1,4.8,0,5.1c0,0.2,0.2,0.2,0.3,0.1c0.1-0.2,1.6-2.3,2.2-4.4c0.1-0.6,0.8-3.7,0.8-3.7c0.4,0.9,1.6,1.7,2.9,1.7  c3.8,0,6.4-3.9,6.4-9.1C28,12.1,25,8.4,20.5,8.4z\\\"/>\\n            </svg>\\n          </div>\\n          <div class=\\\"menu__icon menu__icon--twitter\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n              <path d=\\\"M9.6,27c0.3,0,0.7,0.1,1,0.1c2,0,3.8-0.6,5.4-1.9c-0.9,0-1.8-0.3-2.5-0.9s-1.2-1.3-1.5-2.2c0.2,0,0.5,0.1,0.8,0.1  c0.4,0,0.8-0.1,1.1-0.2c-1-0.2-1.8-0.7-2.5-1.6c-0.7-0.8-1-1.8-1-2.9v-0.1c0.6,0.4,1.3,0.5,2,0.6c-0.6-0.4-1.1-0.9-1.4-1.6  c-0.4-0.7-0.5-1.4-0.5-2.2c0-0.8,0.2-1.6,0.6-2.3c1.1,1.4,2.4,2.5,3.9,3.4c1.5,0.8,3.2,1.3,5,1.4c-0.1-0.4-0.1-0.7-0.1-1  c0-1.2,0.4-2.3,1.3-3.2c0.8-0.9,1.9-1.3,3-1.3c1.2,0,2.3,0.5,3.1,1.4c1-0.2,1.9-0.6,2.7-1.1c-0.3,1.1-0.9,1.9-1.9,2.5  c0.8-0.1,1.6-0.3,2.5-0.7c-0.5,0.9-1.3,1.7-2.1,2.4v0.6c0,1.2-0.2,2.4-0.5,3.6c-0.3,1.2-0.9,2.4-1.5,3.5c-0.7,1.1-1.5,2.1-2.5,3  s-2.1,1.6-3.4,2.1c-1.3,0.5-2.8,0.8-4.3,0.8C13.7,29,11.5,28.3,9.6,27L9.6,27z\\\"/>\\n            </svg>\\n          </div>\\n          <div class=\\\"menu__icon menu__icon--facebook\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n              <path d=\\\"M14.6,20.7v-3.9h3.1v-1.9c0-1.4,0.5-2.6,1.4-3.6c0.9-1,2-1.5,3.3-1.5h3v3.9h-3c-0.2,0-0.4,0.1-0.5,0.3  c-0.2,0.2-0.2,0.5-0.2,0.8v2h3.8v3.9h-3.8v9.4h-3.8v-9.4L14.6,20.7L14.6,20.7z\\\"/>\\n            </svg>\\n          </div>\\n        </div>\\n        <div class=\\\"menu__icon menu__icon--share\\\">\\n          <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n            <path fill=\\\"none\\\"\\n              stroke-width=\\\"2\\\"\\n              stroke-linecap=\\\"round\\\"\\n              stroke-linejoin=\\\"round\\\"\\n              d=\\\"M17.2,22.9L3.1 17.2 36.9 3.1 22.8 36.9 z\\\"/>\\n            <line stroke-width=\\\"2\\\" x1=\\\"17.2\\\" y1=\\\"22.9\\\" x2=\\\"36.9\\\" y2=\\\"3.1\\\"/>\\n          </svg>\\n        </div>\\n      </a>\\n\\n      <a class=\\\"menu__button menu__button--topLeft\\\" data-button=\\\"infos\\\">\\n        <div class=\\\"menu__icon menu__icon--infos\\\">\\n          <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n            <rect x=\\\"18.5\\\" y=\\\"16.1\\\" width=\\\"3\\\" height=\\\"15.2\\\"/>\\n            <circle cx=\\\"20\\\" cy=\\\"10.8\\\" r=\\\"2.2\\\"/>\\n          </svg>\\n        </div>\\n      </a>\\n    </div>\\n  \",\n\n  events: {\n    \"click a\": \"onClick\",\n    \"mouseenter .menu__button--bottomLeft\": \"onShareOver\",\n    \"mouseleave .menu__button--bottomLeft\": \"onShareOut\"\n  },\n\n  els: {\n    $buttons: \".menu__button\",\n    $expandable: \".menu__expandable\",\n    $icon: \".menu__icon--share\"\n  },\n\n  didInitialize: function didInitialize() {\n    this.expandableHeight = this.iconHeight = null;\n  },\n\n  onClick: function onClick(e) {\n    var $el = jQuery(e.currentTarget);\n    var button = $el.attr(\"data-button\");\n    if (button) this.trigger(\"click\", button);\n  },\n\n  setActive: function setActive(name) {\n    this.els.$buttons.removeClass(\"is-active\");\n    this.els.$buttons.each(function (i, el) {\n      var $el = jQuery(el);\n      if ($el.attr(\"data-button\") === name) {\n        $el.addClass(\"is-active\");\n      }\n    });\n  },\n\n  removeActive: function removeActive() {\n    this.els.$buttons.removeClass(\"is-active\");\n  },\n\n  onShareOver: function onShareOver(e) {\n    if (!this.expandableHeight) {\n      this.expandableHeight = this.els.$expandable.css(\"height\", \"auto\").height();\n      this.els.$expandable.css(\"height\", 0);\n    }\n\n    if (!this.iconHeight) this.iconHeight = this.els.$icon.outerHeight();\n\n    this.els.$expandable.velocity(\"stop\").velocity({ height: this.expandableHeight }, 300);\n\n    this.els.$icon.velocity(\"stop\").velocity({ marginBottom: -this.iconHeight }, 400);\n  },\n\n  onShareOut: function onShareOut(e) {\n    this.els.$expandable.velocity(\"stop\").velocity({ height: 0 }, 300);\n\n    this.els.$icon.velocity(\"stop\").velocity({ marginBottom: 0 }, 400);\n  },\n\n  \"in\": function _in() {\n    this.$(\"a\").each(function (i) {\n      jQuery(this).css({ opacity: 0, marginTop: 50 }).velocity({ opacity: 1, marginTop: 0 }, { duration: 800, delay: i * 300 });\n    });\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/VideoView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar buttonPartial = require(\"../partials/button\").buttonPartial;\nvar buttonAnimation = require(\"../partials/button\").buttonAnimation;\nvar ResponsiveVideo = exports.ResponsiveVideo = Backbone.BetterView.extend({\n  className: \"video\",\n\n  template: \"\\n    <div class='video__controls'>\\n      <div class='video__playPause is-paused'>\\n        <div class='video__icon--play'>\\n          <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n            <path fill=\\\"#ffffff\\\" d=\\\"M31,19.411L9 31 9 9 31 19.411 z\\\"/>\\n          </svg>\\n        </div>\\n        <div class='video__icon--pause'>\\n          <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n            <rect fill=\\\"#ffffff\\\" x=\\\"12\\\" y=\\\"10\\\" width=\\\"6\\\" height=\\\"20\\\"/>\\n            <rect fill=\\\"#ffffff\\\" x=\\\"23\\\" y=\\\"10\\\" width=\\\"6\\\" height=\\\"20\\\"/>\\n          </svg>\\n        </div>\\n      </div>\\n      <div class='video__time'> 0:00 / 0:00 </div>\\n      <div class='video__muteUnmute'>\\n        <div class='video__icon--unmute'>\\n          <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n            <path fill=\\\"#ffffff\\\" d=\\\"M19.498,10.795L13.051 16.371 6.949 16.371 6.949 23.549 12.959 23.549 19.498 29.205 z\\\"/>\\n            <path fill=\\\"none\\\" stroke=\\\"#ffffff\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" d=\\\"M22.783,24.049   c0.725-1.164,1.15-2.533,1.15-4.004c0-1.496-0.438-2.885-1.184-4.061\\\"/>\\n            <path fill=\\\"none\\\" stroke=\\\"#ffffff\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" d=\\\"M26.396,13.34   c1.389,1.873,2.211,4.193,2.211,6.705c0,2.488-0.809,4.787-2.176,6.652\\\"/>\\n            <path fill=\\\"none\\\" stroke=\\\"#ffffff\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" d=\\\"   M29.887,29.152c1.98-2.506,3.164-5.668,3.164-9.107c0-3.465-1.199-6.646-3.201-9.158\\\"/>\\n          </svg>\\n        </div>\\n        <div class='video__icon--mute'>\\n          <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n            <path fill=\\\"#ffffff\\\" d=\\\"M19.498,10.795L13.051 16.371 6.949 16.371 6.949 23.549 12.959 23.549 19.498 29.205 z\\\"/>\\n          </svg>\\n        </div>\\n      </div>\\n      <div class='video__volume'>\\n        <div class='video__volume__slider'></div>\\n      </div>\\n      <div class='video__bar'>\\n        <div class='video__progress'></div>\\n        <div class='video__buffer'></div>\\n      </div>\\n    </div>\\n    <div id='video__player'></div>\\n  \",\n\n  els: {\n    $playPauseButton: \".video__playPause\",\n    $muteUnmuteButton: \".video__muteUnmute\",\n    $volume: \".video__volume\",\n    $volumeSlider: \".video__volume__slider\",\n    $bar: \".video__bar\",\n    $progress: \".video__progress\",\n    $buffer: \".video__buffer\",\n    $time: \".video__time\"\n  },\n\n  events: {\n    \"click .video__playPause\": \"onPlayPauseClick\",\n    \"click .video__muteUnmute\": \"onMuteUnmuteClick\",\n    \"click .video__bar\": \"onBarClick\",\n    \"click .video__volume\": \"onVolumeClick\",\n    \"mousedown .video__volume\": \"onEnterVolume\",\n    \"mouseup .video__volume\": \"onLeaveVolume\",\n    \"mouseleave .video__volume\": \"onLeaveVolume\",\n    \"mousemove .video__volume\": \"onDragVolume\"\n  },\n\n  didInitialize: function didInitialize(options) {\n    _.extend(this, _.pick(options, \"videoId\", \"autoplay\"));\n  },\n\n  willRemove: function willRemove() {\n    this.player.removeEventListener(\"onReady\", this.onVideoReady);\n    this.player.removeEventListener(\"onStateChange\", this.onVideoStateChange);\n    this.player.destroy();\n  },\n\n  convertTime: function convertTime(time) {\n    var date = new Date(time * 1000);\n    var minutes = date.getMinutes();\n    var seconds = date.getSeconds();\n    if (seconds < 10) seconds = \"0\" + seconds;\n    return \"\" + minutes + \":\" + seconds;\n  },\n\n  onEnterVolume: function onEnterVolume(e) {\n    this.mouseOnVolume = true;\n  },\n\n  onLeaveVolume: function onLeaveVolume(e) {\n    this.mouseOnVolume = false;\n  },\n\n  onDragVolume: function onDragVolume(e) {\n    if (!this.mouseOnVolume || this.player.isMuted()) return false;\n\n    var ratio = (e.pageX - this.els.$volume.offset().left) / this.els.$volume.width();\n    var percent = Math.round(ratio * 100);\n\n    this.player.setVolume(percent);\n    this.els.$volumeSlider.css(\"width\", \"\" + percent + \"%\");\n  },\n\n  onPlayPauseClick: function onPlayPauseClick() {\n    var state = this.player.getPlayerState();\n\n    if (state === window.YT.PlayerState.PLAYING) {\n      this.player.pauseVideo();\n      this.els.$playPauseButton.addClass(\"is-paused\");\n    } else {\n      this.player.playVideo();\n      this.els.$playPauseButton.removeClass(\"is-paused\");\n    }\n  },\n\n  onMuteUnmuteClick: function onMuteUnmuteClick() {\n    if (this.player.isMuted()) {\n      this.player.unMute();\n      this.els.$muteUnmuteButton.removeClass(\"is-muted\");\n      this.els.$volume.removeClass(\"is-muted\");\n    } else {\n      this.player.mute();\n      this.els.$muteUnmuteButton.addClass(\"is-muted\");\n      this.els.$volume.addClass(\"is-muted\");\n    }\n  },\n\n  onBarClick: function onBarClick(e) {\n    var ratio = (e.pageX - this.els.$bar.offset().left) / this.els.$bar.width();\n    var percent = ratio * 100;\n\n    this.player.seekTo(this.duration * ratio, true);\n    this.els.$progress.velocity(\"stop\").velocity({ width: \"\" + percent + \"%\" }, 300);\n  },\n\n  onVolumeClick: function onVolumeClick(e) {\n    if (this.player.isMuted()) return false;\n\n    var ratio = (e.pageX - this.els.$volume.offset().left) / this.els.$volume.width();\n    var percent = ratio * 100;\n\n    this.player.setVolume(percent);\n    this.els.$volumeSlider.velocity(\"stop\").velocity({ width: \"\" + percent + \"%\" }, 300);\n  },\n\n  onVideoReady: function onVideoReady(e) {\n    this.trigger(\"ready\");\n    this.$el.velocity({ translateY: 50, opacity: 0 }, 0).velocity({ translateY: 0, opacity: 1 }, { duration: 800, delay: 100 });\n  },\n\n  onVideoProgress: function onVideoProgress() {\n    var played = this.player.getCurrentTime() * 100 / this.duration;\n    var loaded = this.player.getVideoLoadedFraction() * 100;\n\n    this.els.$progress.css(\"width\", \"\" + played + \"%\");\n    this.els.$buffer.css(\"width\", \"\" + loaded + \"%\");\n    this.els.$time.html(\"\" + this.convertTime(played) + \" / \" + this.convertTime(this.duration));\n  },\n\n  onVideoStateChange: function onVideoStateChange(e) {\n    if (e.data === window.YT.PlayerState.PLAYING) {\n      if (!this.duration) this.duration = this.player.getDuration();\n      this.interval = window.setInterval(this.onVideoProgress.bind(this), 500);\n      this.els.$playPauseButton.removeClass(\"is-paused\");\n    } else if (e.data === window.YT.PlayerState.PAUSED) {\n      this.els.$playPauseButton.addClass(\"is-paused\");\n      if (this.interval) {\n        window.clearInterval(this.interval);\n        this.interval = null;\n      }\n    } else {\n      if (this.interval) {\n        window.clearInterval(this.interval);\n        this.interval = null;\n      }\n    }\n  },\n\n  onYoutubeReady: function onYoutubeReady() {\n    this.player = new window.YT.Player(\"video__player\", {\n      videoId: this.videoId,\n      width: \"100%\",\n      height: \"auto\",\n      playerVars: { enablejsapi: 1, autoplay: this.autoplay, controls: 0, rel: 0, showinfo: 0 }\n    });\n\n    this.player.addEventListener(\"onReady\", this.onVideoReady.bind(this));\n    this.player.addEventListener(\"onStateChange\", this.onVideoStateChange.bind(this));\n  },\n\n  didRender: function didRender() {\n    if (typeof window.YT == \"undefined\" || typeof window.YT.Player == \"undefined\") {\n      window.onYouTubeIframeAPIReady = this.onYoutubeReady.bind(this);\n      jQuery.getScript(\"//www.youtube.com/iframe_api\");\n    } else {\n      this.onYoutubeReady();\n    }\n  },\n\n  goTo: function goTo(time) {\n    var percent = time * 100 / this.duration;\n\n    this.player.seekTo(time, true);\n    this.els.$progress.velocity(\"stop\").velocity({ width: \"\" + percent + \"%\" }, 300);\n  }\n});\n\nvar FullscreenVideo = exports.FullscreenVideo = Backbone.BetterView.extend({\n  className: \"video--fullscreen\",\n\n  template: \"\\n    \" + buttonPartial({\n    link: \"#city\",\n    className: \"video__skip\",\n    text: \"SKIP\"\n  }) + \"\\n    \" + buttonPartial({\n    className: \"video__mute\",\n    text: \"MUTE\"\n  }) + \"\\n    <a class='video__skip'> SKIP </div>\\n    <div id='video__player'></div>\\n  \",\n\n  els: {\n    $buttonSkip: \".video__skip\",\n    $buttonMute: \".video__mute\"\n  },\n\n  events: {\n    \"click .video__mute\": \"onButtonMuteClick\"\n  },\n\n  didInitialize: function didInitialize(options) {\n    _.extend(this, _.pick(options, \"videoId\", \"autoplay\", \"ratio\", \"markers\"));\n  },\n\n  willRemove: function willRemove() {\n    this.$win.off(\"resize\", this.onWindowResize);\n    this.player.removeEventListener(\"onReady\", this.onVideoReady);\n    this.player.removeEventListener(\"onStateChange\", this.onVideoStateChange);\n    this.player.destroy();\n  },\n\n  onButtonMuteClick: function onButtonMuteClick(e) {\n    if (this.player.isMuted()) {\n      this.player.unMute();\n      this.els.$buttonMute.find(\".button__link\").html(\"MUTE\");\n    } else {\n      this.player.mute();\n      this.els.$buttonMute.find(\".button__link\").html(\"UNMUTE\");\n    }\n  },\n\n  onWindowResize: function onWindowResize(e) {\n    var width = this.$win.width();\n    var height = this.$win.height();\n\n    var ratio = width / height;\n\n    if (ratio < this.ratio) {\n      var playerWidth = Math.ceil(height * this.ratio);\n      this.$player.css({\n        width: playerWidth,\n        height: height,\n        left: (width - playerWidth) / 2,\n        top: 0\n      });\n    } else {\n      var playerHeight = Math.ceil(width * this.ratio);\n      this.$player.css({\n        width: width,\n        height: playerHeight,\n        left: 0,\n        top: (height - playerHeight) / 2\n      });\n    }\n  },\n\n  onVideoProgress: function onVideoProgress(e) {\n    if (!this.markers) return false;\n\n    var time = this.player.getCurrentTime();\n\n    for (var i = 0, j = this.markers.length; i < j; ++i) {\n      var marker = this.markers[i];\n      if (!marker) continue;\n      if (time > marker.time) {\n        marker.fn();\n        this.markers.splice(i--, 1);\n      }\n    }\n  },\n\n  onVideoStateChange: function onVideoStateChange(e) {\n    if (e.data === window.YT.PlayerState.PLAYING) {\n      this.interval = window.setInterval(this.onVideoProgress.bind(this), 500);\n    } else {\n      if (this.interval) {\n        window.clearInterval(this.interval);\n        this.interval = null;\n      }\n    }\n  },\n\n  onVideoReady: function onVideoReady(e) {\n    this.$player = this.$(\"#video__player\");\n    this.onWindowResize();\n\n    buttonAnimation(this.els.$buttonSkip, { delay: 600 });\n    buttonAnimation(this.els.$buttonMute, { delay: 700 });\n    this.$el.velocity({ translateY: 50, opacity: 0 }, 0).velocity({ translateY: 0, opacity: 1 }, { duration: 800, delay: 100 });\n  },\n\n  onYoutubeReady: function onYoutubeReady() {\n    this.$win = jQuery(window);\n    this.player = new window.YT.Player(\"video__player\", {\n      videoId: this.videoId,\n      width: \"100%\",\n      height: \"100%\",\n      playerVars: { enablejsapi: 1, autoplay: this.autoplay, controls: 0, rel: 0, showinfo: 0 }\n    });\n\n    this.player.addEventListener(\"onReady\", this.onVideoReady.bind(this));\n    this.player.addEventListener(\"onStateChange\", this.onVideoStateChange.bind(this));\n    this.$win.on(\"resize\", _.debounce(this.onWindowResize.bind(this), 50));\n  },\n\n  didRender: function didRender() {\n    if (typeof window.YT == \"undefined\" || typeof window.YT.Player == \"undefined\") {\n      window.onYouTubeIframeAPIReady = this.onYoutubeReady.bind(this);\n      jQuery.getScript(\"//www.youtube.com/iframe_api\");\n    } else {\n      this.onYoutubeReady();\n    }\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../partials/button\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/partials/button.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/WelcomeView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar HowtoView = _interopRequire(require(\"./HowtoView\"));\n\nvar buttonPartial = require(\"../partials/button\").buttonPartial;\nvar buttonAnimation = require(\"../partials/button\").buttonAnimation;\nvar FullscreenVideo = require(\"./VideoView\").FullscreenVideo;\nmodule.exports = Backbone.ContentView.extend({\n  name: \"welcome\",\n  className: \"welcome\",\n  content: \".welcome__overlay\",\n\n  template: \"\\n    <div class='welcome__overlay'></div>\\n    <div class='welcome__logo'>\\n      <div class=\\\"welcome__logo__part--eyes\\\">\\n        <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 350 350\\\">\\n          <path fill=\\\"#ffffff\\\" d=\\\"M170.711,47.193c0-16.047-14.476-29.064-32.29-29.064c-5.614,0-10.874,1.291-15.471,3.545   c-0.343,0.068-44.112,22.746-44.112,22.746c-1.086,0.57-1.768,1.631-1.768,2.773c0,1.15,0.682,2.195,1.768,2.77   c0,0,43.77,22.678,44.102,22.746c4.6,2.264,9.867,3.547,15.481,3.547C156.235,76.26,170.711,63.238,170.711,47.193 M125.358,47.193   c0-8.016,6.493-14.512,14.509-14.512c8.029,0,14.519,6.496,14.519,14.512c0,8.02-6.489,14.516-14.519,14.516   C131.852,61.709,125.358,55.205,125.358,47.193\\\"/>\\n          <path fill=\\\"#ffffff\\\" d=\\\"M176.195,46.623c0,15.615,14.057,28.268,31.406,28.268c5.445,0,10.564-1.252,15.023-3.447   c0.348-0.072,42.902-22.131,42.902-22.131c1.061-0.547,1.73-1.578,1.73-2.689c0-1.113-0.67-2.133-1.73-2.695   c0,0-42.554-22.055-42.886-22.121c-4.475-2.199-9.598-3.449-15.039-3.449C190.25,18.357,176.195,31.012,176.195,46.623    M220.29,46.623c0,7.791-6.321,14.107-14.119,14.107c-7.788,0-14.104-6.316-14.104-14.107c0-7.799,6.316-14.111,14.104-14.111   C213.969,32.512,220.29,38.822,220.29,46.623\\\"/>\\n        </svg>\\n      </div>\\n      <div class=\\\"welcome__logo__part--firstLine\\\">\\n        <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 350 350\\\">\\n          <path fill=\\\"#ffffff\\\" d=\\\"M57.839,209.961c-12.034-0.104-24.062,0.213-36.098,0.225c-0.44-45.725,0.002-91.5,0.71-137.217   c0.094-5.957-9.136-5.945-9.229,0c-0.731,47.256-1.2,94.578-0.682,141.838c0.028,2.527,2.08,4.598,4.615,4.615   c13.563,0.09,27.12-0.354,40.684-0.23C63.792,219.25,63.788,210.02,57.839,209.961z\\\"/>\\n          <path fill=\\\"#ffffff\\\" d=\\\"M128.055,143.332c-1.467-14.496-13.062-40.309-32.65-32.73c-19.783,7.662-19.412,42.539-19.751,58.896   c0.354,16.195,2.644,33.123,14.173,45.33c6.213,6.58,19.268,7.465,25.541,0.469C131.229,197.609,130.319,165.752,128.055,143.332z    M118.801,178.768c-0.769,10.088-2.842,24.646-11.541,31.166c-17.764,13.32-22.271-35.568-22.377-40.439   c0.318-15.156-0.209-37.1,11.539-48.836c10.566-10.557,20.694,13.43,22.086,20.551   C120.826,153.111,119.713,166.732,118.801,178.768z\\\"/>\\n          <path fill=\\\"#ffffff\\\" d=\\\"M188.086,201.658c-27.802,27.314-28.904-31.4-28.41-44.357c0.512-13.459,4.992-45.27,25.172-36.105   c5.38,2.441,10.07-5.51,4.658-7.973c-61.18-27.793-47.691,146.84,5.106,94.965C198.863,204.008,192.333,197.49,188.086,201.658z\\\"/>\\n          <path fill=\\\"#ffffff\\\" d=\\\"M265.634,213.852c-5.908-33.953-12.603-67.771-19.587-101.52c-0.941-4.531-7.816-4.301-8.895,0   c-5.65,22.445-10.805,45.207-15.341,68.029c-0.317,0.764-0.494,1.59-0.494,2.43c-2.056,10.471-4.017,20.947-5.757,31.418   c-0.967,5.822,7.924,8.311,8.896,2.451c1.559-9.373,3.299-18.748,5.121-28.119c7.352,0.047,14.705-0.076,22.059-0.107   c1.73,9.283,3.482,18.564,5.102,27.869C257.754,222.162,266.652,219.672,265.634,213.852z M231.812,177.17   c2.902-14.217,6.055-28.393,9.404-42.486c2.861,14.115,5.645,28.248,8.342,42.396C243.643,177.127,237.727,177.182,231.812,177.17z   \\\"/>\\n          <path fill=\\\"#ffffff\\\" d=\\\"M333.216,208.742c-11.68,0.043-23.354,0.213-35.031,0.094c-0.641-44.672,1.18-89.363-0.23-134.021   c-0.188-5.938-9.418-5.955-9.23,0c1.465,46.189-0.564,92.42,0.281,138.623c0.047,2.549,2.066,4.568,4.615,4.615   c13.199,0.24,26.393-0.029,39.596-0.08C339.167,217.947,339.167,208.717,333.216,208.742z\\\"/>\\n        </svg>\\n      </div>\\n      <div class=\\\"welcome__logo__part--secondLine\\\">\\n        <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 350 350\\\">\\n          <path fill=\\\"#ffffff\\\" d=\\\"M163.937,240.445c-6.097,11.02-11.481,22.42-17.36,33.557c-6.542-10.607-12.96-21.287-19.051-32.168   c-2.906-5.186-10.881-0.533-7.969,4.662c7.117,12.705,14.627,25.158,22.328,37.518c-4.54,14.051-9.395,28-13.592,42.158   c-1.697,5.723,7.211,8.148,8.898,2.455c4.395-14.82,9.514-29.412,14.226-44.133c7.173-12.947,13.327-26.439,20.487-39.387   C174.785,239.898,166.817,235.238,163.937,240.445z\\\"/>\\n          <path fill=\\\"#ffffff\\\" d=\\\"M224.506,321.619c-9.387,0.129-18.768,0.057-28.148,0.004c-0.059-5.773-0.072-11.545-0.108-17.318   c6.37,0.021,12.738-0.031,19.108,0.041c5.957,0.064,5.949-9.166,0-9.23c-6.389-0.068-12.777-0.016-19.166-0.039   c-0.062-15.67-0.025-31.34,0.18-47.008c9.201,0.057,18.402,0.014,27.604,0.053c5.953,0.025,5.949-9.205,0-9.229   c-10.729-0.049-21.456,0.049-32.186-0.072c-2.546-0.033-4.575,2.119-4.615,4.613c-0.422,27.594-0.311,55.189-0.018,82.781   c0.025,2.523,2.076,4.605,4.615,4.615c10.91,0.045,21.819,0.17,32.734,0.02C230.445,330.77,230.457,321.539,224.506,321.619z\\\"/>\\n          <path fill=\\\"#ffffff\\\" d=\\\"M104.757,306.158c-7.348,0.094-14.692,0.043-22.042,0.004c-0.009-4.428-0.023-8.852-0.06-13.279   c5.013,0.025,10.026-0.008,15.038-0.221c5.928-0.252,5.953-9.48,0-9.229c-5.037,0.217-10.075,0.248-15.111,0.219   c-0.098-11.854-0.131-23.713,0.109-35.566c7.213,0.035,14.43,0.008,21.637,0.039c5.952,0.033,5.949-9.197,0-9.23   c-8.723-0.039-17.454,0.045-26.18-0.057c-2.566-0.029-4.543,2.123-4.615,4.615c-0.613,22.432-0.003,44.869-0.028,67.299   c-0.003,2.527,2.105,4.6,4.614,4.615c8.885,0.039,17.758,0.137,26.638,0.021C110.706,315.303,110.713,306.072,104.757,306.158z\\\"/>\\n          <path fill=\\\"#ffffff\\\" d=\\\"M277.358,244.422c-16.284-15.002-37.755-0.133-36.763,19.74c0.418,8.396,6.801,13.922,14.516,15.449   c8.634,1.713,15.917-0.5,19.233,10.283c4.68,15.215-17.478,24.77-24.552,9.373c-2.48-5.4-10.434-0.705-7.967,4.662   c8.682,18.887,39.208,15.545,41.821-5.988c1.236-10.168-2.105-20.279-11.725-24.928c-3.924-1.896-8.732-1.912-12.985-2.203   c-19.125-1.301-3.92-34.436,11.899-19.859C275.2,254.977,281.751,248.467,277.358,244.422\\\"/>\\n        </svg>\\n      </div>\\n    </div>\\n    <div class=\\\"welcome__baseline\\\">\\n      \" + buttonPartial({\n    className: \"welcome__button--baseline\",\n    text: \"WHEN LOCALS ARE TAKING OUR TRAVEL PICTURES\"\n  }) + \"\\n    </div>\\n    <div class='welcome__video'></div>\\n  \",\n\n  els: {\n    $eyes: \".welcome__logo__part--eyes\",\n    $firstLine: \".welcome__logo__part--firstLine\",\n    $secondLine: \".welcome__logo__part--secondLine\",\n    $baseline: \".welcome__baseline\",\n    $buttonBaseline: \".welcome__button--baseline\"\n  },\n\n  didInitialize: function didInitialize(options) {\n    var _this = this;\n    this.video = new FullscreenVideo({\n      videoId: \"dPZxMU876Pw\",\n      autoplay: 1,\n      ratio: 16 / 9,\n      markers: [{ time: 57.5, fn: function () {\n          _this.logoIn();\n        } }, { time: 62, fn: function () {\n          _this.logoOut();\n          var howtoView = new HowtoView();\n          _this.changeContent(howtoView);\n        } }, { time: 70, fn: function () {\n          _this.trigger(\"router:navigate\", \"#city\", { trigger: true });\n        } }]\n    });\n  },\n\n  willRemove: function willRemove() {\n    this.video.remove();\n  },\n\n  logoIn: function logoIn() {\n    this.els.$eyes.velocity(\"stop\").css(\"z-index\", 1).velocity({ opacity: 1, top: 0 }, { duration: 500, delay: 200 });\n\n    this.els.$firstLine.velocity(\"stop\").css(\"z-index\", 1).velocity({ opacity: 1, top: 0 }, { duration: 500 });\n\n    this.els.$secondLine.velocity(\"stop\").css(\"z-index\", 1).velocity({ opacity: 1, top: 0 }, { duration: 700 });\n\n    buttonAnimation(this.els.$buttonBaseline, { delay: 300 });\n  },\n\n  logoOut: function logoOut() {\n    this.els.$eyes.velocity(\"stop\").velocity({ opacity: 0, top: -50 }, { duration: 400 });\n\n    this.els.$firstLine.velocity(\"stop\").velocity({ opacity: 0, top: 100 }, { duration: 600, delay: 100 });\n\n    this.els.$secondLine.velocity(\"stop\").velocity({ opacity: 0, top: 100 }, { duration: 400, delay: 100 });\n\n    this.els.$baseline.velocity(\"stop\").velocity({ opacity: 0 }, { duration: 700 });\n  },\n\n  out: function out(done) {\n    var _this2 = this;\n    return new Promise(function (resolve, reject) {\n      setTimeout(done, 400);\n      _this2.$el.velocity(\"stop\").velocity({ opacity: 0, tween: [0, 1] }, { duration: 1000,\n        // progress: (e, c, r, s, t) => { this.video.volume(t); }, // fadeout sound\n        complete: resolve\n      });\n    });\n  },\n\n  didRender: function didRender() {\n    this.append(this.video, \".welcome__video\");\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../partials/button\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/partials/button.js\",\"./HowtoView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/HowtoView.js\",\"./VideoView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/VideoView.js\"}]},{},[\"./app/src/scripts/main.js\"]);\n"],"sourceRoot":"/source/"}