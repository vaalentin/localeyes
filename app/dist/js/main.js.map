{"version":3,"file":"main.js","names":[],"mappings":"","sources":["main.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"./app/src/scripts/main.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nrequire(\"./extensions/BetterView\");\n\nrequire(\"./extensions/PageView\");\n\nrequire(\"./extensions/ContentView\");\n\nvar AppView = _interopRequire(require(\"./views/AppView\"));\n\njQuery(function () {\n  return new AppView({ el: \"body\" });\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./extensions/BetterView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/BetterView.js\",\"./extensions/ContentView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/ContentView.js\",\"./extensions/PageView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/PageView.js\",\"./views/AppView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/AppView.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/collections/CitiesCollection.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar CityModel = _interopRequire(require(\"../models/CityModel\"));\n\nmodule.exports = Backbone.Collection.extend({\n  model: CityModel\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../models/CityModel\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/CityModel.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/collections/LocalsCollection.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar LocalModel = _interopRequire(require(\"../models/LocalModel\"));\n\nmodule.exports = Backbone.Collection.extend({\n  model: LocalModel\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../models/LocalModel\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/LocalModel.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/BetterView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\n/**\n * Backbone BetterView\n *\n * Improved Backbone view\n * With auto template, helpers and lifecycle\n *\n * Lifecycle:\n * willInitialize: Right before the view is initialized\n * didInitialize: Right after the view is initialized\n * willRender: Right before the view is rendered\n * willRender: Right after the view is rendered\n * cache: Right after the view is rendered, cache DOM\n * willRemove: Right before the view is removed\n * didRemove: Right after the view is removed\n */\nBackbone.BetterView = Backbone.View.extend({\n  initialize: function initialize() {\n    if (this.willInitialize) this.willInitialize.apply(this.arguments);\n\n    this.template = _.template(this.template);\n    Backbone.View.prototype.initialize.apply(this, arguments);\n\n    if (this.didInitialize) this.didInitialize.apply(this, arguments);\n  },\n\n  remove: function remove() {\n    if (this.willRemove) this.willRemove.apply(this, arguments);\n\n    Backbone.View.prototype.remove.apply(this, arguments);\n\n    if (this.didRemove) this.didRemove.apply(this, arguments);\n  },\n\n  /**\n   * Assign a view to el itself or to a specific element\n   *\n   * @method assign\n   * @param {Backbone.View} [view] Single view\n   * @param {String} [selector]\n   */\n  assign: function assign(view, selector) {\n    if (!selector) view.setElement(this.$el.render());else view.setElement(this.$(selector)).render();\n  },\n\n  /**\n   * Unassign the view\n   *\n   * @method unassign\n   */\n  unassign: function unassign() {\n    this.$el.empty().off();\n    this.stopListening();\n    return this;\n  },\n\n  /**\n   * Append one or more views to el itself or to a specific element\n   *\n   * @method append\n   * @param {Backbone.View} [views] Single view or array of views\n   * @param {String} [selector]\n   */\n  append: function append(views, selector) {\n    var _this = this;\n    if (!_.isArray(views)) views = [views];\n\n    if (!selector) views.forEach(function (view) {\n      return _this.$el.append(view.render().el);\n    });else views.forEach(function (view) {\n      return _this.$(selector).append(view.render().el);\n    });\n  },\n\n  /**\n   * Prepend a view to el itself or to a specific element\n   *\n   * @method prepend\n   * @param {Backbone.View} [views] Single view or array of views\n   * @param {String} [selector]\n   */\n  prepend: function prepend(views, selector) {\n    var _this2 = this;\n    if (!_.isArray(views)) views = [views];\n\n    if (!selector) views.forEach(function (view) {\n      return _this2.$el.prepend(view.render().el);\n    });else views.forEach(function (view) {\n      return _this2.$(selector).prepend(view.render().el);\n    });\n  },\n\n  render: function render() {\n    if (this.willRender) this.willRender.apply(this, arguments);\n\n    if (this.model) this.$el.html(this.template(this.model.toJSON()));else this.$el.html(this.template());\n\n    // cache DOM elements\n    if (this.els) {\n      var cache = {};\n      for (var name in this.els) {\n        if (this.els.hasOwnProperty(name)) {\n          cache[name] = this.$(this.els[name]);\n        }\n      }\n      this.els = cache;\n    }\n\n    if (this.didRender) this.didRender.apply(this, arguments);\n\n    return this;\n  } });\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/ContentView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\n/**\n * Backbone ContentView\n *\n * Page with a content area where PageView can be placed\n */\nBackbone.ContentView = Backbone.PageView.extend({\n  /**\n   *  Selector for the content area\n   */\n  content: \"\",\n\n  /**\n   * Get the current active page\n   *\n   * @method getContent\n   * @return {Backbone.PageView}\n   */\n  getContent: function getContent() {\n    return this.currentView || {};\n  },\n\n  /**\n   * Change the content\n   *\n   * @method changeContent\n   * @param {Backbone.PageView} [view] View to add\n   */\n  changeContent: function changeContent(view) {\n    if (this.currentView && this.currentView.name === view.name) return false;\n\n    var next = (function () {\n      this.prepend(view, this.content);\n      this.currentView = view;\n      view[\"in\"]();\n    }).bind(this);\n\n    var previousView = this.currentView || null;\n\n    if (previousView) previousView.out(next).then(function () {\n      return previousView.remove();\n    });else next();\n  },\n\n  /**\n   * Remove the content\n   *\n   * @method removeContent\n   */\n  removeContent: function removeContent() {\n    var _this = this;\n    if (!this.currentView) return false;\n\n    this.currentView.out().then(function () {\n      _this.currentView.remove();\n      _this.currentView = null;\n    });\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/PageView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\n/**\n * Backbone PageView\n *\n * Animated view that can be passed to a ContentView\n */\nBackbone.PageView = Backbone.BetterView.extend({\n  /**\n   * Name of the page\n   */\n  name: undefined,\n\n  /**\n   * Page in animation\n   *\n   * @method in\n   */\n  \"in\": function _in() {\n    this.$el.velocity(\"stop\").velocity({ opacity: 1 }, { duration: 800 });\n  },\n\n  /**\n   * Page out animation\n   *\n   * @method out\n   * @param {Function} [done] Start the in animation of the potential next page.\n   * @return {Promise} Resolve complete the animation, the view is then removed.\n   */\n  out: function out(done) {\n    var _this = this;\n    return new Promise(function (resolve, reject) {\n      setTimeout(done, 400);\n      _this.$el.velocity(\"stop\").velocity({ opacity: 0 }, { duration: 800, complete: function () {\n          resolve();\n        } });\n    });\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/CityModel.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar slug = _interopRequire(require(\"../utils/slugUtil\"));\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    name: \"\",\n    country: \"\",\n    north: undefined,\n    east: undefined,\n    south: undefined,\n    west: undefined,\n    slug: undefined,\n    northSlug: undefined,\n    eastSlug: undefined,\n    southSlug: undefined,\n    westSlug: undefined,\n    local: undefined,\n    localSlug: undefined,\n    background: undefined,\n    cover: undefined,\n    icon: []\n  },\n\n  initialize: function () {\n    var _this = this;\n    var attrs = {};\n\n    if (!this.has(\"slug\")) attrs.slug = slug(this.get(\"name\"));\n\n    if (!this.has(\"localSlug\") && this.has(\"local\")) attrs.localSlug = slug(this.get(\"local\"));\n\n    [\"north\", \"east\", \"south\", \"west\"].forEach(function (direction) {\n      if (_this.has(direction) && !_this.has(\"\" + direction + \"Slug\")) attrs[\"\" + direction + \"Slug\"] = slug(_this.get(direction));\n    });\n\n    this.set(attrs);\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../utils/slugUtil\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/utils/slugUtil.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/FrameModel.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    north: undefined,\n    east: undefined,\n    south: undefined,\n    west: undefined\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/LocalModel.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar slug = _interopRequire(require(\"../utils/slugUtil\"));\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    name: undefined,\n    slug: undefined,\n    images: []\n  },\n\n  initialize: function () {\n    if (!this.has(\"slug\")) this.set({ slug: slug(this.get(\"name\")) });\n  },\n\n  validate: function validate(attrs, options) {\n    if (!attrs.name) return \"Local must have a name.\";\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../utils/slugUtil\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/utils/slugUtil.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/MapModel.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.Model.extend({\n  /**\n   * @param {Object} [options]\n   * @param {Backbone.Collection} [options.collection] CityModel\n   */\n  initialize: function initialize(options) {\n    Backbone.Model.prototype.initialize.call(this);\n    _.extend(this, _.pick(options, \"collection\"));\n    this.build();\n  },\n\n  build: function build() {\n    var _this = this;\n    var map = {};\n\n    var directions = [{ name: \"north\", left: 0, top: -1 }, { name: \"east\", left: 1, top: 0 }, { name: \"south\", left: 0, top: 1 }, { name: \"west\", left: -1, top: 0 }];\n\n    this.collection.each(function (city, i) {\n      var slug = city.get(\"slug\");\n      var position = i === 0 ? { left: 0, top: 0 } : map[slug] ? map[slug].position : undefined;\n\n      directions.forEach(function (direction) {\n        var targetSlug = city.get(\"\" + direction.name + \"Slug\");\n\n        if (targetSlug && !map[targetSlug]) {\n          var targetPosition = _.clone(position);\n          targetPosition.top += direction.top;\n          targetPosition.left += direction.left;\n\n          map[targetSlug] = {};\n          map[targetSlug].position = targetPosition;\n\n          var targetCity = _this.collection.findWhere({ slug: targetSlug });\n          map[targetSlug].directions = {};\n\n          map[targetSlug].directions = {\n            north: targetCity.get(\"northSlug\"),\n            east: targetCity.get(\"eastSlug\"),\n            south: targetCity.get(\"southSlug\"),\n            west: targetCity.get(\"westSlug\")\n          };\n        }\n      });\n    });\n\n    this.set(map);\n  },\n\n  getPosition: function getPosition(slug) {\n    if (this.has(slug)) return this.get(slug).position;\n  },\n  getDirections: function getDirections(slug) {\n    if (this.has(slug)) return this.get(slug).directions;\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/Loader.js\":[function(require,module,exports){\n\"use strict\";\n\nvar _prototypeProperties = function (child, staticProps, instanceProps) {\n  if (staticProps) Object.defineProperties(child, staticProps);\n  if (instanceProps) Object.defineProperties(child.prototype, instanceProps);\n};\n\nvar Loader = (function () {\n  function Loader(srcs) {\n    this.srcs = srcs;\n  }\n\n  _prototypeProperties(Loader, null, {\n    load: {\n      value: function load() {\n        return Promise.all(this.srcs.map(function (src) {\n          return new Promise(function (resolve, reject) {\n            var img = new Image();\n            img.onload = resolve;\n            img.onerror = reject;\n            img.src = src;\n          });\n        }));\n      },\n      writable: true,\n      enumerable: true,\n      configurable: true\n    }\n  });\n\n  return Loader;\n})();\n\nmodule.exports = Loader;\n\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/StoreModule.js\":[function(require,module,exports){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar LocalsCollection = _interopRequire(require(\"../collections/LocalsCollection\"));\n\nvar CitiesCollection = _interopRequire(require(\"../collections/CitiesCollection\"));\n\n/**\n * Data store\n *\n * Currently bootstrap the data,\n * Can easily fetch them over the network, by returning a Promise\n */\nmodule.exports = {\n  locals: new LocalsCollection(window.locals),\n  cities: new CitiesCollection(window.cities),\n\n  getLocals: function getLocals() {\n    return this.locals;\n  },\n\n  getCities: function getCities() {\n    return this.cities;\n  }\n};\n\n},{\"../collections/CitiesCollection\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/collections/CitiesCollection.js\",\"../collections/LocalsCollection\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/collections/LocalsCollection.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/routers/AppRouter.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.Router.extend({\n  routes: {\n    \"\": \"default\",\n    welcome: \"welcome\",\n    \"local/:slug\": \"local\",\n    city: \"city\",\n    \"city/:slug\": \"city\"\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/utils/slugUtil.js\":[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = slug;\n/**\n * Slug a name\n * eg: Los Angeles => los_angeles\n *\n * @function slug\n * @param {String} [string='']\n * @return {String}\n */\nfunction slug() {\n  var string = arguments[0] === undefined ? \"\" : arguments[0];\n  return string.toLowerCase().replace(\" \", \"_\");\n}\n\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/AppView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar AppRouter = _interopRequire(require(\"../routers/AppRouter\"));\n\nvar Store = _interopRequire(require(\"../modules/StoreModule\"));\n\nvar CitiesView = _interopRequire(require(\"../views/CitiesView\"));\n\nvar LocalView = _interopRequire(require(\"../views/LocalView\"));\n\nmodule.exports = Backbone.ContentView.extend({\n  content: \".app__content\",\n\n  template: \"\\n    <div class=\\\"app\\\">\\n      <div class=\\\"app__content\\\"></div>\\n    </div>\\n  \",\n\n  didInitialize: function didInitialize() {\n    this.render();\n  },\n\n  didRender: function didRender() {\n    var _this = this;\n    this.router = new AppRouter();\n    this.citiesView;\n\n    this.router.on(\"route:default\", function () {\n      _this.router.navigate(\"/welcome\", { trigger: true });\n    });\n\n    this.router.on(\"route:welcome\", function () {});\n\n    this.router.on(\"route:city\", function (slug) {\n      if (_this.currentView && _this.currentView.name === \"cities\" && _this.citiesView) {\n        _this.citiesView.changeCity(slug);\n      } else {\n        _this.citiesView = new CitiesView({ collection: Store.getCities(), activeCity: slug });\n        _this.changeContent(_this.citiesView);\n      }\n    });\n\n    this.router.on(\"route:local\", function (slug) {\n      var localModel = Store.getLocals().findWhere({ slug: slug });\n\n      if (localModel) {\n        var localView = new LocalView({ model: localModel });\n        _this.changeContent(localView);\n      }\n    });\n\n    Backbone.on(\"router:navigate\", function (url) {\n      return _this.router.navigate(url);\n    });\n\n    Backbone.history.start();\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../modules/StoreModule\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/StoreModule.js\",\"../routers/AppRouter\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/routers/AppRouter.js\",\"../views/CitiesView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CitiesView.js\",\"../views/LocalView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/LocalView.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CitiesView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar Hammer = _interopRequire((typeof window !== \"undefined\" ? window.Hammer : typeof global !== \"undefined\" ? global.Hammer : null));\n\nvar MapModel = _interopRequire(require(\"../models/MapModel\"));\n\nvar FrameModel = _interopRequire(require(\"../models/FrameModel\"));\n\nvar CityView = _interopRequire(require(\"./CityView\"));\n\nvar MenuView = _interopRequire(require(\"./MenuView\"));\n\nvar FrameView = _interopRequire(require(\"./FrameView\"));\n\nmodule.exports = Backbone.ContentView.extend({\n  name: \"cities\",\n\n  className: \"cities\",\n\n  content: \".cities__overlay\",\n\n  template: \"\\n    <div class=\\\"cities__outerOverlay\\\">\\n      <div class=\\\"cities__overlay\\\"></div>\\n    </div>\\n    <div class=\\\"cities__frame\\\"></div>\\n    <div class=\\\"cities__menu\\\"></div>\\n    <div class=\\\"cities__content\\\"></div>\\n  \",\n\n  els: {\n    $content: \".cities__content\"\n  },\n\n  didInitialize: function didInitialize(options) {\n    var _this = this;\n    _.extend(this, _.pick(options, \"activeCity\"));\n\n    this.map = new MapModel({ collection: this.collection });\n\n    this.menu = new MenuView();\n    this.frame = new FrameView({ model: new FrameModel() });\n    this.cities = this.collection.map(function (city) {\n      return new CityView({ model: city, position: _this.map.getPosition(city.get(\"slug\")) });\n    });\n\n    this.listenTo(this.menu, \"click\", this.onMenuClick);\n    this.listenTo(this.frame, \"mouseover\", this.onFrameOver);\n    this.listenTo(this.frame, \"mouseout\", this.onFrameOut);\n    jQuery(document).on(\"keydown\", this.onKeydown.bind(this));\n\n    this.isSliding = false;\n    this.isOpen = false;\n\n    // touch screen\n    this.hammer = new Hammer.Manager(this.$el[0], { dragLockToAxis: true });\n    this.hammer.add(new Hammer.Pan({ direction: Hammer.DIRECTION_ALL }));\n\n    this.hammer.on(\"panleft panright\", this.onPanHorizontal.bind(this));\n    this.hammer.on(\"panup pandown\", this.onPanVertical.bind(this));\n    this.hammer.on(\"panend\", this.onPanend.bind(this));\n    jQuery(window).on(\"resisze\", this.onResize.bind(this));\n\n    this.dragFactorA;\n    this.dragFactorB;\n    this.translateX;\n    this.translateY;\n    this.width;\n    this.height;\n    this.panY = false;\n    this.panX = false;\n  },\n\n  willRemove: function willRemove() {\n    this.cities.forEach(function (city) {\n      return city.remove();\n    });\n    jQuery(document).off(\"keydown\", this.onKeydown);\n    jQuery(window).off(\"resize\", this.onResize);\n    this.hammer.destroy();\n  },\n\n  onMenuClick: function onMenuClick(e) {\n    console.log(e);\n  },\n\n  onPanHorizontal: function onPanHorizontal(e) {\n    if (this.panY) return false;\n    this.panX = true;\n\n    if (!this.dragFactorA || !this.dragFactorB) {\n      var directions = this.map.getDirections(this.activeCity);\n      this.dragFactorA = directions.west ? 1 : 0.2;\n      this.dragFactorB = directions.east ? 1 : 0.2;\n    }\n\n    if (!this.width || !this.height) this.onResize();\n\n    var factor = e.direction === 2 ? this.dragFactorB : this.dragFactorA;\n    var dragDistance = 100 / this.width * e.deltaX * factor;\n    var dragged = this.translateX + dragDistance;\n\n    this.els.$content.velocity({ translateX: dragged + \"%\" }, 0);\n  },\n\n  onPanVertical: function onPanVertical(e) {\n    if (this.panX) return false;\n    this.panY = true;\n\n    if (!this.dragFactorA || !this.dragFactorB) {\n      var directions = this.map.getDirections(this.activeCity);\n      this.dragFactorA = directions.north ? 1 : 0.2;\n      this.dragFactorB = directions.south ? 1 : 0.2;\n    }\n\n    if (!this.width || !this.height) this.onResize();\n\n    var factor = e.direction === 8 ? this.dragFactorB : this.dragFactorA;\n    var dragDistance = 100 / this.height * e.deltaY * factor;\n    var dragged = this.translateY + dragDistance;\n\n    this.els.$content.velocity({ translateY: dragged + \"%\" }, 0);\n  },\n\n  onPanend: function onPanend(e) {\n    var dragDistance = this.panX ? 100 / this.width * e.deltaX : 100 / this.height * e.deltaY;\n\n    if (Math.abs(dragDistance) < 40) {\n      this.dragFactorA = this.dragFactorB = null;\n      this.panX = this.panY = false;\n      return this.setPosition({ easing: \"ease-out\" });\n    }\n\n    var directions = this.map.getDirections(this.activeCity);\n\n    if (this.panX) {\n      if (dragDistance < 0) {\n        this.changeCity(directions.east, \"ease-out\");\n      } else {\n        this.changeCity(directions.west, \"ease-out\");\n      }\n    } else {\n      if (dragDistance < 0) {\n        this.changeCity(directions.south, \"ease-out\");\n      } else {\n        this.changeCity(directions.north, \"ease-out\");\n      }\n    }\n\n    this.setPosition({ easing: \"ease-out\" });\n\n    this.dragFactorA = this.dragFactorB = null;\n    this.panX = this.panY = false;\n  },\n\n  onFrameOver: function onFrameOver(direction) {\n    if (this.isSliding) return false;\n\n    var position = this.map.getPosition(this.activeCity);\n    var directions = this.map.getDirections(this.activeCity);\n\n    var props;\n\n    if (direction === \"north\" && directions.north) {\n      props = { translateY: -1 * (position.top * 100) + 10 + \"%\" };\n    } else if (direction === \"east\" && directions.east) {\n      props = { translateX: -1 * (position.left * 100) - 10 + \"%\" };\n    } else if (direction === \"south\" && directions.south) {\n      props = { translateY: -1 * (position.top * 100) - 10 + \"%\" };\n    } else if (direction === \"west\" && directions.west) {\n      props = { translateX: -1 * (position.left * 100) + 10 + \"%\" };\n    }\n\n    if (props) {\n      this.isOpen = true;\n      this.els.$content.velocity(\"stop\").velocity(props, { duration: 400 });\n    }\n  },\n\n  onFrameOut: function onFrameOut() {\n    if (this.isSliding || !this.isOpen) return false;\n\n    var position = this.map.getPosition(this.activeCity);\n\n    var props = {\n      translateX: \"\" + -1 * (position.left * 100) + \"%\",\n      translateY: \"\" + -1 * (position.top * 100) + \"%\"\n    };\n\n    this.els.$content.velocity(\"stop\").velocity(props, { duration: 400 });\n  },\n\n  onKeydown: function onKeydown(e) {\n    if (this.isSliding) return;\n\n    var directions = this.map.getDirections(this.activeCity);\n\n    var charcode = e.charcode ? e.charcode : e.keyCode;\n\n    switch (charcode) {\n      case 38:\n        this.changeCity(directions.north);\n        break;\n      case 39:\n        this.changeCity(directions.east);\n        break;\n      case 40:\n        this.changeCity(directions.south);\n        break;\n      case 37:\n        this.changeCity(directions.west);\n        break;\n    }\n  },\n\n  onResize: function onResize(e) {\n    this.width = this.$el.width();\n    this.height = this.$el.height();\n  },\n\n  setCity: function setCity() {\n    var model = this.collection.findWhere({ slug: this.activeCity });\n    var view = _.findWhere(this.cities, { model: model });\n    if (view) view[\"in\"]();\n\n    this.setPosition({ transition: false });\n    this.setDirections();\n  },\n\n  changeCity: function changeCity(slug) {\n    var easing = arguments[1] === undefined ? \"ease-in-out\" : arguments[1];\n    if (!slug || slug === this.activeCity) return false;\n\n    var model = this.collection.findWhere({ slug: slug });\n    var view = _.findWhere(this.cities, { model: model });\n    if (view) view[\"in\"]();\n\n    var previousView;\n\n    if (this.activeCity) {\n      var previousModel = this.collection.findWhere({ slug: this.activeCity });\n      previousView = _.findWhere(this.cities, { model: previousModel });\n    }\n\n    this.activeCity = slug;\n    this.setPosition({\n      transition: true,\n      complete: function () {\n        if (previousView) previousView.out();\n      },\n      easing: easing\n    });\n    this.setDirections();\n  },\n\n  /**\n   * @param {Object} [otpions]\n   * @param {Boolean} [options.transition=true]\n   * @param {Number} [options.duration=800]\n   * @param {Function} [options.easing='ease-in-out']\n   * @param {Function} [options.complete]\n   */\n  setPosition: function setPosition(options) {\n    var _this2 = this;\n    if (this.isSliding) return false;\n\n    var params = _.extend({\n      transition: true,\n      duration: 800,\n      easing: \"ease-in-out\"\n    }, options);\n\n    var position = this.map.getPosition(this.activeCity);\n\n    if (!position) return false;\n\n    var previousTranslateX = this.translateX;\n    var previousTranslateY = this.translateY;\n\n    this.translateX = -1 * (position.left * 100);\n    this.translateY = -1 * (position.top * 100);\n\n    // sequenced?\n    /**\n    if ((previousTranslateX && previousTranslateY)\n      && previousTranslateX !== this.translateX && previousTranslateY !== this.translateY) {\n      console.log('sequence');\n    } else {\n      console.log('no sequence');\n    }\n    */\n\n    var props = {\n      translateX: this.translateX + \"%\",\n      translateY: this.translateY + \"%\"\n    };\n\n    this.isSliding = true;\n\n    this.els.$content.velocity(\"stop\").velocity(props, {\n      duration: params.transition ? params.duration : 0,\n      easing: params.easing,\n      complete: function () {\n        _this2.isSliding = false;\n        if (params.complete) params.complete();\n        Backbone.trigger(\"router:navigate\", \"/city/\" + _this2.activeCity);\n      }\n    });\n  },\n\n  setDirections: function setDirections() {\n    var directions = this.map.getDirections(this.activeCity);\n    this.frame.model.set(directions);\n  },\n\n  didRender: function didRender() {\n    this.append(this.cities, \".cities__content\");\n    this.assign(this.menu, \".cities__menu\");\n    this.assign(this.frame, \".cities__frame\");\n\n    this.setCity();\n    this.menu[\"in\"]();\n    this.frame[\"in\"]();\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../models/FrameModel\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/FrameModel.js\",\"../models/MapModel\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/MapModel.js\",\"./CityView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CityView.js\",\"./FrameView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/FrameView.js\",\"./MenuView\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/MenuView.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CityView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar Loader = _interopRequire(require(\"../modules/Loader\"));\n\nmodule.exports = Backbone.BetterView.extend({\n  className: \"city\",\n\n  template: \"\\n    <div class=\\\"city__content\\\">\\n      <div class=\\\"city__content__section\\\">\\n        <div class=\\\"city__title\\\">\\n          <div class=\\\"city__icon\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 90 90\\\">\\n              <% _.each(icon, function(el) { %>\\n              <path fill=\\\"#ffffff\\\"\\n                stroke=\\\"#ffffff\\\"\\n                stroke-width=\\\"1\\\"\\n                stroke-linecap=\\\"round\\\"\\n                stroke-linejoin=\\\"round\\\"\\n                d=\\\"<%= el.path %>\\\"\\n                <% if (el.length) { %>\\n                data-length=\\\"<%= el.length %>\\\"\\n                <% } %>\\n                />\\n              <% }); %>\\n            </svg>\\n          </div>\\n          <h1 class=\\\"city__name\\\"> <% print(name.toUpperCase()); %> </h1>\\n          <h2 class=\\\"city__country\\\"> <% print(country.toUpperCase()); %> </h2>\\n          <div class=\\\"city__square city__square--topLeft\\\"></div>\\n          <div class=\\\"city__square city__square--topRight\\\"></div>\\n          <div class=\\\"city__square city__square--bottomLeft\\\"></div>\\n          <div class=\\\"city__square city__square--bottomRight\\\"></div>\\n        </div>\\n      </div>\\n      <% if (localSlug) { %>\\n      <div class=\\\"city__content__section city__content__section--button\\\">\\n        <div class=\\\"city__button\\\">\\n          <a href=\\\"#local/<%= localSlug %>\\\" class=\\\"city__link\\\">\\n            DÉCOUVRIR <% print(local.toUpperCase()); %>\\n          </a>\\n          <div class=\\\"city__border city__border--top\\\"></div>\\n          <div class=\\\"city__border city__border--left\\\"></div>\\n          <div class=\\\"city__border city__border--bottom\\\"></div>\\n          <div class=\\\"city__border city__border--right\\\"></div>\\n        </div>\\n      </div>\\n      <% } %>\\n    </div>\\n    <% if (background) { %>\\n      <div class=\\\"city__background\\\"\\n        style=\\\"background-image:url(<%= background %>)\\\"></div>\\n    <% } %>\\n  \",\n\n  els: {\n    $squareTopLeft: \".city__square--topLeft\",\n    $squareTopRight: \".city__square--topRight\",\n    $squareBottomLeft: \".city__square--bottomLeft\",\n    $squareBottomRight: \".city__square--bottomRight\",\n    $name: \".city__name\",\n    $country: \".city__country\",\n    $icon: \".city__icon\",\n    $button: \".city__button\",\n    $bordersTopBottom: \".city__border--top, .city__border--bottom\",\n    $bordersLeftRight: \".city__border--left, .city__border--right\",\n    $background: \".city__background\",\n    $svgs: \"svg\"\n  },\n\n  didInitialize: function didInitialize(options) {\n    _.extend(this, _.pick(options, \"position\"));\n  },\n\n  onLoad: function onLoad() {\n    this.loaded = true;\n  },\n\n  setPosition: function setPosition() {\n    this.$el.css({\n      left: this.position.left * 100 + \"%\",\n      top: this.position.top * 100 + \"%\"\n    });\n  },\n\n  \"in\": function _in() {\n    this.$el.css(\"z-index\", 2);\n\n    this.els.$squareTopLeft.velocity(\"stop\").velocity({ left: 0, opacity: 1 }, { duration: 400, delay: 500 }).velocity({ top: 0 }, { duration: 400, delay: 200 });\n\n    this.els.$squareTopRight.velocity(\"stop\").velocity({ right: 0, opacity: 1 }, { duration: 400, delay: 500 }).velocity({ top: 0 }, { duration: 400, delay: 200 });\n\n    this.els.$squareBottomLeft.velocity(\"stop\").velocity({ left: 0, opacity: 1 }, { duration: 400, delay: 500 }).velocity({ bottom: 0 }, { duration: 400, delay: 300 });\n\n    this.els.$squareBottomRight.velocity(\"stop\").velocity({ right: 0, opacity: 1 }, { duration: 400, delay: 500 }).velocity({ bottom: 0 }, { duration: 400, delay: 300 });\n\n    this.els.$name.velocity(\"stop\").velocity({ opacity: 1, top: 0 }, { duration: 500, delay: 1100 });\n\n    this.els.$country.velocity(\"stop\").velocity({ opacity: 1, top: 0 }, { duration: 500, delay: 1200 });\n\n    this.els.$icon.velocity(\"stop\").velocity({ top: -90, opacity: 1 }, { duration: 1500, delay: 500 });\n\n    this.els.$button.velocity(\"stop\").velocity({ opacity: 1, top: 0 }, { duration: 500, delay: 1400 });\n\n    this.els.$bordersTopBottom.velocity(\"stop\").velocity({ width: \"100%\" }, { duration: 1000, delay: 1400, display: \"block\" });\n\n    this.els.$bordersLeftRight.velocity(\"stop\").velocity({ height: \"100%\" }, { duration: 1000, delay: 1400, display: \"block\" });\n\n    this.els.$background.velocity(\"stop\").velocity({ scale: 1.2 }, 0).velocity({ scale: 1 }, 2500);\n\n    this.els.$svgs.each(function () {\n      jQuery(\"path\", this).each(function () {\n        var $path = jQuery(this);\n        var data = $path.attr(\"data-length\");\n\n        var length;\n        if (data) {\n          length = parseFloat(data);\n        } else {\n          length = $path[0].getTotalLength();\n          $path.attr(\"data-length\", length);\n        }\n\n        $path.velocity(\"stop\").velocity({\n          \"stroke-dashoffset\": length,\n          \"stroke-dasharray\": \"\" + length + \",\" + length,\n          fillOpacity: 0,\n          strokeOpacity: 1\n        }, 0).velocity({ \"stroke-dashoffset\": 0 }, { duration: 2000, delay: 500 }).velocity({ fillOpacity: 1 }, { duration: 500, delay: 2000, queue: false });\n      });\n    });\n  },\n\n  out: function out() {\n    this.$el.css(\"z-index\", 1);\n\n    this.els.$squareTopLeft.velocity(\"stop\").css({ top: \"50%\", left: \"50%\", opacity: 0 });\n    this.els.$squareTopRight.velocity(\"stop\").css({ top: \"50%\", right: \"50%\", opacity: 0 });\n    this.els.$squareBottomLeft.velocity(\"stop\").css({ bottom: \"50%\", left: \"50%\", opacity: 0 });\n    this.els.$squareBottomRight.velocity(\"stop\").css({ bottom: \"50%\", right: \"50%\", opacity: 0 });\n    this.els.$name.velocity(\"stop\").css({ opacity: 0, top: -90 });\n    this.els.$country.velocity(\"stop\").css({ opacity: 0, top: 50 });\n    this.els.$icon.velocity(\"stop\").css({ top: -150, opacity: 0 });\n    this.els.$button.velocity(\"stop\").css({ opacity: 0, top: 50 });\n    this.els.$bordersTopBottom.velocity(\"stop\").css(\"width\", 0);\n    this.els.$bordersLeftRight.velocity(\"stop\").css(\"height\", 0);\n    this.els.$background.velocity(\"stop\").velocity({ scale: 1.2 }, 0);\n    this.els.$svgs.each(function () {\n      jQuery(\"path\", this).each(function () {\n        var $path = jQuery(this);\n        var data = $path.attr(\"data-length\");\n\n        var length;\n        if (data) {\n          length = parseFloat(data);\n        } else {\n          length = $path[0].getTotalLength();\n          $path.attr(\"data-length\", length);\n        }\n\n        $path.velocity(\"stop\").velocity({\n          \"stroke-dashoffset\": length,\n          \"stroke-dasharray\": \"\" + length + \",\" + length,\n          fillOpacity: 0,\n          strokeOpacity: 1\n        }, 0);\n      });\n    });\n  },\n\n  didRender: function didRender() {\n    this.setPosition();\n\n    this.loaded = false;\n    this.loader = new Loader([this.model.get(\"background\")]);\n    this.loader.load().then(this.onLoad.bind(this));\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../modules/Loader\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/Loader.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/FrameView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.BetterView.extend({\n  template: \"\\n    <div class=\\\"frame\\\">\\n      <a class=\\\"frame__bar frame__bar--top\\\" data-direction=\\\"north\\\">\\n        <div class=\\\"frame__text frame__text--horizontal\\\">\\n          <span class=\\\"frame__letter\\\"> N </span>\\n        </div>\\n        <div class=\\\"frame__arrow frame__arrow--top\\\">\\n          <div class=\\\"frame__arrow__container frame__arrow__container--top\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 50\\\">\\n              <path fill=\\\"#ffffff\\\" d=\\\"M20,50L10 40 0 50 0 0 20 0 z\\\"/>\\n            </svg>\\n          </div>\\n        </div>\\n        <div class=\\\"frame__part frame__part--left\\\"></div>\\n        <div class=\\\"frame__part frame__part--right\\\"></div>\\n      </a>\\n\\n      <a class=\\\"frame__bar frame__bar--right\\\" data-direction=\\\"east\\\">\\n        <div class=\\\"frame__text frame__text--vertical\\\">\\n          <div class=\\\"frame__letters frame__letters--vertical\\\">\\n            <span class=\\\"frame__letter frame__letter--vertical\\\"> E </span>\\n          </div>\\n        </div>\\n        <div class=\\\"frame__arrow frame__arrow--right\\\">\\n          <div class=\\\"frame__arrow__container frame__arrow__container--right\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 50 20\\\">\\n              <path fill=\\\"#ffffff\\\" d=\\\"M0,0L10 10 0 20 50 20 50 0 z\\\"/>\\n            </svg>\\n          </div>\\n        </div>\\n        <div class=\\\"frame__part frame__part--top\\\"></div>\\n        <div class=\\\"frame__part frame__part--bottom\\\"></div>\\n      </a>\\n\\n      <a class=\\\"frame__bar frame__bar--bottom\\\" data-direction=\\\"south\\\">\\n        <div class=\\\"frame__text frame__text--horizontal\\\">\\n          <span class=\\\"frame__letter\\\"> S </span>\\n        </div>\\n        <div class=\\\"frame__arrow frame__arrow--bottom\\\">\\n          <div class=\\\"frame__arrow__container frame__arrow__container--bottom\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 50\\\">\\n              <path fill=\\\"#ffffff\\\" d=\\\"M20,0L10 10 0 0 0 50 20 50 z\\\"/>\\n            </svg>\\n          </div>\\n        </div>\\n        <div class=\\\"frame__part frame__part--left\\\"></div>\\n        <div class=\\\"frame__part frame__part--right\\\"></div>\\n      </a>\\n\\n      <a class=\\\"frame__bar frame__bar--left\\\" data-direction=\\\"west\\\">\\n        <div class=\\\"frame__text frame__text--vertical\\\">\\n          <div class=\\\"frame__letters frame__letters--vertical\\\">\\n            <span class=\\\"frame__letter frame__letter--vertical\\\"> W </span>\\n          </div>\\n        </div>\\n        <div class=\\\"frame__arrow frame__arrow--left\\\">\\n          <div class=\\\"frame__arrow__container frame__arrow__container--left\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 50 20\\\">\\n              <path fill=\\\"#ffffff\\\" d=\\\"M50,20L40 10 50 0 0 0 0 20 z\\\"/>\\n            </svg>\\n          </div>\\n        </div>\\n        <div class=\\\"frame__part frame__part--top\\\"></div>\\n        <div class=\\\"frame__part frame__part--bottom\\\"></div>\\n      </a>\\n    </div>\\n  \",\n\n  events: {\n    \"mouseover .frame__bar\": \"onMouseover\",\n    \"mouseout .frame__bar\": \"onMouseout\"\n  },\n\n  didInitialize: function didInitialize() {\n    this.listenTo(this.model, \"change\", this.onChange);\n  },\n\n  onMouseover: function onMouseover(e) {\n    var $el = jQuery(e.currentTarget);\n    var direction = $el.attr(\"data-direction\");\n    if (direction) this.trigger(\"mouseover\", direction);\n  },\n\n  onMouseout: function onMouseout() {\n    this.trigger(\"mouseout\");\n  },\n\n  onChange: function onChange() {\n    var _this = this;\n    [\"top\", \"right\", \"bottom\", \"left\"].forEach(function (position) {\n      var $el = _this.$(\".frame__bar--\" + position);\n      var direction = $el.attr(\"data-direction\");\n\n      if (_this.model.has(direction)) {\n        $el.attr(\"href\", \"#city/\" + _this.model.get(direction)).removeClass(\"is-inactive\");\n      } else {\n        $el.attr(\"href\", null).addClass(\"is-inactive\");\n      }\n    });\n  },\n\n  onUpdate: function onUpdate(directions) {\n    this.model.set(directions);\n  },\n\n  \"in\": function _in() {\n    this.$(\".frame__bar--top\").css(\"top\", -40).velocity({ top: 0 }, { duration: 800 });\n\n    this.$(\".frame__bar--bottom\").css(\"bottom\", -40).velocity({ bottom: 0 }, { duration: 800 });\n\n    this.$(\".frame__bar--left\").css(\"left\", -40).velocity({ left: 0 }, { duration: 800 });\n\n    this.$(\".frame__bar--right\").css(\"right\", -40).velocity({ right: 0 }, { duration: 800 });\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/LocalView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar jQuery = _interopRequire((typeof window !== \"undefined\" ? window.jQuery : typeof global !== \"undefined\" ? global.jQuery : null));\n\nvar _ = _interopRequire((typeof window !== \"undefined\" ? window._ : typeof global !== \"undefined\" ? global._ : null));\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nvar skrollr = _interopRequire((typeof window !== \"undefined\" ? window.skrollr : typeof global !== \"undefined\" ? global.skrollr : null));\n\nvar Store = _interopRequire(require(\"../modules/StoreModule\"));\n\nvar Loader = _interopRequire(require(\"../modules/Loader\"));\n\nmodule.exports = Backbone.PageView.extend({\n  className: \"local\",\n\n  name: \"local\",\n\n  template: \"\\n    <div class=\\\"local__content\\\"></div>\\n    <div class=\\\"local__next\\\" style=\\\"background-image:url(<%= cityBackground %>);\\\"></div>\\n  \",\n\n  blocksTemplates: {\n    1: _.template(\"\\n      <div class=\\\"local__block local__block--type1\\\">\\n        <img class=\\\"local__image\\\" src=\\\"<%= urls[0] %>\\\">\\n      </div>\\n    \"),\n\n    2: _.template(\"\\n      <div class=\\\"local__block local__block--type2\\\">\\n        <div class=\\\"local__column local__column--half local__column--left\\\">\\n          <div class=\\\"local__column__content\\\">\\n            <img class=\\\"local__image\\\" src=\\\"<%= urls[0] %>\\\"\\n              data-bottom-top=\\\"left:-100%;opacity:0;\\\"\\n              data-center-center=\\\"left:0%;opacity:1;top:0px;\\\"\\n              data-top-bottom=\\\"top:50px;\\\"\\n              >\\n          </div>\\n        </div>\\n        <div class=\\\"local__column local__column--half local__column--right\\\">\\n          <div class=\\\"local__column__content\\\">\\n            <img class=\\\"local__image\\\" src=\\\"<%= urls[1] %>\\\"\\n              data-bottom-top=\\\"left:100%;opacity:0;;\\\"\\n              data-center-center=\\\"left:0%;opacity:1;top:0px\\\"\\n              data-top-bottom=\\\"top:-20px;\\\"\\n              >\\n          </div>\\n        </div>\\n      </div>\\n    \"),\n\n    3: _.template(\"\\n      <div class=\\\"local__block local__block--type3\\\">\\n        <div class=\\\"local__column local__column--mask\\\">\\n          <img class=\\\"local__image\\\" src=\\\"<%= urls[0] %>\\\"\\n            data-bottom-top=\\\"transform:scale(1.5);\\\"\\n            data-center-bottom=\\\"transform:scale(1);\\\"\\n            >\\n        </div>\\n      </div>\\n    \")\n  },\n\n  didInitialize: function didInitialize() {\n    this.$win = jQuery(window); // keep track of the scrollTop to restore it on out\n    this.$win.on(\"scroll\", this.onScroll.bind(this));\n\n    this.city = Store.getCities().findWhere({ localSlug: this.model.get(\"slug\") });\n  },\n\n  willRemove: function willRemove() {\n    this.$win.off(\"scroll\", this.onScroll);\n    skrollr.init().destroy();\n  },\n\n  \"in\": function _in() {\n    if (!this.loaded) return false;\n    Backbone.PageView.prototype[\"in\"].call(this);\n  },\n\n  out: function out(done) {\n    var _this = this;\n    jQuery(\"html,body\").scrollTop(this.scrollTop);\n\n    return new Promise(function (resolve, reject) {\n      setTimeout(done, 400);\n      _this.$el.velocity(\"stop\").velocity({ opacity: 0 }, { duration: 800, complete: function () {\n          resolve();\n        } });\n    });\n  },\n\n  onScroll: function onScroll(e) {\n    this.scrollTop = this.$win.scrollTop();\n  },\n\n  onLoad: function onLoad() {\n    var _this2 = this;\n    this.loaded = true;\n    _.defer(function () {\n      _this2.skrollr = skrollr.init({ forceHeight: false });\n    });\n    this[\"in\"]();\n  },\n\n  renderBlocks: function renderBlocks() {\n    var _this3 = this;\n    var string = \"\";\n\n    this.model.get(\"images\").forEach(function (image) {\n      string += _this3.blocksTemplates[image.type](image);\n    });\n\n    return string;\n  },\n\n  render: function render() {\n    this.$el.html(this.template({ cityBackground: this.city.get(\"background\") }));\n    this.$(\".local__content\").html(this.renderBlocks());\n    this.didRender();\n    return this;\n  },\n\n  didRender: function didRender() {\n    var images = [];\n    this.model.get(\"images\").forEach(function (image) {\n      image.urls.forEach(function (url) {\n        return images.push(url);\n      });\n    });\n\n    this.loaded = false;\n    this.loader = new Loader(images);\n    this.loader.load().then(this.onLoad.bind(this));\n  } });\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../modules/Loader\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/Loader.js\",\"../modules/StoreModule\":\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/StoreModule.js\"}],\"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/MenuView.js\":[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nvar _interopRequire = function (obj) {\n  return obj && (obj[\"default\"] || obj);\n};\n\nvar Backbone = _interopRequire((typeof window !== \"undefined\" ? window.Backbone : typeof global !== \"undefined\" ? global.Backbone : null));\n\nmodule.exports = Backbone.BetterView.extend({\n  template: \"\\n    <div class=\\\"menu\\\">\\n      <a href=\\\"#/locals\\\" class=\\\"menu__button menu__button--bottomRight\\\" data-button=\\\"locals\\\">\\n        <div class=\\\"menu__icon menu__icon--locals\\\">\\n          <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n            <path d=\\\"M35.9,32C34.5,28.2,32,27.3,30,27c-1.7-0.3-3.7-0.9-4.4-1.3c0-0.3,0-1,0-2.1c0,0,0.1-0.1,0.1-0.1l0,0c1-1.3,1.4-2.5,1.7-3.4  c0.6-0.4,1.3-1.3,1.7-3c0.2-1,0.4-2.2-0.3-3.1c0,0,0,0,0-0.1c0.6-6.2-3.3-9.3-5.6-10.1l0,0l0,0c-0.9-0.3-1.7-0.4-2.5-0.4  c-0.2,0-0.4,0-0.5,0c-0.2,0-0.3,0-0.5,0c-0.8,0-1.6,0.1-2.5,0.4l0,0l0,0c-2.3,0.8-6.3,3.9-5.6,10.1c0,0,0,0,0,0.1  c-0.7,0.9-0.5,2.1-0.3,3.1c0.4,1.7,1.1,2.5,1.7,3c0.2,0.8,0.7,2,1.6,3.3v0c0,0,0,0,0,0c0.1,0.1,0.1,0.1,0.2,0.2  c0.1,1.1,0.1,1.7,0,2.1c-0.7,0.4-2.8,1-4.4,1.3c-2,0.4-4.4,1.2-5.9,5.1c-0.2,0.7-0.2,1.4,0.2,1.9c1.5,2.2,9.4,2.6,15.7,2.6  s14.2-0.5,15.7-2.6C36.1,33.4,36.2,32.7,35.9,32z M14,18.9c-0.2,0-1-0.1-1.5-2.2c-0.4-1.6,0-1.9,0.3-1.9c0.1,0,0.2,0.1,0.2,0.1  c-1.4-7.5,4.4-9.5,4.4-9.5c0.8-0.2,1.5-0.3,2-0.3c0.2,0,0.4,0,0.5,0c0.2,0,0.3,0,0.5,0c0.6,0,1.2,0.1,2,0.3c0,0,5.8,2,4.4,9.5  c0,0,0.1-0.1,0.2-0.1c0.3,0,0.7,0.3,0.3,1.9c-0.5,2.1-1.3,2.2-1.5,2.2c0,0,0,0,0,0s-0.1,2-1.9,4.1c0,0,0,0,0,0.1  c-1.4,1.4-2.8,2.1-4.3,2.1c-1.8-0.1-3.2-1.3-3.9-2c0,0,0,0,0,0C14.1,20.9,14,18.9,14,18.9C14,18.9,14,18.9,14,18.9z M20,35  c-7.5,0-15-0.8-14.4-2.4c1.2-3.2,3.1-3.8,4.7-4.1c1.5-0.3,5.3-1.2,5.6-2.1c0.1-0.3,0.1-0.8,0.1-1.3c0.9,0.7,2.2,1.4,3.7,1.4  c0.1,0,0.2,0,0.2,0c1.4,0,2.7-0.5,4-1.5c0,0.6,0,1.1,0.1,1.4c0.3,0.9,4.1,1.8,5.6,2.1c1.5,0.3,3.5,0.9,4.7,4.1  C35,34.2,27.5,35,20,35z\\\"/>\\n          </svg>\\n        </div>\\n      </a>\\n\\n      <a href=\\\"#/city/paris\\\" class=\\\"menu__button menu__button--topRight\\\" data-button=\\\"map\\\">\\n        <div class=\\\"menu__icon menu__icon--map\\\">\\n          <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n            <path fill=\\\"none\\\"\\n              stroke-width=\\\"2\\\"\\n              stroke-linecap=\\\"round\\\"\\n              stroke-linejoin=\\\"round\\\"\\n              d=\\\"M35.2,30.3L26.4 34.6 14.4 28.4 4.8 33.2 4.8 10.1 14.4 5.4 26.4 11.6 35.2 7.2 z\\\"/>\\n            <line stroke-width=\\\"2\\\" stroke-width=\\\"1\\\" x1=\\\"14.4\\\" y1=\\\"5.4\\\" x2=\\\"14.4\\\" y2=\\\"28.4\\\"/>\\n            <line stroke-width=\\\"2\\\" stroke-width=\\\"1\\\" x1=\\\"26.4\\\" y1=\\\"11.6\\\" x2=\\\"26.4\\\" y2=\\\"34.6\\\"/>\\n          </svg>\\n        </div>\\n      </a>\\n\\n      <a href=\\\"#\\\" class=\\\"menu__button menu__button--bottomLeft\\\" data-button=\\\"share\\\">\\n        <div class=\\\"menu__expandable\\\">\\n          <div class=\\\"menu__icon menu__icon--pinterest\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n              <path d=\\\"M20.5,8.4c-5.7,0-8.5,4.5-8.5,8.3c0,2.3,0.8,4.3,2.4,5.1c0.3,0.1,0.5,0,0.6-0.3c0.1-0.2,0.2-0.8,0.2-1.1  c0.1-0.3,0-0.5-0.2-0.7c-0.5-0.6-0.8-1.5-0.8-2.6c0-3.4,2.3-6.4,5.9-6.4c3.2,0,5,2.2,5,5.1c0,3.8-1.5,7.1-3.8,7.1  c-1.2,0-2.2-1.2-1.9-2.6c0.4-1.7,1.1-3.5,1.1-4.7c0-1.1-0.5-2-1.6-2c-1.3,0-2.3,1.5-2.3,3.5c0,1.3,0.4,2.1,0.4,2.1s-1.3,6.2-1.5,7.3  c-0.5,2.2-0.1,4.8,0,5.1c0,0.2,0.2,0.2,0.3,0.1c0.1-0.2,1.6-2.3,2.2-4.4c0.1-0.6,0.8-3.7,0.8-3.7c0.4,0.9,1.6,1.7,2.9,1.7  c3.8,0,6.4-3.9,6.4-9.1C28,12.1,25,8.4,20.5,8.4z\\\"/>\\n            </svg>\\n          </div>\\n          <div class=\\\"menu__icon menu__icon--twitter\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n              <path d=\\\"M9.6,27c0.3,0,0.7,0.1,1,0.1c2,0,3.8-0.6,5.4-1.9c-0.9,0-1.8-0.3-2.5-0.9s-1.2-1.3-1.5-2.2c0.2,0,0.5,0.1,0.8,0.1  c0.4,0,0.8-0.1,1.1-0.2c-1-0.2-1.8-0.7-2.5-1.6c-0.7-0.8-1-1.8-1-2.9v-0.1c0.6,0.4,1.3,0.5,2,0.6c-0.6-0.4-1.1-0.9-1.4-1.6  c-0.4-0.7-0.5-1.4-0.5-2.2c0-0.8,0.2-1.6,0.6-2.3c1.1,1.4,2.4,2.5,3.9,3.4c1.5,0.8,3.2,1.3,5,1.4c-0.1-0.4-0.1-0.7-0.1-1  c0-1.2,0.4-2.3,1.3-3.2c0.8-0.9,1.9-1.3,3-1.3c1.2,0,2.3,0.5,3.1,1.4c1-0.2,1.9-0.6,2.7-1.1c-0.3,1.1-0.9,1.9-1.9,2.5  c0.8-0.1,1.6-0.3,2.5-0.7c-0.5,0.9-1.3,1.7-2.1,2.4v0.6c0,1.2-0.2,2.4-0.5,3.6c-0.3,1.2-0.9,2.4-1.5,3.5c-0.7,1.1-1.5,2.1-2.5,3  s-2.1,1.6-3.4,2.1c-1.3,0.5-2.8,0.8-4.3,0.8C13.7,29,11.5,28.3,9.6,27L9.6,27z\\\"/>\\n            </svg>\\n          </div>\\n          <div class=\\\"menu__icon menu__icon--facebook\\\">\\n            <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n              <path d=\\\"M14.6,20.7v-3.9h3.1v-1.9c0-1.4,0.5-2.6,1.4-3.6c0.9-1,2-1.5,3.3-1.5h3v3.9h-3c-0.2,0-0.4,0.1-0.5,0.3  c-0.2,0.2-0.2,0.5-0.2,0.8v2h3.8v3.9h-3.8v9.4h-3.8v-9.4L14.6,20.7L14.6,20.7z\\\"/>\\n            </svg>\\n          </div>\\n        </div>\\n        <div class=\\\"menu__icon menu__icon--share\\\">\\n          <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n            <path fill=\\\"none\\\"\\n              stroke-width=\\\"2\\\"\\n              stroke-linecap=\\\"round\\\"\\n              stroke-linejoin=\\\"round\\\"\\n              d=\\\"M17.2,22.9L3.1 17.2 36.9 3.1 22.8 36.9 z\\\"/>\\n            <line stroke-width=\\\"2\\\" x1=\\\"17.2\\\" y1=\\\"22.9\\\" x2=\\\"36.9\\\" y2=\\\"3.1\\\"/>\\n          </svg>\\n        </div>\\n      </a>\\n\\n      <a href=\\\"#/infos\\\" class=\\\"menu__button menu__button--topLeft\\\" data-button=\\\"infos\\\">\\n        <div class=\\\"menu__icon menu__icon--infos\\\">\\n          <svg xmln=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 40 40\\\">\\n            <rect x=\\\"18.5\\\" y=\\\"16.1\\\" width=\\\"3\\\" height=\\\"15.2\\\"/>\\n            <circle cx=\\\"20\\\" cy=\\\"10.8\\\" r=\\\"2.2\\\"/>\\n          </svg>\\n        </div>\\n      </a>\\n    </div>\\n  \",\n\n  events: {\n    \"click a\": \"onClick\",\n    \"mouseenter .menu__button--bottomLeft\": \"onShareOver\",\n    \"mouseleave .menu__button--bottomLeft\": \"onShareOut\"\n  },\n\n  els: {\n    $expandable: \".menu__expandable\",\n    $icon: \".menu__icon--share\"\n  },\n\n  didInitialize: function didInitialize() {\n    this.expandableHeight;\n    this.iconHeight;\n  },\n\n  onClick: function onClick(e) {\n    var button = jQuery(e.currentTarget).attr(\"data-button\");\n    if (button) this.trigger(\"click\", button);\n  },\n\n  onShareOver: function onShareOver(e) {\n    if (!this.expandableHeight) this.expandableHeight = this.els.$expandable.css(\"height\", \"auto\").height();\n    this.els.$expandable.css(\"height\", 0);\n\n    if (!this.iconHeight) this.iconHeight = this.els.$icon.outerHeight();\n\n    this.els.$expandable.velocity(\"stop\").velocity({ height: this.expandableHeight }, 300);\n\n    this.els.$icon.velocity(\"stop\").velocity({ marginBottom: -this.iconHeight }, 400);\n  },\n\n  onShareOut: function onShareOut(e) {\n    this.els.$expandable.velocity(\"stop\").velocity({ height: 0 }, 300);\n\n    this.els.$icon.velocity(\"stop\").velocity({ marginBottom: 0 }, 400);\n  },\n\n  \"in\": function _in() {\n    this.$(\"a\").each(function (i) {\n      jQuery(this).css({ opacity: 0, marginTop: 50 }).velocity({ opacity: 1, marginTop: 0 }, { duration: 800, delay: i * 300 });\n    });\n  }\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}]},{},[\"./app/src/scripts/main.js\"]);\n"],"sourceRoot":"/source/"}