!function e(t,i,n){function s(a,l){if(!i[a]){if(!t[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(o)return o(a,!0);var r=new Error("Cannot find module '"+a+"'");throw r.code="MODULE_NOT_FOUND",r}var d=i[a]={exports:{}};t[a][0].call(d.exports,function(e){var i=t[a][1][e];return s(i?i:e)},d,d.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({"./app/src/scripts/main.js":[function(e){(function(t){"use strict";{var i=function(e){return e&&(e["default"]||e)},n=i("undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null);i("undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null)}e("./extensions/BetterView"),e("./extensions/PageView"),e("./extensions/ContentView");var s=i(e("./views/AppView"));n(function(){return new s({el:"body"})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./extensions/BetterView":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/BetterView.js","./extensions/ContentView":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/ContentView.js","./extensions/PageView":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/PageView.js","./views/AppView":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/AppView.js"}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/collections/CitiesCollection.js":[function(e,t){(function(i){"use strict";var n=function(e){return e&&(e["default"]||e)},s=n("undefined"!=typeof window?window.Backbone:"undefined"!=typeof i?i.Backbone:null),o=n(e("../models/CityModel"));t.exports=s.Collection.extend({model:o})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/CityModel":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/CityModel.js"}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/collections/LocalsCollection.js":[function(e,t){(function(i){"use strict";var n=function(e){return e&&(e["default"]||e)},s=n("undefined"!=typeof window?window.Backbone:"undefined"!=typeof i?i.Backbone:null),o=n(e("../models/LocalModel"));t.exports=s.Collection.extend({model:o})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/LocalModel":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/LocalModel.js"}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/BetterView.js":[function(){(function(e){"use strict";var t=function(e){return e&&(e["default"]||e)},i=t("undefined"!=typeof window?window._:"undefined"!=typeof e?e._:null),n=t("undefined"!=typeof window?window.Backbone:"undefined"!=typeof e?e.Backbone:null);n.BetterView=n.View.extend({initialize:function(){this.willInitialize&&this.willInitialize.apply(this.arguments),this.template=i.template(this.template),n.View.prototype.initialize.apply(this,arguments),this.didInitialize&&this.didInitialize.apply(this,arguments)},remove:function(){this.willRemove&&this.willRemove.apply(this,arguments),n.View.prototype.remove.apply(this,arguments),this.didRemove&&this.didRemove.apply(this,arguments)},assign:function(e,t){t?e.setElement(this.$(t)).render():e.setElement(this.$el.render())},unassign:function(){return this.$el.empty().off(),this.stopListening(),this},append:function(e,t){var n=this;i.isArray(e)||(e=[e]),e.forEach(t?function(e){return n.$(t).append(e.render().el)}:function(e){return n.$el.append(e.render().el)})},prepend:function(e,t){var n=this;i.isArray(e)||(e=[e]),e.forEach(t?function(e){return n.$(t).prepend(e.render().el)}:function(e){return n.$el.prepend(e.render().el)})},render:function(){if(this.willRender&&this.willRender.apply(this,arguments),this.$el.html(this.model?this.template(this.model.toJSON()):this.template()),this.els){var e={};for(var t in this.els)this.els.hasOwnProperty(t)&&(e[t]=this.$(this.els[t]));this.els=e}return this.didRender&&this.didRender.apply(this,arguments),this}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/ContentView.js":[function(){(function(e){"use strict";var t=function(e){return e&&(e["default"]||e)},i=t("undefined"!=typeof window?window.Backbone:"undefined"!=typeof e?e.Backbone:null);i.ContentView=i.PageView.extend({content:"",getContent:function(){return this.currentView||{}},changeContent:function(e){if(this.currentView&&this.currentView.name===e.name)return!1;var t=function(){this.prepend(e,this.content),this.currentView=e,e["in"]()}.bind(this),i=this.currentView||null;i?i.out(t).then(function(){return i.remove()}):t()},removeContent:function(){var e=this;return this.currentView?void this.currentView.out().then(function(){e.currentView.remove(),e.currentView=null}):!1}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/extensions/PageView.js":[function(){(function(e){"use strict";var t=function(e){return e&&(e["default"]||e)},i=t("undefined"!=typeof window?window.Backbone:"undefined"!=typeof e?e.Backbone:null);i.PageView=i.BetterView.extend({name:void 0,"in":function(){this.$el.velocity("stop").velocity({opacity:1},{duration:800})},out:function(e){var t=this;return new Promise(function(i){setTimeout(e,400),t.$el.velocity("stop").velocity({opacity:0},{duration:800,complete:function(){i()}})})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/CityModel.js":[function(e,t){(function(i){"use strict";var n=function(e){return e&&(e["default"]||e)},s=n("undefined"!=typeof window?window.Backbone:"undefined"!=typeof i?i.Backbone:null),o=n(e("../utils/slugUtil"));t.exports=s.Model.extend({defaults:{name:"",country:"",north:void 0,east:void 0,south:void 0,west:void 0,slug:void 0,northSlug:void 0,eastSlug:void 0,southSlug:void 0,westSlug:void 0,local:void 0,localSlug:void 0,background:void 0,cover:void 0,icon:[]},initialize:function(){var e=this,t={};this.has("slug")||(t.slug=o(this.get("name"))),!this.has("localSlug")&&this.has("local")&&(t.localSlug=o(this.get("local"))),["north","east","south","west"].forEach(function(i){e.has(i)&&!e.has(""+i+"Slug")&&(t[""+i+"Slug"]=o(e.get(i)))}),this.set(t)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/slugUtil":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/utils/slugUtil.js"}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/FrameModel.js":[function(e,t){(function(e){"use strict";var i=function(e){return e&&(e["default"]||e)},n=i("undefined"!=typeof window?window.Backbone:"undefined"!=typeof e?e.Backbone:null);t.exports=n.Model.extend({defaults:{north:void 0,east:void 0,south:void 0,west:void 0}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/LocalModel.js":[function(e,t){(function(i){"use strict";var n=function(e){return e&&(e["default"]||e)},s=n("undefined"!=typeof window?window.Backbone:"undefined"!=typeof i?i.Backbone:null),o=n(e("../utils/slugUtil"));t.exports=s.Model.extend({defaults:{name:void 0,slug:void 0,images:[]},initialize:function(){this.has("slug")||this.set({slug:o(this.get("name"))})},validate:function(e){return e.name?void 0:"Local must have a name."}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/slugUtil":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/utils/slugUtil.js"}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/MapModel.js":[function(e,t){(function(e){"use strict";var i=function(e){return e&&(e["default"]||e)},n=i("undefined"!=typeof window?window._:"undefined"!=typeof e?e._:null),s=i("undefined"!=typeof window?window.Backbone:"undefined"!=typeof e?e.Backbone:null);t.exports=s.Model.extend({initialize:function(e){s.Model.prototype.initialize.call(this),n.extend(this,n.pick(e,"collection")),this.build()},build:function(){var e=this,t={},i=[{name:"north",left:0,top:-1},{name:"east",left:1,top:0},{name:"south",left:0,top:1},{name:"west",left:-1,top:0}];this.collection.each(function(s,o){var a=s.get("slug"),l=0===o?{left:0,top:0}:t[a]?t[a].position:void 0;i.forEach(function(i){var o=s.get(""+i.name+"Slug");if(o&&!t[o]){var a=n.clone(l);a.top+=i.top,a.left+=i.left,t[o]={},t[o].position=a;var c=e.collection.findWhere({slug:o});t[o].directions={},t[o].directions={north:c.get("northSlug"),east:c.get("eastSlug"),south:c.get("southSlug"),west:c.get("westSlug")}}})}),this.set(t)},getPosition:function(e){return this.has(e)?this.get(e).position:void 0},getDirections:function(e){return this.has(e)?this.get(e).directions:void 0}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/Loader.js":[function(e,t){"use strict";var i=function(e,t,i){t&&Object.defineProperties(e,t),i&&Object.defineProperties(e.prototype,i)},n=function(){function e(e){this.srcs=e}return i(e,null,{load:{value:function(){return Promise.all(this.srcs.map(function(e){return new Promise(function(t,i){var n=new Image;n.onload=t,n.onerror=i,n.src=e})}))},writable:!0,enumerable:!0,configurable:!0}}),e}();t.exports=n},{}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/StoreModule.js":[function(e,t){"use strict";var i=function(e){return e&&(e["default"]||e)},n=i(e("../collections/LocalsCollection")),s=i(e("../collections/CitiesCollection"));t.exports={locals:new n(window.locals),cities:new s(window.cities),getLocals:function(){return this.locals},getCities:function(){return this.cities}}},{"../collections/CitiesCollection":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/collections/CitiesCollection.js","../collections/LocalsCollection":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/collections/LocalsCollection.js"}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/routers/AppRouter.js":[function(e,t){(function(e){"use strict";var i=function(e){return e&&(e["default"]||e)},n=i("undefined"!=typeof window?window.Backbone:"undefined"!=typeof e?e.Backbone:null);t.exports=n.Router.extend({routes:{"":"default",welcome:"welcome","local/:slug":"local",city:"city","city/:slug":"city"}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/utils/slugUtil.js":[function(e,t){"use strict";function i(){var e=void 0===arguments[0]?"":arguments[0];return e.toLowerCase().replace(" ","_")}t.exports=i},{}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/AppView.js":[function(e,t){(function(i){"use strict";var n=function(e){return e&&(e["default"]||e)},s=n("undefined"!=typeof window?window.Backbone:"undefined"!=typeof i?i.Backbone:null),o=n(e("../routers/AppRouter")),a=n(e("../modules/StoreModule")),l=n(e("../views/CitiesView")),c=n(e("../views/LocalView"));t.exports=s.ContentView.extend({content:".app__content",template:'\n    <div class="app">\n      <div class="app__content"></div>\n    </div>\n  ',didInitialize:function(){this.render()},didRender:function(){var e=this;this.router=new o,this.citiesView,this.router.on("route:default",function(){e.router.navigate("/welcome",{trigger:!0})}),this.router.on("route:welcome",function(){}),this.router.on("route:city",function(t){e.currentView&&"cities"===e.currentView.name&&e.citiesView?e.citiesView.changeCity(t):(e.citiesView=new l({collection:a.getCities(),activeCity:t}),e.changeContent(e.citiesView))}),this.router.on("route:local",function(t){var i=a.getLocals().findWhere({slug:t});if(i){var n=new c({model:i});e.changeContent(n)}}),s.on("router:navigate",function(t){return e.router.navigate(t)}),s.history.start()}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../modules/StoreModule":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/StoreModule.js","../routers/AppRouter":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/routers/AppRouter.js","../views/CitiesView":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CitiesView.js","../views/LocalView":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/LocalView.js"}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CitiesView.js":[function(e,t){(function(i){"use strict";var n=function(e){return e&&(e["default"]||e)},s=n("undefined"!=typeof window?window._:"undefined"!=typeof i?i._:null),o=n("undefined"!=typeof window?window.Backbone:"undefined"!=typeof i?i.Backbone:null),a=n("undefined"!=typeof window?window.Hammer:"undefined"!=typeof i?i.Hammer:null),l=n(e("../models/MapModel")),c=n(e("../models/FrameModel")),r=n(e("./CityView")),d=n(e("./MenuView")),u=n(e("./FrameView"));t.exports=o.ContentView.extend({name:"cities",className:"cities",content:".cities__overlay",template:'\n    <div class="cities__outerOverlay">\n      <div class="cities__overlay"></div>\n    </div>\n    <div class="cities__frame"></div>\n    <div class="cities__menu"></div>\n    <div class="cities__content"></div>\n  ',els:{$content:".cities__content"},didInitialize:function(e){var t=this;s.extend(this,s.pick(e,"activeCity")),this.map=new l({collection:this.collection}),this.menu=new d,this.frame=new u({model:new c}),this.cities=this.collection.map(function(e){return new r({model:e,position:t.map.getPosition(e.get("slug"))})}),this.listenTo(this.menu,"click",this.onMenuClick),this.listenTo(this.frame,"mouseover",this.onFrameOver),this.listenTo(this.frame,"mouseout",this.onFrameOut),jQuery(document).on("keydown",this.onKeydown.bind(this)),this.isSliding=!1,this.isOpen=!1,this.hammer=new a.Manager(this.$el[0],{dragLockToAxis:!0}),this.hammer.add(new a.Pan({direction:a.DIRECTION_ALL})),this.hammer.on("panleft panright",this.onPanHorizontal.bind(this)),this.hammer.on("panup pandown",this.onPanVertical.bind(this)),this.hammer.on("panend",this.onPanend.bind(this)),jQuery(window).on("resisze",this.onResize.bind(this)),this.dragFactorA,this.dragFactorB,this.translateX,this.translateY,this.width,this.height,this.panY=!1,this.panX=!1},willRemove:function(){this.cities.forEach(function(e){return e.remove()}),jQuery(document).off("keydown",this.onKeydown),jQuery(window).off("resize",this.onResize),this.hammer.destroy()},onMenuClick:function(e){console.log(e)},onPanHorizontal:function(e){if(this.panY)return!1;if(this.panX=!0,!this.dragFactorA||!this.dragFactorB){var t=this.map.getDirections(this.activeCity);this.dragFactorA=t.west?1:.2,this.dragFactorB=t.east?1:.2}this.width&&this.height||this.onResize();var i=2===e.direction?this.dragFactorB:this.dragFactorA,n=100/this.width*e.deltaX*i,s=this.translateX+n;this.els.$content.velocity({translateX:s+"%"},0)},onPanVertical:function(e){if(this.panX)return!1;if(this.panY=!0,!this.dragFactorA||!this.dragFactorB){var t=this.map.getDirections(this.activeCity);this.dragFactorA=t.north?1:.2,this.dragFactorB=t.south?1:.2}this.width&&this.height||this.onResize();var i=8===e.direction?this.dragFactorB:this.dragFactorA,n=100/this.height*e.deltaY*i,s=this.translateY+n;this.els.$content.velocity({translateY:s+"%"},0)},onPanend:function(e){var t=this.panX?100/this.width*e.deltaX:100/this.height*e.deltaY;if(Math.abs(t)<40)return this.dragFactorA=this.dragFactorB=null,this.panX=this.panY=!1,this.setPosition({easing:"ease-out"});var i=this.map.getDirections(this.activeCity);this.panX?0>t?this.changeCity(i.east,"ease-out"):this.changeCity(i.west,"ease-out"):0>t?this.changeCity(i.south,"ease-out"):this.changeCity(i.north,"ease-out"),this.setPosition({easing:"ease-out"}),this.dragFactorA=this.dragFactorB=null,this.panX=this.panY=!1},onFrameOver:function(e){if(this.isSliding)return!1;var t,i=this.map.getPosition(this.activeCity),n=this.map.getDirections(this.activeCity);"north"===e&&n.north?t={translateY:-100*i.top+10+"%"}:"east"===e&&n.east?t={translateX:-100*i.left-10+"%"}:"south"===e&&n.south?t={translateY:-100*i.top-10+"%"}:"west"===e&&n.west&&(t={translateX:-100*i.left+10+"%"}),t&&(this.isOpen=!0,this.els.$content.velocity("stop").velocity(t,{duration:400}))},onFrameOut:function(){if(this.isSliding||!this.isOpen)return!1;var e=this.map.getPosition(this.activeCity),t={translateX:""+-100*e.left+"%",translateY:""+-100*e.top+"%"};this.els.$content.velocity("stop").velocity(t,{duration:400})},onKeydown:function(e){if(!this.isSliding){var t=this.map.getDirections(this.activeCity),i=e.charcode?e.charcode:e.keyCode;switch(i){case 38:this.changeCity(t.north);break;case 39:this.changeCity(t.east);break;case 40:this.changeCity(t.south);break;case 37:this.changeCity(t.west)}}},onResize:function(){this.width=this.$el.width(),this.height=this.$el.height()},setCity:function(){var e=this.collection.findWhere({slug:this.activeCity}),t=s.findWhere(this.cities,{model:e});t&&t["in"](),this.setPosition({transition:!1}),this.setDirections()},changeCity:function(e){var t=void 0===arguments[1]?"ease-in-out":arguments[1];if(!e||e===this.activeCity)return!1;var i=this.collection.findWhere({slug:e}),n=s.findWhere(this.cities,{model:i});n&&n["in"]();var o;if(this.activeCity){var a=this.collection.findWhere({slug:this.activeCity});o=s.findWhere(this.cities,{model:a})}this.activeCity=e,this.setPosition({transition:!0,complete:function(){o&&o.out()},easing:t}),this.setDirections()},setPosition:function(e){var t=this;if(this.isSliding)return!1;var i=s.extend({transition:!0,duration:800,easing:"ease-in-out"},e),n=this.map.getPosition(this.activeCity);if(!n)return!1;this.translateX,this.translateY;this.translateX=-100*n.left,this.translateY=-100*n.top;var a={translateX:this.translateX+"%",translateY:this.translateY+"%"};this.isSliding=!0,this.els.$content.velocity("stop").velocity(a,{duration:i.transition?i.duration:0,easing:i.easing,complete:function(){t.isSliding=!1,i.complete&&i.complete(),o.trigger("router:navigate","/city/"+t.activeCity)}})},setDirections:function(){var e=this.map.getDirections(this.activeCity);this.frame.model.set(e)},didRender:function(){this.append(this.cities,".cities__content"),this.assign(this.menu,".cities__menu"),this.assign(this.frame,".cities__frame"),this.setCity(),this.menu["in"](),this.frame["in"]()}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/FrameModel":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/FrameModel.js","../models/MapModel":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/models/MapModel.js","./CityView":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CityView.js","./FrameView":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/FrameView.js","./MenuView":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/MenuView.js"}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/CityView.js":[function(e,t){(function(i){"use strict";var n=function(e){return e&&(e["default"]||e)},s=n("undefined"!=typeof window?window._:"undefined"!=typeof i?i._:null),o=n("undefined"!=typeof window?window.Backbone:"undefined"!=typeof i?i.Backbone:null),a=n(e("../modules/Loader"));t.exports=o.BetterView.extend({className:"city",template:'\n    <div class="city__content">\n      <div class="city__content__section">\n        <div class="city__title">\n          <div class="city__icon">\n            <svg xmln="http://www.w3.org/2000/svg" viewBox="0 0 90 90">\n              <% _.each(icon, function(el) { %>\n              <path fill="#ffffff"\n                stroke="#ffffff"\n                stroke-width="1"\n                stroke-linecap="round"\n                stroke-linejoin="round"\n                d="<%= el.path %>"\n                <% if (el.length) { %>\n                data-length="<%= el.length %>"\n                <% } %>\n                />\n              <% }); %>\n            </svg>\n          </div>\n          <h1 class="city__name"> <% print(name.toUpperCase()); %> </h1>\n          <h2 class="city__country"> <% print(country.toUpperCase()); %> </h2>\n          <div class="city__square city__square--topLeft"></div>\n          <div class="city__square city__square--topRight"></div>\n          <div class="city__square city__square--bottomLeft"></div>\n          <div class="city__square city__square--bottomRight"></div>\n        </div>\n      </div>\n      <% if (localSlug) { %>\n      <div class="city__content__section city__content__section--button">\n        <div class="city__button">\n          <a href="#local/<%= localSlug %>" class="city__link">\n            DÉCOUVRIR <% print(local.toUpperCase()); %>\n          </a>\n          <div class="city__border city__border--top"></div>\n          <div class="city__border city__border--left"></div>\n          <div class="city__border city__border--bottom"></div>\n          <div class="city__border city__border--right"></div>\n        </div>\n      </div>\n      <% } %>\n    </div>\n    <% if (background) { %>\n      <div class="city__background"\n        style="background-image:url(<%= background %>)"></div>\n    <% } %>\n  ',els:{$squareTopLeft:".city__square--topLeft",$squareTopRight:".city__square--topRight",$squareBottomLeft:".city__square--bottomLeft",$squareBottomRight:".city__square--bottomRight",$name:".city__name",$country:".city__country",$icon:".city__icon",$button:".city__button",$bordersTopBottom:".city__border--top, .city__border--bottom",$bordersLeftRight:".city__border--left, .city__border--right",$background:".city__background",$svgs:"svg"},didInitialize:function(e){s.extend(this,s.pick(e,"position"))},onLoad:function(){this.loaded=!0},setPosition:function(){this.$el.css({left:100*this.position.left+"%",top:100*this.position.top+"%"})},"in":function(){this.$el.css("z-index",2),this.els.$squareTopLeft.velocity("stop").velocity({left:0,opacity:1},{duration:400,delay:500}).velocity({top:0},{duration:400,delay:200}),this.els.$squareTopRight.velocity("stop").velocity({right:0,opacity:1},{duration:400,delay:500}).velocity({top:0},{duration:400,delay:200}),this.els.$squareBottomLeft.velocity("stop").velocity({left:0,opacity:1},{duration:400,delay:500}).velocity({bottom:0},{duration:400,delay:300}),this.els.$squareBottomRight.velocity("stop").velocity({right:0,opacity:1},{duration:400,delay:500}).velocity({bottom:0},{duration:400,delay:300}),this.els.$name.velocity("stop").velocity({opacity:1,top:0},{duration:500,delay:1100}),this.els.$country.velocity("stop").velocity({opacity:1,top:0},{duration:500,delay:1200}),this.els.$icon.velocity("stop").velocity({top:-90,opacity:1},{duration:1500,delay:500}),this.els.$button.velocity("stop").velocity({opacity:1,top:0},{duration:500,delay:1400}),this.els.$bordersTopBottom.velocity("stop").velocity({width:"100%"},{duration:1e3,delay:1400,display:"block"}),this.els.$bordersLeftRight.velocity("stop").velocity({height:"100%"},{duration:1e3,delay:1400,display:"block"}),this.els.$background.velocity("stop").velocity({scale:1.2},0).velocity({scale:1},2500),this.els.$svgs.each(function(){jQuery("path",this).each(function(){var e,t=jQuery(this),i=t.attr("data-length");i?e=parseFloat(i):(e=t[0].getTotalLength(),t.attr("data-length",e)),t.velocity("stop").velocity({"stroke-dashoffset":e,"stroke-dasharray":""+e+","+e,fillOpacity:0,strokeOpacity:1},0).velocity({"stroke-dashoffset":0},{duration:2e3,delay:500}).velocity({fillOpacity:1},{duration:500,delay:2e3,queue:!1})})})},out:function(){this.$el.css("z-index",1),this.els.$squareTopLeft.velocity("stop").css({top:"50%",left:"50%",opacity:0}),this.els.$squareTopRight.velocity("stop").css({top:"50%",right:"50%",opacity:0}),this.els.$squareBottomLeft.velocity("stop").css({bottom:"50%",left:"50%",opacity:0}),this.els.$squareBottomRight.velocity("stop").css({bottom:"50%",right:"50%",opacity:0}),this.els.$name.velocity("stop").css({opacity:0,top:-90}),this.els.$country.velocity("stop").css({opacity:0,top:50}),this.els.$icon.velocity("stop").css({top:-150,opacity:0}),this.els.$button.velocity("stop").css({opacity:0,top:50}),this.els.$bordersTopBottom.velocity("stop").css("width",0),this.els.$bordersLeftRight.velocity("stop").css("height",0),this.els.$background.velocity("stop").velocity({scale:1.2},0),this.els.$svgs.each(function(){jQuery("path",this).each(function(){var e,t=jQuery(this),i=t.attr("data-length");i?e=parseFloat(i):(e=t[0].getTotalLength(),t.attr("data-length",e)),t.velocity("stop").velocity({"stroke-dashoffset":e,"stroke-dasharray":""+e+","+e,fillOpacity:0,strokeOpacity:1},0)})})},didRender:function(){this.setPosition(),this.loaded=!1,this.loader=new a([this.model.get("background")]),this.loader.load().then(this.onLoad.bind(this))}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../modules/Loader":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/Loader.js"}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/FrameView.js":[function(e,t){(function(e){"use strict";var i=function(e){return e&&(e["default"]||e)},n=i("undefined"!=typeof window?window.Backbone:"undefined"!=typeof e?e.Backbone:null);t.exports=n.BetterView.extend({template:'\n    <div class="frame">\n      <a class="frame__bar frame__bar--top" data-direction="north">\n        <div class="frame__text frame__text--horizontal">\n          <span class="frame__letter"> N </span>\n        </div>\n        <div class="frame__arrow frame__arrow--top">\n          <div class="frame__arrow__container frame__arrow__container--top">\n            <svg xmln="http://www.w3.org/2000/svg" viewBox="0 0 20 50">\n              <path fill="#ffffff" d="M20,50L10 40 0 50 0 0 20 0 z"/>\n            </svg>\n          </div>\n        </div>\n        <div class="frame__part frame__part--left"></div>\n        <div class="frame__part frame__part--right"></div>\n      </a>\n\n      <a class="frame__bar frame__bar--right" data-direction="east">\n        <div class="frame__text frame__text--vertical">\n          <div class="frame__letters frame__letters--vertical">\n            <span class="frame__letter frame__letter--vertical"> E </span>\n          </div>\n        </div>\n        <div class="frame__arrow frame__arrow--right">\n          <div class="frame__arrow__container frame__arrow__container--right">\n            <svg xmln="http://www.w3.org/2000/svg" viewBox="0 0 50 20">\n              <path fill="#ffffff" d="M0,0L10 10 0 20 50 20 50 0 z"/>\n            </svg>\n          </div>\n        </div>\n        <div class="frame__part frame__part--top"></div>\n        <div class="frame__part frame__part--bottom"></div>\n      </a>\n\n      <a class="frame__bar frame__bar--bottom" data-direction="south">\n        <div class="frame__text frame__text--horizontal">\n          <span class="frame__letter"> S </span>\n        </div>\n        <div class="frame__arrow frame__arrow--bottom">\n          <div class="frame__arrow__container frame__arrow__container--bottom">\n            <svg xmln="http://www.w3.org/2000/svg" viewBox="0 0 20 50">\n              <path fill="#ffffff" d="M20,0L10 10 0 0 0 50 20 50 z"/>\n            </svg>\n          </div>\n        </div>\n        <div class="frame__part frame__part--left"></div>\n        <div class="frame__part frame__part--right"></div>\n      </a>\n\n      <a class="frame__bar frame__bar--left" data-direction="west">\n        <div class="frame__text frame__text--vertical">\n          <div class="frame__letters frame__letters--vertical">\n            <span class="frame__letter frame__letter--vertical"> W </span>\n          </div>\n        </div>\n        <div class="frame__arrow frame__arrow--left">\n          <div class="frame__arrow__container frame__arrow__container--left">\n            <svg xmln="http://www.w3.org/2000/svg" viewBox="0 0 50 20">\n              <path fill="#ffffff" d="M50,20L40 10 50 0 0 0 0 20 z"/>\n            </svg>\n          </div>\n        </div>\n        <div class="frame__part frame__part--top"></div>\n        <div class="frame__part frame__part--bottom"></div>\n      </a>\n    </div>\n  ',events:{"mouseover .frame__bar":"onMouseover","mouseout .frame__bar":"onMouseout"},didInitialize:function(){this.listenTo(this.model,"change",this.onChange)},onMouseover:function(e){var t=jQuery(e.currentTarget),i=t.attr("data-direction");i&&this.trigger("mouseover",i)},onMouseout:function(){this.trigger("mouseout")},onChange:function(){var e=this;["top","right","bottom","left"].forEach(function(t){var i=e.$(".frame__bar--"+t),n=i.attr("data-direction");e.model.has(n)?i.attr("href","#city/"+e.model.get(n)).removeClass("is-inactive"):i.attr("href",null).addClass("is-inactive")})},onUpdate:function(e){this.model.set(e)},"in":function(){this.$(".frame__bar--top").css("top",-40).velocity({top:0},{duration:800}),this.$(".frame__bar--bottom").css("bottom",-40).velocity({bottom:0},{duration:800}),this.$(".frame__bar--left").css("left",-40).velocity({left:0},{duration:800}),this.$(".frame__bar--right").css("right",-40).velocity({right:0},{duration:800})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/LocalView.js":[function(e,t){(function(i){"use strict";var n=function(e){return e&&(e["default"]||e)},s=n("undefined"!=typeof window?window.jQuery:"undefined"!=typeof i?i.jQuery:null),o=n("undefined"!=typeof window?window._:"undefined"!=typeof i?i._:null),a=n("undefined"!=typeof window?window.Backbone:"undefined"!=typeof i?i.Backbone:null),l=n("undefined"!=typeof window?window.skrollr:"undefined"!=typeof i?i.skrollr:null),c=n(e("../modules/StoreModule")),r=n(e("../modules/Loader"));t.exports=a.PageView.extend({className:"local",name:"local",template:'\n    <div class="local__content"></div>\n    <div class="local__next" style="background-image:url(<%= cityBackground %>);"></div>\n  ',blocksTemplates:{1:o.template('\n      <div class="local__block local__block--type1">\n        <img class="local__image" src="<%= urls[0] %>">\n      </div>\n    '),2:o.template('\n      <div class="local__block local__block--type2">\n        <div class="local__column local__column--half local__column--left">\n          <div class="local__column__content">\n            <img class="local__image" src="<%= urls[0] %>"\n              data-bottom-top="left:-100%;opacity:0;"\n              data-center-center="left:0%;opacity:1;top:0px;"\n              data-top-bottom="top:50px;"\n              >\n          </div>\n        </div>\n        <div class="local__column local__column--half local__column--right">\n          <div class="local__column__content">\n            <img class="local__image" src="<%= urls[1] %>"\n              data-bottom-top="left:100%;opacity:0;;"\n              data-center-center="left:0%;opacity:1;top:0px"\n              data-top-bottom="top:-20px;"\n              >\n          </div>\n        </div>\n      </div>\n    '),3:o.template('\n      <div class="local__block local__block--type3">\n        <div class="local__column local__column--mask">\n          <img class="local__image" src="<%= urls[0] %>"\n            data-bottom-top="transform:scale(1.5);"\n            data-center-bottom="transform:scale(1);"\n            >\n        </div>\n      </div>\n    ')},didInitialize:function(){this.$win=s(window),this.$win.on("scroll",this.onScroll.bind(this)),this.city=c.getCities().findWhere({localSlug:this.model.get("slug")})
},willRemove:function(){this.$win.off("scroll",this.onScroll),l.init().destroy()},"in":function(){return this.loaded?void a.PageView.prototype["in"].call(this):!1},out:function(e){var t=this;return s("html,body").scrollTop(this.scrollTop),new Promise(function(i){setTimeout(e,400),t.$el.velocity("stop").velocity({opacity:0},{duration:800,complete:function(){i()}})})},onScroll:function(){this.scrollTop=this.$win.scrollTop()},onLoad:function(){var e=this;this.loaded=!0,o.defer(function(){e.skrollr=l.init({forceHeight:!1})}),this["in"]()},renderBlocks:function(){var e=this,t="";return this.model.get("images").forEach(function(i){t+=e.blocksTemplates[i.type](i)}),t},render:function(){return this.$el.html(this.template({cityBackground:this.city.get("background")})),this.$(".local__content").html(this.renderBlocks()),this.didRender(),this},didRender:function(){var e=[];this.model.get("images").forEach(function(t){t.urls.forEach(function(t){return e.push(t)})}),this.loaded=!1,this.loader=new r(e),this.loader.load().then(this.onLoad.bind(this))}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../modules/Loader":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/Loader.js","../modules/StoreModule":"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/modules/StoreModule.js"}],"/Users/valentin/Documents/repos/localeyes-es6/app/src/scripts/views/MenuView.js":[function(e,t){(function(e){"use strict";var i=function(e){return e&&(e["default"]||e)},n=i("undefined"!=typeof window?window.Backbone:"undefined"!=typeof e?e.Backbone:null);t.exports=n.BetterView.extend({template:'\n    <div class="menu">\n      <a href="#/locals" class="menu__button menu__button--bottomRight" data-button="locals">\n        <div class="menu__icon menu__icon--locals">\n          <svg xmln="http://www.w3.org/2000/svg" viewBox="0 0 40 40">\n            <path d="M35.9,32C34.5,28.2,32,27.3,30,27c-1.7-0.3-3.7-0.9-4.4-1.3c0-0.3,0-1,0-2.1c0,0,0.1-0.1,0.1-0.1l0,0c1-1.3,1.4-2.5,1.7-3.4  c0.6-0.4,1.3-1.3,1.7-3c0.2-1,0.4-2.2-0.3-3.1c0,0,0,0,0-0.1c0.6-6.2-3.3-9.3-5.6-10.1l0,0l0,0c-0.9-0.3-1.7-0.4-2.5-0.4  c-0.2,0-0.4,0-0.5,0c-0.2,0-0.3,0-0.5,0c-0.8,0-1.6,0.1-2.5,0.4l0,0l0,0c-2.3,0.8-6.3,3.9-5.6,10.1c0,0,0,0,0,0.1  c-0.7,0.9-0.5,2.1-0.3,3.1c0.4,1.7,1.1,2.5,1.7,3c0.2,0.8,0.7,2,1.6,3.3v0c0,0,0,0,0,0c0.1,0.1,0.1,0.1,0.2,0.2  c0.1,1.1,0.1,1.7,0,2.1c-0.7,0.4-2.8,1-4.4,1.3c-2,0.4-4.4,1.2-5.9,5.1c-0.2,0.7-0.2,1.4,0.2,1.9c1.5,2.2,9.4,2.6,15.7,2.6  s14.2-0.5,15.7-2.6C36.1,33.4,36.2,32.7,35.9,32z M14,18.9c-0.2,0-1-0.1-1.5-2.2c-0.4-1.6,0-1.9,0.3-1.9c0.1,0,0.2,0.1,0.2,0.1  c-1.4-7.5,4.4-9.5,4.4-9.5c0.8-0.2,1.5-0.3,2-0.3c0.2,0,0.4,0,0.5,0c0.2,0,0.3,0,0.5,0c0.6,0,1.2,0.1,2,0.3c0,0,5.8,2,4.4,9.5  c0,0,0.1-0.1,0.2-0.1c0.3,0,0.7,0.3,0.3,1.9c-0.5,2.1-1.3,2.2-1.5,2.2c0,0,0,0,0,0s-0.1,2-1.9,4.1c0,0,0,0,0,0.1  c-1.4,1.4-2.8,2.1-4.3,2.1c-1.8-0.1-3.2-1.3-3.9-2c0,0,0,0,0,0C14.1,20.9,14,18.9,14,18.9C14,18.9,14,18.9,14,18.9z M20,35  c-7.5,0-15-0.8-14.4-2.4c1.2-3.2,3.1-3.8,4.7-4.1c1.5-0.3,5.3-1.2,5.6-2.1c0.1-0.3,0.1-0.8,0.1-1.3c0.9,0.7,2.2,1.4,3.7,1.4  c0.1,0,0.2,0,0.2,0c1.4,0,2.7-0.5,4-1.5c0,0.6,0,1.1,0.1,1.4c0.3,0.9,4.1,1.8,5.6,2.1c1.5,0.3,3.5,0.9,4.7,4.1  C35,34.2,27.5,35,20,35z"/>\n          </svg>\n        </div>\n      </a>\n\n      <a href="#/city/paris" class="menu__button menu__button--topRight" data-button="map">\n        <div class="menu__icon menu__icon--map">\n          <svg xmln="http://www.w3.org/2000/svg" viewBox="0 0 40 40">\n            <path fill="none"\n              stroke-width="2"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              d="M35.2,30.3L26.4 34.6 14.4 28.4 4.8 33.2 4.8 10.1 14.4 5.4 26.4 11.6 35.2 7.2 z"/>\n            <line stroke-width="2" stroke-width="1" x1="14.4" y1="5.4" x2="14.4" y2="28.4"/>\n            <line stroke-width="2" stroke-width="1" x1="26.4" y1="11.6" x2="26.4" y2="34.6"/>\n          </svg>\n        </div>\n      </a>\n\n      <a href="#" class="menu__button menu__button--bottomLeft" data-button="share">\n        <div class="menu__expandable">\n          <div class="menu__icon menu__icon--pinterest">\n            <svg xmln="http://www.w3.org/2000/svg" viewBox="0 0 40 40">\n              <path d="M20.5,8.4c-5.7,0-8.5,4.5-8.5,8.3c0,2.3,0.8,4.3,2.4,5.1c0.3,0.1,0.5,0,0.6-0.3c0.1-0.2,0.2-0.8,0.2-1.1  c0.1-0.3,0-0.5-0.2-0.7c-0.5-0.6-0.8-1.5-0.8-2.6c0-3.4,2.3-6.4,5.9-6.4c3.2,0,5,2.2,5,5.1c0,3.8-1.5,7.1-3.8,7.1  c-1.2,0-2.2-1.2-1.9-2.6c0.4-1.7,1.1-3.5,1.1-4.7c0-1.1-0.5-2-1.6-2c-1.3,0-2.3,1.5-2.3,3.5c0,1.3,0.4,2.1,0.4,2.1s-1.3,6.2-1.5,7.3  c-0.5,2.2-0.1,4.8,0,5.1c0,0.2,0.2,0.2,0.3,0.1c0.1-0.2,1.6-2.3,2.2-4.4c0.1-0.6,0.8-3.7,0.8-3.7c0.4,0.9,1.6,1.7,2.9,1.7  c3.8,0,6.4-3.9,6.4-9.1C28,12.1,25,8.4,20.5,8.4z"/>\n            </svg>\n          </div>\n          <div class="menu__icon menu__icon--twitter">\n            <svg xmln="http://www.w3.org/2000/svg" viewBox="0 0 40 40">\n              <path d="M9.6,27c0.3,0,0.7,0.1,1,0.1c2,0,3.8-0.6,5.4-1.9c-0.9,0-1.8-0.3-2.5-0.9s-1.2-1.3-1.5-2.2c0.2,0,0.5,0.1,0.8,0.1  c0.4,0,0.8-0.1,1.1-0.2c-1-0.2-1.8-0.7-2.5-1.6c-0.7-0.8-1-1.8-1-2.9v-0.1c0.6,0.4,1.3,0.5,2,0.6c-0.6-0.4-1.1-0.9-1.4-1.6  c-0.4-0.7-0.5-1.4-0.5-2.2c0-0.8,0.2-1.6,0.6-2.3c1.1,1.4,2.4,2.5,3.9,3.4c1.5,0.8,3.2,1.3,5,1.4c-0.1-0.4-0.1-0.7-0.1-1  c0-1.2,0.4-2.3,1.3-3.2c0.8-0.9,1.9-1.3,3-1.3c1.2,0,2.3,0.5,3.1,1.4c1-0.2,1.9-0.6,2.7-1.1c-0.3,1.1-0.9,1.9-1.9,2.5  c0.8-0.1,1.6-0.3,2.5-0.7c-0.5,0.9-1.3,1.7-2.1,2.4v0.6c0,1.2-0.2,2.4-0.5,3.6c-0.3,1.2-0.9,2.4-1.5,3.5c-0.7,1.1-1.5,2.1-2.5,3  s-2.1,1.6-3.4,2.1c-1.3,0.5-2.8,0.8-4.3,0.8C13.7,29,11.5,28.3,9.6,27L9.6,27z"/>\n            </svg>\n          </div>\n          <div class="menu__icon menu__icon--facebook">\n            <svg xmln="http://www.w3.org/2000/svg" viewBox="0 0 40 40">\n              <path d="M14.6,20.7v-3.9h3.1v-1.9c0-1.4,0.5-2.6,1.4-3.6c0.9-1,2-1.5,3.3-1.5h3v3.9h-3c-0.2,0-0.4,0.1-0.5,0.3  c-0.2,0.2-0.2,0.5-0.2,0.8v2h3.8v3.9h-3.8v9.4h-3.8v-9.4L14.6,20.7L14.6,20.7z"/>\n            </svg>\n          </div>\n        </div>\n        <div class="menu__icon menu__icon--share">\n          <svg xmln="http://www.w3.org/2000/svg" viewBox="0 0 40 40">\n            <path fill="none"\n              stroke-width="2"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              d="M17.2,22.9L3.1 17.2 36.9 3.1 22.8 36.9 z"/>\n            <line stroke-width="2" x1="17.2" y1="22.9" x2="36.9" y2="3.1"/>\n          </svg>\n        </div>\n      </a>\n\n      <a href="#/infos" class="menu__button menu__button--topLeft" data-button="infos">\n        <div class="menu__icon menu__icon--infos">\n          <svg xmln="http://www.w3.org/2000/svg" viewBox="0 0 40 40">\n            <rect x="18.5" y="16.1" width="3" height="15.2"/>\n            <circle cx="20" cy="10.8" r="2.2"/>\n          </svg>\n        </div>\n      </a>\n    </div>\n  ',events:{"click a":"onClick","mouseenter .menu__button--bottomLeft":"onShareOver","mouseleave .menu__button--bottomLeft":"onShareOut"},els:{$expandable:".menu__expandable",$icon:".menu__icon--share"},didInitialize:function(){this.expandableHeight,this.iconHeight},onClick:function(e){var t=jQuery(e.currentTarget).attr("data-button");t&&this.trigger("click",t)},onShareOver:function(){this.expandableHeight||(this.expandableHeight=this.els.$expandable.css("height","auto").height()),this.els.$expandable.css("height",0),this.iconHeight||(this.iconHeight=this.els.$icon.outerHeight()),this.els.$expandable.velocity("stop").velocity({height:this.expandableHeight},300),this.els.$icon.velocity("stop").velocity({marginBottom:-this.iconHeight},400)},onShareOut:function(){this.els.$expandable.velocity("stop").velocity({height:0},300),this.els.$icon.velocity("stop").velocity({marginBottom:0},400)},"in":function(){this.$("a").each(function(e){jQuery(this).css({opacity:0,marginTop:50}).velocity({opacity:1,marginTop:0},{duration:800,delay:300*e})})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},["./app/src/scripts/main.js"]);